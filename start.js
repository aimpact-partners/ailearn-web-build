System.register(["@beyond-js/kernel@0.1.9/bundle","@beyond-js/kernel@0.1.9/transversals","@beyond-js/widgets@1.1.0/render","@aimpact/ailearn-app@0.1.3-test.04/model/wrapper","@aimpact/chat-sdk@1.0.1/session","@beyond-js/kernel@0.1.9/routing","react@18.2.0","pragmate-ui@1.0.0-beta.1/icons","pragmate-ui@1.0.0-beta.1/image","@beyond-js/reactive@1.2.0/model","@aimpact/ailearn-app@0.1.3-test.04/model/gclassroom","@aimpact/ailearn-sdk@1.0.0/core","@aimpact/ailearn-app@0.1.3-test.04/config","@aimpact/chat-sdk@1.0.1/startup"],function(a,e){var t,i,s,r,n,o,p,c,l,m,u,d,g,h,y;return{setters:[function(a){},function(a){t=a},function(a){i=a},function(a){s=a},function(a){r=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){c=a},function(a){l=a},function(a){m=a},function(a){u=a},function(a){d=a},function(a){g=a}],execute:function(){h=brequire("@beyond-js/kernel/transversals").Transversal,a("__beyond_transversal",h=new h("start","")),h.dependencies.update([["@beyond-js/kernel/transversals",t],["@beyond-js/widgets/render",i],["@aimpact/ailearn-app/model/wrapper",s],["@aimpact/chat-sdk/session",r],["@beyond-js/kernel/routing",n],["react",o],["pragmate-ui/icons",p],["pragmate-ui/image",c],["@beyond-js/reactive/model",l],["@aimpact/ailearn-app/model/gclassroom",m],["@aimpact/ailearn-sdk/core",u],["@aimpact/ailearn-app/config",d],["@aimpact/chat-sdk/startup",g]]),(y=brequire("@beyond-js/widgets/render").widgets).register([{name:"aimpact-chat-control",attrs:["id","container","disabled","playable"],vspecifier:"@aimpact/chat@1.0.2/chat-control.widget"},{name:"chat-wd-page",vspecifier:"@aimpact/chat@1.0.2/chat-page.widget",is:"page",route:"/chat/${id}",layout:"chat-layout"},{name:"chat-explorer-view",vspecifier:"@aimpact/chat@1.0.2/conversations/explorer.widget"},{name:"chat-documents-access",vspecifier:"@aimpact/chat@1.0.2/documents/access.widget",is:"page",route:"/documents/access",layout:"auth-layout"},{name:"app-documents-page",vspecifier:"@aimpact/chat@1.0.2/documents.widget",is:"page",route:"/documents",layout:"chat-layout"},{name:"aimpact-chat-user-profile",vspecifier:"@aimpact/chat@1.0.2/user/profile.widget"},{name:"chat-home-page",vspecifier:"@aimpact/chat@1.0.2/home.widget",is:"page",route:"/_this_route_does_not_exists",layout:"chat-layout"},{name:"auth-layout",vspecifier:"@aimpact/chat@1.0.2/auth-layout",is:"layout"},{name:"chat-layout",vspecifier:"@aimpact/chat@1.0.2/chat-layout",is:"layout"},{name:"default-layout",vspecifier:"@aimpact/chat@1.0.2/default-layout",is:"layout"},{name:"general-layout",vspecifier:"@aimpact/chat@1.0.2/general-layout",is:"layout"},{name:"auth-layout",vspecifier:"@aimpact/auth@0.0.1/auth-layout",is:"layout"},{name:"auth-login-page",vspecifier:"@aimpact/auth@0.0.1/auth-login.widget",is:"page",route:"/auth/login",layout:"auth-layout"},{name:"aimpact-login-presentation",attrs:["dynamic-children"],vspecifier:"@aimpact/auth@0.0.1/auth/login/presentation.widget"},{name:"auth-recover-password-page",vspecifier:"@aimpact/auth@0.0.1/auth-recover-password.widget",is:"page",route:"/auth/recover-password",layout:"auth-layout"},{name:"auth-recovery-page",vspecifier:"@aimpact/auth@0.0.1/auth-recovery.widget",is:"page",route:"/auth/recovery",layout:"auth-layout"},{name:"auth-register-page",vspecifier:"@aimpact/auth@0.0.1/auth-register.widget",is:"page",route:"/auth/register",layout:"auth-layout"},{name:"chat-sdk-markdown-page",vspecifier:"@aimpact/chat-sdk@1.0.1//chat-sdk/markdown",is:"page",route:"/chat/sdk/markdown",layout:"general-layout"},{name:"chat-sdk-playable",vspecifier:"@aimpact/chat-sdk@1.0.1/chat-sdk/playable",is:"page",route:"/chat/sdk/playable"},{name:"coming-soon",vspecifier:"pragmate-ui@1.0.0-beta.1/coming-soon",is:"page",route:"/components/coming-soon"},{name:"pui-template-view-widget",vspecifier:"pragmate-ui@1.0.0-beta.1/pui/template/palette"},{name:"ailearn-session-dashboard",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/assignments/dashboard.widget",is:"page",route:"/assignments/${id}/dashboard/classroom",layout:"dashboard-layout"},{name:"old-assignment-dashboard-participant",attrs:["id","participant-id"],vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/assignment-dashboard-participant.widget",is:"page",route:"/assignments/${assignmentId}/dashboard/participant/${participantId}",layout:"dashboard-layout"},{name:"dashboard-wall",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/dashboard-wall.widget",is:"page",route:"/assignments/${id}/wall",layout:"dashboard-layout"},{name:"ailearn-sessions-access",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/sessions/access.widget",is:"page",route:"/sessions/access/${id}",layout:"chat-layout"},{name:"ailearn-assignments-all-in-one",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/assignments/all-in-one.widget",is:"page",route:"/assignments/${assignmentId}/all-in-one/${id}",layout:"chat-layout"},{name:"ailearn-assignments-assessment",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/assignments/assessment.widget",is:"page",route:"/assignments/${assignmentId}/assessment/${id}",layout:"main-layout"},{name:"ailearn-character-talk",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/assignments/character-talk.widget",is:"page",route:"/assignments/${assignmentId}/character-talk/${activityId}/chat/${chatId}",layout:"main-layout"},{name:"ailearn-content-theory-page",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/assignments/content-theory.widget",is:"page",route:"/assignments/${assignmentId}/content-theory/${activityId}/chat/${chatId}",layout:"main-layout"},{name:"ailearn-debate-activity-page",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/assignments/debate.widget",is:"page",route:"/assignments/${assignmentId}/debate/${activityId}/chat/${chatId}",layout:"main-layout"},{name:"ailearn-assignments-spoken",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/assignments/spoken.widget",is:"page",route:"/assignments/${assignmentId}/spoken/${id}",layout:"main-layout"},{name:"ailearn-assignments-coach-list",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/assignments/coach/list.widget",is:"page",route:"/assignments/${id}/coach/list",layout:"main-layout"},{name:"ailearn-assignments-student-list",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/assignments/student/list.widget",is:"page",route:"/assignments/${id}/student/list",layout:"main-layout"},{name:"ailearn-gclassroom-permissions",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/gclassroom-permissions.widget"},{name:"ailearn-assignment-view",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/assignment/view.widget",is:"page",route:"/assignments/${id}",layout:"main-layout"},{name:"ailearn-gclassrooms-access",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/gclassroom/access.widget",is:"page",route:"/gclassroom/access",layout:"chat-layout"},{name:"app-classrooms-create",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/classrooms/create.widget",is:"page",route:"/classrooms/create",layout:"main-layout"},{name:"ailearn-gclassroom-explorer",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/gclassroom-explorer.widget"},{name:"ailearn-classroom-join",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/classrooms/join.widget",is:"page",route:"/classrooms/join",layout:"main-layout"},{name:"ailearn-classroom-list",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/classrooms/list.widget",is:"page",route:"/classrooms/list",layout:"main-layout"},{name:"app-classrooms-view",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/classrooms/view.widget",is:"page",route:"/classrooms/view/${id}",layout:"main-layout"},{name:"ailearn-modules-list",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/modules/list.widget",is:"page",route:"/modules/list",layout:"main-layout"},{name:"app-modules-management",attrs:["id","activityId"],vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/modules/management/settings.widget"},{name:"app-module-objective-management",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/modules/draft.widget",is:"page",route:"/modules/management",layout:"main-layout"},{name:"app-organizations-create",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/organizations/create.widget",is:"page",route:"/organizations/create",layout:"main-layout"},{name:"ailearn-organization-join",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/organizations/join.widget",is:"page",route:"/organizations/join",layout:"main-layout"},{name:"ailearn-organizations-list",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/organizations/list.widget",is:"page",route:"/organizations/list",layout:"main-layout"},{name:"app-organizations-view",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/organizations/view.widget",is:"page",route:"/organizations/view/${id}",layout:"main-layout"},{name:"ailearn-user-profile",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/user/profile.widget",is:"page",route:"/users/me",layout:"main-layout"},{name:"dashboard-layout",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/dashboard-layout.widget",is:"layout"},{name:"ailearn-empty-layout",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/layout/empty",is:"layout"},{name:"main-layout",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/main-layout.widget",is:"layout"},{name:"app-policies-page",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/pages/age.widget",is:"page",route:"/user-validation"},{name:"ailearn-community-modules",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/community.widget",is:"page",route:"/community",layout:"main-layout"},{name:"app-not-allowed",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/not-allowed-control.widget"},{name:"app-not-allowed-page",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/not-allowed-page.widget"},{name:"app-missing-control",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/missing.widget"},{name:"app-missing-page",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/missing-page.widget",is:"page",route:"/error-404",layout:"main-layout"},{name:"app-system-error-control",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/system-error-widget.widget"},{name:"app-system-error-page",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/system-error.widget",is:"page",route:"/error-500",layout:"main-layout"},{name:"student-home",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/home.widget",is:"page",route:"/",layout:"main-layout"},{name:"ailearn-identify-page",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/identify.widget",is:"page",route:"/next-steps"},{name:"privacy-page",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/pages/privacy",is:"page",route:"/privacy"},{name:"ailearn-terms-and-conditions-page",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/pages/terms",is:"page",route:"/terms-and-conditions"},{name:"app-updating-page",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/pages/updating.widget",is:"page",route:"/updating"},{name:"app-template-bottom-bar",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/template/bottom-bar",is:"page",route:"/template/bottom-bar"},{name:"ailearn-template-typography",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/template/typography",is:"page",route:"/template/typography",layout:"ailearn-layout"},{name:"ailearn-ui-components",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/ui/components",is:"page",route:"/ui/components",layout:"chat-layout"},{name:"app-test-components",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/test/blank",is:"page",route:"/tests/blank"},{name:"app-test-web-component",vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/test/web-component"}]),(y=[]).push([{module:{vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/routing"},type:"start"},function(a,e){return a.set("./handlers/home",{hash:3464692361,creator:function(a,e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkHome=async function({},a,e){return e()}}}),a.set("./handlers/policies",{hash:779423052,creator:function(a,e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkPolicies=async function(a,e,t){await o.sessionWrapper.isReady,await o.sessionWrapper?.user?.isReady;var{pathname:i,uri:s}=a,{termsAccepted:r,age:n}=o.sessionWrapper.user;return p.PUBLIC_ROUTES.includes(i)?s:!r&&17<n||!n?(i&&"/user-validation"!==i&&(e.previous=a),{pathname:"/user-validation"}):"/user-validation"===i&&r&&17<n?{pathname:"/"}:t()};var o=a("@aimpact/chat-sdk/session"),p=a("../public-routes")}}),a.set("./handlers/roles",{hash:2323505560,creator:function(a,e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkRoles=async function(a,e,t){var i=a.pathname;return await s.sessionWrapper.isReady,/^\/assignments\/.+$/.test(i)||s.sessionWrapper.user.roles.length||function(a){for(var e of["/users/me","/organizations/create","/organizations/join"])if(a.includes(e))return 1}(a.uri)?t():{pathname:"/next-steps"}};var s=a("@aimpact/chat-sdk/session")}}),a.set("./handlers/session",{hash:683799712,creator:function(a,e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkSession=async function(a,e,t){var i=a.pathname;return await s.sessionWrapper.isReady,!s.sessionWrapper.logged&&r.PUBLIC_ROUTES.includes(i)?{pathname:i}:s.sessionWrapper.logged&&s.sessionWrapper.user?.outdated?{pathname:"/updating"}:s.sessionWrapper.logged&&r.AUTH_ROUTES.includes(i)?{pathname:"/"}:!r.AUTH_ROUTES.includes(i)&&r.PUBLIC_ROUTES.includes(i)||s.sessionWrapper.logged?t(e.previous):(e.previous=a,{pathname:n})};var s=a("@aimpact/chat-sdk/session"),t=a("@beyond-js/kernel/routing"),r=a("../public-routes");let n="/auth/login";s.sessionWrapper.on("logout",()=>{t.routing.replaceState({},"","/")})}}),a.set("./public-routes",{hash:2866617319,creator:function(a,e){Object.defineProperty(e,"__esModule",{value:!0}),e.PUBLIC_ROUTES=e.AUTH_ROUTES=void 0,e.PUBLIC_ROUTES=["/auth/login","/auth/register","/auth/recovery","/auth/recover-password","/documents/access","/privacy","/terms-and-conditions","/reactive/testing"],e.AUTH_ROUTES=["/auth/login","/auth/register","/auth/recovery","/auth/recover-password"]}}),a.set("./router",{hash:1955322997,creator:function(a,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Router=void 0;let t;e.Router=class{#isDefault;get isDefault(){return"/"===this.#pathname}#pathname;get pathname(){return this.#pathname}#data;get data(){return this.#data}#previous;get previous(){return t}set previous(a){a?.uri!==this.#previous?.uri&&(this.#previous=a,t=a)}#index;#handlers;constructor(a){if(!Array.isArray(a))throw new Error("handlers must be an array");a.forEach(a=>{if("function"!=typeof a)throw new Error("handlers must be an array of functions")}),this.#handlers=a}async process(e,t){return this.#handlers.length?await this.#handlers[e](t,this,async a=>(a=a||t,e<this.#handlers.length-1?this.process(e+1,a):a)):t.uri}async validate(a){return this.#handlers.length?this.process(0,a):a}static getPreviousUrl(){return t}}}}),a.set("./routing",{hash:2688367902,creator:function(a,e){var t=a("@beyond-js/kernel/routing"),i=a("./handlers/policies"),s=a("./handlers/roles"),r=a("./handlers/session"),n=a("./router"),o=a("@aimpact/chat-sdk/session"),a=[r.checkSession,i.checkPolicies,s.checkRoles];let p=new n.Router(a);t.routing.redirect=async function(a){try{o.sessionWrapper.on("logout",()=>{t.routing.replaceState({},"","/"),p.previous=void 0});var e=await p.validate(a);return e?.uri??e.pathname,e.pathname}catch(a){return console.error(a),"/error-500"}},t.routing.missing=async function(){return"app-missing-page"}}}),e.descriptor=[{im:"./router",from:"Router",name:"Router"}],{dependencies:["@aimpact/ailearn-app/model/wrapper","@aimpact/chat-sdk/session","@beyond-js/kernel/routing"]}}]),y.push([{module:{vspecifier:"@aimpact/ailearn-app@0.1.3-test.04/initialize-app"},type:"start"},function(a,e){return a.set("./extensions",{hash:2049006555,creator:function(a,e){}}),a.set("./icons/profile",{hash:2038903291,creator:function(a,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProfileIcon=void 0;var s=a("react"),r=a("pragmate-ui/icons"),n=a("@aimpact/chat-sdk/session"),o=a("pragmate-ui/image");e.ProfileIcon=({onClick:a})=>{let[e,t]=s.default.useState(!1),i;if(n.sessionWrapper.user)return i=n.sessionWrapper.user.getProperties(),s.default.createElement("div",{className:"aside-item",onClick:a},e?s.default.createElement(r.Icon,{className:"lg",icon:"user"}):s.default.createElement(o.Image,{alt:"user image profile",src:i.photoURL,onError:()=>t(!0)}))}}}),a.set("./index",{hash:1018057204,creator:function(a,e){a=a("./startup"),globalThis.localStorage?.setItem("chat.app.user.default.profile","/assets/rvd-profile-blue.png"),a.Startup.setup()}}),a.set("./startup",{hash:2790733772,creator:function(a,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Startup=void 0;var t=a("@beyond-js/reactive/model"),i=a("@beyond-js/widgets/render"),s=a("@aimpact/ailearn-app/model/gclassroom"),r=a("@aimpact/chat-sdk/session"),n=a("@aimpact/ailearn-sdk/core"),o=a("@aimpact/ailearn-app/config"),p=a("@aimpact/chat-sdk/startup");class c extends t.ReactiveModel{constructor(){super(),this.#start()}#initSDK=async()=>{var a=o.default.environment;await p.sdkConfig.initialize({environment:a,userModel:n.User})};#start=async()=>{await this.#initSDK();var a=[s.gclassroom.isReady,r.sessionWrapper.isReady];await Promise.all(a),this.checkMode()};checkMode(){var a=localStorage.getItem("aimpact.accessibility.mode")?localStorage.getItem("aimpact.accessibility.mode"):"normal",e=document.querySelector("html");e&&(e.setAttribute("data-accessibility-mode",a),i.widgets.attributes.add("data-accessibility-mode",a))}static setup(){new c}}e.Startup=c}}),e.descriptor=[{im:"./icons/profile",from:"ProfileIcon",name:"ProfileIcon"}],{dependencies:["react","pragmate-ui/icons","@aimpact/chat-sdk/session","pragmate-ui/image","@beyond-js/reactive/model","@beyond-js/widgets/render","@aimpact/ailearn-app/model/gclassroom","@aimpact/ailearn-sdk/core","@aimpact/ailearn-app/config","@aimpact/chat-sdk/startup"]}}]),h.initialise(y)}}});