System.register(["@beyond-js/kernel@0.1.9/bundle","@beyond-js/kernel@0.1.9/transversals","@beyond-js/widgets@1.1.0/render","@aimpact/ailearn-app@0.0.35.dev-01/model/wrapper","@aimpact/chat-sdk@1.0.0/session","@beyond-js/kernel@0.1.9/routing","@aimpact/chat@1.0.1/extensions","react@18.2.0","pragmate-ui@0.1.1/icons","pragmate-ui@0.1.1/image","@beyond-js/reactive@1.1.12/model","@beyond-js/kernel@0.1.9/texts","@beyond-js/kernel@0.1.9/core","@aimpact/chat-sdk@1.0.0/initialize","@aimpact/ailearn-app@0.0.35.dev-01/model/gclassroom","@aimpact/ailearn-sdk@1.0.0/core","@aimpact/chat-sdk@1.0.0/settings"],function(e,a){"use strict";var t,i,s,n,r,o,p,c,l,u,d,m,g,h,v,y,f,w;return{setters:[function(e){0},function(e){t=e},function(e){i=e},function(e){s=e},function(e){n=e},function(e){r=e},function(e){o=e},function(e){p=e},function(e){c=e},function(e){l=e},function(e){u=e},function(e){d=e},function(e){m=e},function(e){g=e},function(e){h=e},function(e){v=e},function(e){y=e}],execute:function(){f=brequire("@beyond-js/kernel/transversals").Transversal,e("__beyond_transversal",f=new f("start","")),f.dependencies.update([["@beyond-js/kernel/transversals",t],["@beyond-js/widgets/render",i],["@aimpact/ailearn-app/model/wrapper",s],["@aimpact/chat-sdk/session",n],["@beyond-js/kernel/routing",r],["@aimpact/chat/extensions",o],["react",p],["pragmate-ui/icons",c],["pragmate-ui/image",l],["@beyond-js/reactive/model",u],["@beyond-js/kernel/texts",d],["@beyond-js/kernel/core",m],["@aimpact/chat-sdk/initialize",g],["@aimpact/ailearn-app/model/gclassroom",h],["@aimpact/ailearn-sdk/core",v],["@aimpact/chat-sdk/settings",y]]),w=brequire("@beyond-js/widgets/render").widgets,w.register([{name:"aimpact-chat-control",attrs:["id","container","disabled","playable"],vspecifier:"@aimpact/chat@1.0.1/chat-control.widget"},{name:"chat-wd-page",vspecifier:"@aimpact/chat@1.0.1/chat-page.widget",is:"page",route:"/chat/${id}",layout:"chat-layout"},{name:"chat-explorer-view",vspecifier:"@aimpact/chat@1.0.1/conversations/explorer.widget"},{name:"chat-documents-access",vspecifier:"@aimpact/chat@1.0.1/documents/access.widget",is:"page",route:"/documents/access",layout:"auth-layout"},{name:"app-documents-page",vspecifier:"@aimpact/chat@1.0.1/documents.widget",is:"page",route:"/documents",layout:"chat-layout"},{name:"aimpact-chat-user-profile",vspecifier:"@aimpact/chat@1.0.1/user/profile.widget"},{name:"chat-home-page",vspecifier:"@aimpact/chat@1.0.1/home.widget",is:"page",route:"/_this_route_does_not_exists",layout:"chat-layout"},{name:"auth-layout",vspecifier:"@aimpact/chat@1.0.1/auth-layout",is:"layout"},{name:"chat-layout",vspecifier:"@aimpact/chat@1.0.1/chat-layout",is:"layout"},{name:"default-layout",vspecifier:"@aimpact/chat@1.0.1/default-layout",is:"layout"},{name:"general-layout",vspecifier:"@aimpact/chat@1.0.1/general-layout",is:"layout"},{name:"auth-layout",vspecifier:"@aimpact/auth@0.0.1/auth-layout",is:"layout"},{name:"auth-login-page",vspecifier:"@aimpact/auth@0.0.1/auth-login.widget",is:"page",route:"/auth/login",layout:"auth-layout"},{name:"aimpact-login-presentation",attrs:["dynamic-children"],vspecifier:"@aimpact/auth@0.0.1/auth/login/presentation.widget"},{name:"auth-recover-password-page",vspecifier:"@aimpact/auth@0.0.1/auth-recover-password.widget",is:"page",route:"/auth/recover-password",layout:"auth-layout"},{name:"auth-recovery-page",vspecifier:"@aimpact/auth@0.0.1/auth-recovery.widget",is:"page",route:"/auth/recovery",layout:"auth-layout"},{name:"auth-register-page",vspecifier:"@aimpact/auth@0.0.1/auth-register.widget",is:"page",route:"/auth/register",layout:"auth-layout"},{name:"chat-sdk-markdown-page",vspecifier:"@aimpact/chat-sdk@1.0.0//chat-sdk/markdown",is:"page",route:"/chat/sdk/markdown",layout:"general-layout"},{name:"chat-sdk-playable",vspecifier:"@aimpact/chat-sdk@1.0.0/chat-sdk/playable",is:"page",route:"/chat/sdk/playable"},{name:"reactive-layout",vspecifier:"@beyond-js/reactive@1.1.12/reactive-layout",is:"layout"},{name:"coming-soon",vspecifier:"pragmate-ui@0.1.1/coming-soon",is:"page",route:"/components/coming-soon"},{name:"pui-template-view-widget",vspecifier:"pragmate-ui@0.1.1/pui/template/palette"},{name:"ailearn-session-dashboard",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/assignments/dashboard.widget",is:"page",route:"/assignments/${id}/dashboard/classroom",layout:"dashboard-layout"},{name:"old-assignment-dashboard-participant",attrs:["id","participant-id"],vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/assignment-dashboard-participant.widget",is:"page",route:"/assignments/${assignmentId}/dashboard/participant/${participantId}",layout:"dashboard-layout"},{name:"old-assignment-dashboard-participant-page",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/assignments/dashboard/participant",is:"page",route:"/old-assignments/${assignmentId}/dashboard/participant/${participantId}",layout:"dashboard-layout"},{name:"dashboard-wall",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/dashboard-wall.widget",is:"page",route:"/assignments/${id}/wall",layout:"dashboard-layout"},{name:"ailearn-sessions-access",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/sessions/access.widget",is:"page",route:"/sessions/access/${id}",layout:"chat-layout"},{name:"ailearn-assignments-all-in-one",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/assignments/all-in-one.widget",is:"page",route:"/assignments/${assignmentId}/all-in-one/${id}",layout:"chat-layout"},{name:"ailearn-assignments-assessment",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/assignments/assessment.widget",is:"page",route:"/assignments/${assignmentId}/assessment/${id}",layout:"coins-layout"},{name:"ailearn-character-talk",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/assignments/character-talk.widget",is:"page",route:"/assignments/${assignmentId}/character-talk/${activityId}/chat/${chatId}",layout:"coins-layout"},{name:"ailearn-content-theory-page",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/assignments/content-theory.widget",is:"page",route:"/assignments/${assignmentId}/content-theory/${activityId}/chat/${chatId}",layout:"coins-layout"},{name:"ailearn-debate-activity-page",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/assignments/debate.widget",is:"page",route:"/assignments/${assignmentId}/debate/${activityId}/chat/${chatId}",layout:"coins-layout"},{name:"ailearn-assignments-spoken",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/assignments/spoken.widget",is:"page",route:"/assignments/${assignmentId}/spoken/${id}",layout:"coins-layout"},{name:"ailearn-assignments-coach-list",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/assignments/coach/list.widget",is:"page",route:"/assignments/${id}/coach/list",layout:"general-layout"},{name:"ailearn-assignments-student-list",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/assignments/student/list.widget",is:"page",route:"/assignments/${id}/student/list",layout:"general-layout"},{name:"ailearn-gclassroom-permissions",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/gclassroom-permissions.widget"},{name:"ailearn-assignment-view",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/assignment/view.widget",is:"page",route:"/assignments/${id}",layout:"coins-layout"},{name:"ailearn-gclassrooms-access",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/gclassroom/access.widget",is:"page",route:"/gclassroom/access",layout:"chat-layout"},{name:"app-classrooms-create",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/classrooms/create.widget",is:"page",route:"/classrooms/create",layout:"general-layout"},{name:"ailearn-gclassroom-explorer",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/gclassroom-explorer.widget"},{name:"ailearn-classroom-join",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/classrooms/join.widget",is:"page",route:"/classrooms/join",layout:"general-layout"},{name:"ailearn-classroom-list",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/classrooms/list.widget",is:"page",route:"/classrooms/list",layout:"general-layout"},{name:"app-classrooms-view",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/classrooms/view.widget",is:"page",route:"/classrooms/view/${id}",layout:"general-layout"},{name:"ailearn-modules-list",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/modules/list.widget",is:"page",route:"/modules/list",layout:"general-layout"},{name:"app-modules-management",attrs:["id","activityId"],vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/modules/management/settings.widget"},{name:"app-module-objective-management",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/modules/draft.widget",is:"page",route:"/modules/management",layout:"coins-layout"},{name:"app-organizations-create",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/organizations/create.widget",is:"page",route:"/organizations/create",layout:"general-layout"},{name:"ailearn-organization-join",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/organizations/join.widget",is:"page",route:"/organizations/join",layout:"general-layout"},{name:"ailearn-organizations-list",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/organizations/list.widget",is:"page",route:"/organizations/list",layout:"coins-layout"},{name:"app-organizations-view",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/organizations/view.widget",is:"page",route:"/organizations/view/${id}",layout:"general-layout"},{name:"ailearn-user-profile",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/user/profile.widget",is:"page",route:"/users/me",layout:"coins-layout"},{name:"ailearn-identify-page",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/identify.widget",is:"page",route:"/identify"},{name:"coins-layout",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/coins-layout.widget",is:"layout"},{name:"dashboard-layout",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/dashboard-layout.widget",is:"layout"},{name:"ailearn-empty-layout",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/layout/empty",is:"layout"},{name:"ailearn-layout",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/layout/main",is:"layout"},{name:"app-policies-page",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/pages/age.widget",is:"page",route:"/user-validation"},{name:"student-home",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/home.widget",is:"page",route:"/",layout:"general-layout"},{name:"app-missing",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/missing.widget"},{name:"app-missing-page",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/missing.widget",is:"page",route:"/not-found",layout:"general-layout"},{name:"ailearn-terms-and-conditions-page",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/pages/terms",is:"page",route:"/app/${page}"},{name:"app-template-bottom-bar",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/template/bottom-bar",is:"page",route:"/template/bottom-bar"},{name:"ailearn-template-tipography",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/template/typography",is:"page",route:"/template/typography",layout:"chat-layout"},{name:"ailearn-ui-components",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/ui/components",is:"page",route:"/ui/components",layout:"chat-layout"},{name:"app-test-components",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/test/blank",is:"page",route:"/tests/blank"},{name:"app-test-web-component",vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/test/web-component"}]),(w=[]).push([{module:{vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/core/routing"},type:"start"},function(e,a){return e.set("./handlers/home",{hash:3464692361,creator:function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.checkHome=async function({},e,a){return a()}}}),e.set("./handlers/policies",{hash:173192765,creator:function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.checkPolicies=async function({pathname:e},a,t){await n.sessionWrapper.isReady,await n.sessionWrapper.user.isReady;var{termsAccepted:i,age:s}=n.sessionWrapper.user;if(!r.includes(e)){if(!i&&17<s||!s)return{pathname:"/user-validation"};if("/user-validation"===e&&i&&17<s)return{pathname:"/"};if(a.previous){const e=a.previous;return a.previous=void 0,{pathname:e}}}return t()};var n=e("@aimpact/chat-sdk/session");const r=["/app/terms","/app/privacy"]}}),e.set("./handlers/session",{hash:320546719,creator:function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.checkSession=async function(e,a,t){var i=e["pathname"];if(await s.sessionWrapper.isReady,!s.sessionWrapper.logged&&n.PUBLIC_ROUTES.includes(i))return{pathname:i};if(s.sessionWrapper.logged&&n.AUTH_ROUTES.includes(i))return{pathname:"/"};if(!n.AUTH_ROUTES.includes(i)&&n.PUBLIC_ROUTES.includes(i)||s.sessionWrapper.logged)return t();return a.previous=e.uri,{pathname:r}};var s=e("@aimpact/chat-sdk/session"),t=e("@beyond-js/kernel/routing"),n=e("../public-routes");const r="/auth/login";s.sessionWrapper.on("logout",()=>{t.routing.replaceState({},"","/")})}}),e.set("./public-routes",{hash:2390301440,creator:function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.PUBLIC_ROUTES=a.AUTH_ROUTES=void 0;a.PUBLIC_ROUTES=["/auth/login","/auth/register","/auth/recovery","/auth/recover-password","/documents/access","/app/privacy","/app/terms","/reactive/testing"],a.AUTH_ROUTES=["/auth/login","/auth/register","/auth/recovery","/auth/recover-password"]}}),e.set("./router",{hash:4052659225,creator:function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.Router=void 0;a.Router=class{#isDefault;get isDefault(){return"/"===this.#pathname}#pathname;get pathname(){return this.#pathname}#data;get data(){return this.#data}#previous;get previous(){return this.#previous}set previous(e){e!==this.#previous&&(this.#previous=e)}#index;#handlers;constructor(e){if(!Array.isArray(e))throw new Error("handlers must be an array");e.forEach(e=>{if("function"!=typeof e)throw new Error("handlers must be an array of functions")}),this.#handlers=e}async process(e,a){return this.#handlers.length?await this.#handlers[e](a,this,async()=>e<this.#handlers.length-1?this.process(e+1,a):a.uri):a.uri}async validate(e){return this.#handlers.length?this.process(0,e):e.uri}}}}),e.set("./routing",{hash:3916314422,creator:function(e,a){var t=e("@beyond-js/kernel/routing"),i=e("./router"),s=e("./handlers/session"),n=e("./handlers/home"),e=e("./handlers/policies"),s=[s.checkSession,e.checkPolicies,n.checkHome];const r=new i.Router(s);t.routing.redirect=async function(e){try{return(await r.validate(e)).pathname}catch(e){return"/error-500"}},t.routing.missing=async function(){return"app-missing-page"}}}),{dependencies:["@aimpact/ailearn-app/model/wrapper","@aimpact/chat-sdk/session","@beyond-js/kernel/routing"]}}]),w.push([{module:{vspecifier:"@aimpact/ailearn-app@0.0.35.dev-01/initialize-app"},type:"start"},function(e,a){return e.set("./extensions",{hash:1592816002,creator:function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.registerExtensions=function(){var e=t.extensions.register.bind(t.extensions);e("app-menu-icon",()=>({type:"img",src:"/assets/favicon.png"}))};var t=e("@aimpact/chat/extensions")}}),e.set("./icons/profile",{hash:2038903291,creator:function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.ProfileIcon=void 0;var s=e("react"),n=e("pragmate-ui/icons"),r=e("@aimpact/chat-sdk/session"),o=e("pragmate-ui/image");a.ProfileIcon=({onClick:e})=>{const[a,t]=s.default.useState(!1);var i;if(r.sessionWrapper.user)return i=r.sessionWrapper.user.getProperties(),s.default.createElement("div",{className:"aside-item",onClick:e},a?s.default.createElement(n.Icon,{className:"lg",icon:"user"}):s.default.createElement(o.Image,{alt:"user image profile",src:i.photoURL,onError:()=>t(!0)}))}}}),e.set("./index",{hash:1018057204,creator:function(e,a){e=e("./startup");globalThis.localStorage?.setItem("chat.app.user.default.profile","/assets/rvd-profile-blue.png"),e.Startup.setup()}}),e.set("./startup",{hash:1329009314,creator:function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.Startup=void 0;var t=e("@beyond-js/reactive/model"),i=e("./extensions"),s=e("@beyond-js/widgets/render"),n=e("@aimpact/chat-sdk/initialize"),r=e("@aimpact/ailearn-app/model/gclassroom"),o=e("@aimpact/chat-sdk/session"),p=e("@aimpact/ailearn-sdk/core"),c=e("@aimpact/chat-sdk/settings");class l extends t.ReactiveModel{constructor(){super(),this.#start(),c.SDKSettings.userModel=p.User}#start=async()=>{var e=[(0,n.initDB)(),r.gclassroom.isReady,o.sessionWrapper.isReady];await Promise.all(e),this.checkMode(),(0,i.registerExtensions)()};checkMode(){var e=localStorage.getItem("aimpact.accessibility.mode")?localStorage.getItem("aimpact.accessibility.mode"):"normal",a=document.querySelector("html");a&&(a.setAttribute("data-accessibility-mode",e),s.widgets.attributes.add("data-accessibility-mode",e))}static setup(){new l}}a.Startup=l}}),a.descriptor=[{im:"./icons/profile",from:"ProfileIcon",name:"ProfileIcon"}],{dependencies:["@aimpact/chat/extensions","react","pragmate-ui/icons","@aimpact/chat-sdk/session","pragmate-ui/image","@beyond-js/reactive/model","@beyond-js/kernel/texts","@beyond-js/kernel/core","@beyond-js/widgets/render","@aimpact/chat-sdk/initialize","@aimpact/ailearn-app/model/gclassroom","@aimpact/ailearn-sdk/core","@aimpact/chat-sdk/settings"]}}]),f.initialise(w)}}});