System.register(["@beyond-js/widgets@1.1.0/render","@beyond-js/kernel@0.1.9/bundle","@beyond-js/kernel@0.1.9/styles","@beyond-js/react-18-widgets@1.1.2/page","@aimpact/ailearn-app@0.0.51.dev-04/main-layout.widget","@beyond-js/reactive@1.1.12/model","@beyond-js/kernel@0.1.9/texts","@aimpact/chat-sdk@1.0.1/session","react@18.2.0","@aimpact/ailearn-app@0.0.51.dev-04/components/ui","pragmate-ui@0.1.1/components","pragmate-ui@0.1.1/list","pragmate-ui@0.1.1/link","swiper@8.4.7","@beyond-js/react-18-widgets@1.1.2/hooks","@aimpact/ailearn-app@0.0.51.dev-04/modules/assign","pragmate-ui@0.1.1/image"],function(s,e){var t,a,r,n,i,l,o,c,m,d,u,f,p,h,g,v,_,y,E;return s({Controller:void 0,AssignmentItem:void 0,View:void 0,ModuleItem:void 0,UserCard:void 0}),{setters:[function(e){t=e},function(e){a=e},function(e){r=e},function(e){n=e},function(e){i=e},function(e){l=e},function(e){o=e},function(e){c=e},function(e){m=e},function(e){d=e},function(e){u=e},function(e){f=e},function(e){p=e},function(e){h=e},function(e){g=e},function(e){v=e},function(e){_=e}],execute:function(){E=a.Bundle,(y=new E({module:{vspecifier:"@aimpact/ailearn-app@0.0.51.dev-04/home",multibundle:!0},type:"widget"},e.meta.url).package()).dependencies.update([["@beyond-js/widgets/render",t],["@beyond-js/kernel/styles",r],["@beyond-js/react-18-widgets/page",n],["@aimpact/ailearn-app/main-layout.widget",i],["@beyond-js/reactive/model",l],["@beyond-js/kernel/texts",o],["@aimpact/chat-sdk/session",c],["react",m],["@aimpact/ailearn-app/components/ui",d],["pragmate-ui/components",u],["pragmate-ui/list",f],["pragmate-ui/link",p],["swiper",h],["@beyond-js/react-18-widgets/hooks",g],["@aimpact/ailearn-app/modules/assign",v],["pragmate-ui/image",_]]),brequire("@beyond-js/widgets/render").widgets.register([{name:"student-home",vspecifier:"@aimpact/ailearn-app@0.0.51.dev-04/home.widget",is:"page",route:"/",layout:"main-layout"}]),brequire("@beyond-js/kernel/styles").styles.register("@aimpact/ailearn-app@0.0.51.dev-04/home.widget"),(E=new Map).set("./controller",{hash:2165655111,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Controller=void 0;var a=e("@beyond-js/react-18-widgets/page"),s=e("./store"),r=e("./views"),n=e("@aimpact/ailearn-app/main-layout.widget");class i extends a.PageReactWidgetController{#store;hideTimeout=null;createStore(){return this.#store=new s.StoreManager,this.#store}get Widget(){return r.View}show(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null),n.LayoutBroker.overlay=!1,this.#store.load()}hide(){this.hideTimeout=setTimeout(()=>{this.#store.clear()},6e4)}}t.Controller=i}}),E.set("./store",{hash:570333705,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StoreManager=void 0;var a=e("@beyond-js/reactive/model"),s=e("@beyond-js/kernel/texts"),r=e("beyond_context"),n=e("@aimpact/chat-sdk/session"),i=e("@aimpact/ailearn-app/main-layout.widget");class l extends a.ReactiveModel{#model;get model(){return this.#model}get items(){return this.#model.assignments}#texts=new s.CurrentTexts(r.module.specifier);get texts(){return this.#texts?.value}#assignments;get assignments(){return this.#assignments}#drafts;get drafts(){return this.#drafts}#classrooms;get classrooms(){return this.#classrooms}#modules;get modules(){return this.#modules}get user(){return n.sessionWrapper.user}get isTeacher(){return this.user?.roles.includes("teacher")}get ready(){return super.ready&&this.#texts.ready}constructor(){super(),this.#texts.on("change",this.triggerEvent)}setBreadcrumb(){var e=this.setBreadcrumb.bind(this);this.#texts.ready?(this.#texts.off("change",e),i.LayoutBroker.breadcrumb=[],i.LayoutBroker.overlay=!1,globalThis.setTimeout(()=>i.LayoutBroker.breadcrumb=[],100)):this.#texts.on("change",e)}async load(){try{this.#model=n.sessionWrapper,this.setBreadcrumb();var{status:e,data:t}=await this.#model.user.getHome();e||console.log("error"),this.#drafts=t.drafts,this.#assignments=t.assignments,this.#classrooms=t.classrooms,this.#modules=t.modules,super.ready=!0,this.triggerEvent(),globalThis.store=this}catch(e){console.error(e)}}clear(){this.#drafts=[],this.#assignments=[],this.#classrooms=[],this.#modules=[],super.ready=!1,this.triggerEvent(),this.#model=void 0}}t.StoreManager=l}}),E.set("./views/aside/classrooms",{hash:3828492023,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AsideClassrooms=function(){let{store:e,texts:{classrooms:s}}=(0,n.useModuleContext)();var t,a;return e.isTeacher?(t=(a=(t=Array.isArray(e.classrooms)?e.classrooms:[]).length)?t.map(e=>{var t=(e.description&&""!==e.description?e:s.items).description,a=(e.name&&""!==e.name?e:s.items).name;return r.default.createElement(l.Link,{href:"/classrooms/view/"+e.id,className:"aside-list__item-container",key:e.id},r.default.createElement("article",{className:"aside-list__item",key:e.id},r.default.createElement(i.EntityImage,{ratio:"square",src:e.picture,entity:"module"}),r.default.createElement("section",{className:"item__content"},r.default.createElement("h6",null,a),r.default.createElement("p",{className:"description"},t))))}):r.default.createElement("div",{className:"aside-list__empty-container"},r.default.createElement("span",{className:"empty__list"},s.empty)),r.default.createElement("div",{className:a="aside-list"+(0===a?" aside-list--empty":"")},r.default.createElement("header",{className:"aside-list__header"},r.default.createElement("h5",null,s.title),r.default.createElement(l.Link,{href:"/classrooms/create"},s.action)),r.default.createElement("section",{className:"aside-list__body"},t))):null};var r=e("react"),n=e("../context"),i=e("@aimpact/ailearn-app/components/ui"),l=e("pragmate-ui/components")}}),E.set("./views/aside/drafts",{hash:975421195,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AsideDrafts=function(){let{store:e,texts:{drafts:s}}=(0,n.useModuleContext)();var t,a;return e.isTeacher?(t=(a=(t=Array.isArray(e.drafts)?e.drafts:[]).length)?t.map(e=>{var t=(e.description&&""!==e.description?e:s.items).description,a=(e.title&&""!==e.title?e:s.items).title;return r.default.createElement(l.Link,{href:"/modules/management?id="+e.id,className:"aside-list__item-container",key:e.id},r.default.createElement("article",{className:"aside-list__item",key:e.id},r.default.createElement(i.EntityImage,{ratio:"square",src:e.picture,entity:"module"}),r.default.createElement("section",{className:"item__content"},r.default.createElement("h6",null,a),r.default.createElement("p",{className:"description"},t))))}):r.default.createElement("div",{className:"aside-list__empty-container"},r.default.createElement("span",{className:"empty__list"},s.empty)),r.default.createElement("div",{className:a="aside-list"+(0===a?" aside-list--empty":"")},r.default.createElement("header",{className:"aside-list__header"},r.default.createElement("h5",null,s.title)),r.default.createElement("section",{className:"aside-list__body"},t))):null};var r=e("react"),n=e("../context"),i=e("@aimpact/ailearn-app/components/ui"),l=e("pragmate-ui/components")}}),E.set("./views/aside/index",{hash:488478691,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Aside=function(){return a.default.createElement("aside",{className:"home__aside"},a.default.createElement("div",{className:"sticky-container"},a.default.createElement(s.AsideDrafts,null),a.default.createElement(r.AsideClassrooms,null)))};var a=e("react"),s=e("./drafts"),r=e("./classrooms")}}),E.set("./views/assigments/index",{hash:3813091238,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Assignments=function(){var e,{assignments:t,texts:a}=(0,r.useModuleContext)().store;return t&&Array.isArray(t)&&t.length?(t=[...t],e=o.sessionWrapper?.user?.roles?.includes("teacher"),s.default.createElement("article",{className:"assigments-list"},s.default.createElement(c.PageTitle,{title:a.assignments.title,as:"h3"},e&&s.default.createElement("div",{className:"header__actions"},s.default.createElement(l.Link,{href:"/assignments"},a.actions.create))),s.default.createElement(n.List,{className:"entity__list two-columns",items:t,control:i.AssignmentItem}))):null};var s=e("react"),r=e("../context"),n=e("pragmate-ui/list"),i=e("./item"),l=e("pragmate-ui/link"),o=e("@aimpact/chat-sdk/session"),c=e("@aimpact/ailearn-app/components/ui")}}),E.set("./views/assigments/item",{hash:29682655,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AssignmentItem=function({item:e}){var t=(0,l.useModuleContext)().store["texts"],{module:a,title:s}=e;return i.default.createElement("article",{className:"entity__item"},i.default.createElement(r.EntityImage,{src:e.picture,entity:"module",alt:s}),i.default.createElement("section",{className:"entity__item-content"},i.default.createElement(n.Link,{href:"/assignments/"+e.id},i.default.createElement("h4",null,a.title),i.default.createElement("span",null,a.description))),i.default.createElement("footer",{className:"entity__footer"},i.default.createElement("span",{className:"card-number__detail"},t.assignments.activities,": ",a.activities.count)))};var r=e("@aimpact/ailearn-app/components/ui"),n=e("pragmate-ui/components"),i=e("react"),l=e("../context")}}),E.set("./views/context",{hash:2793963965,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.useModuleContext=t.ModuleContext=void 0;var a=e("react");let s=t.ModuleContext=a.default.createContext({});t.useModuleContext=()=>a.default.useContext(s)}}),E.set("./views/index",{hash:3925577069,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.View=function({store:e}){let[t,a]=(0,i.useState)(e.ready),s=e.texts;var r;return(0,l.useBinder)([e],()=>a(e.ready)),t?(r=e.model.assignments,r={store:e,fetching:e.fetching,texts:s,items:r},i.default.createElement(o.ModuleContext.Provider,{value:r},i.default.createElement(n.PageContainer,{className:"top-header"},i.default.createElement("div",{className:"grid-container columns-8-4"},i.default.createElement("main",null,i.default.createElement(m.UserCard,null),i.default.createElement(d.Assignments,null),i.default.createElement(f.Modules,null)),i.default.createElement(u.Aside,null))))):i.default.createElement(c.Spinner,{active:!0})};var n=e("@aimpact/ailearn-app/components/ui"),i=e("react"),l=e("@beyond-js/react-18-widgets/hooks"),o=e("./context"),c=e("pragmate-ui/components"),m=e("./sections/user-card"),d=e("./assigments"),u=e("./aside"),f=e("./modules")}}),E.set("./views/modules/actions",{hash:3747442826,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({module:e}){let t=(0,l.useModuleContext)().texts,[a,s]=r.useState(!1);return r.createElement("footer",{className:"entity__footer entity__footer--right"},r.createElement(n.Button,{variant:"primary",bordered:!0,onClick:e=>{e.stopPropagation(),s(!0)}},t.actions.assign),a&&r.createElement(i.ModuleAssignments,{module:e,onClose:()=>s(!a),texts:t.assign}))};var r=e("react"),n=e("pragmate-ui/components"),i=e("@aimpact/ailearn-app/modules/assign"),l=e("../context")}}),E.set("./views/modules/index",{hash:1915269594,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Modules=function(){var e,{modules:t,texts:a}=(0,r.useModuleContext)().store;return t&&Array.isArray(t)&&t.length?(t=[...t],e=o.sessionWrapper?.user?.roles?.includes("teacher"),s.default.createElement("article",{className:"assigments-list"},s.default.createElement(c.PageTitle,{title:a.modules.title,as:"h3"},e&&s.default.createElement("div",{className:"header__actions"},s.default.createElement(l.Link,{href:"/modules/management"},a.actions.create))),s.default.createElement(n.List,{className:"entity__list two-columns",items:t,control:i.ModuleItem}))):null};var s=e("react"),r=e("../context"),n=e("pragmate-ui/list"),i=e("./item"),l=e("pragmate-ui/link"),o=e("@aimpact/chat-sdk/session"),c=e("@aimpact/ailearn-app/components/ui")}}),E.set("./views/modules/item",{hash:457961184,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleItem=function({item:e}){var t=(0,i.useModuleContext)().store["texts"],a=e.title,s=e.owner??e.creator;return n.default.createElement("article",{className:"entity__item"},n.default.createElement(r.EntityImage,{src:e.picture,entity:"module",alt:a}),n.default.createElement("section",{className:"entity__item-content"},n.default.createElement(r.UserData,{data:s}),n.default.createElement("h4",null,e.title),n.default.createElement("span",null,e.description)),n.default.createElement("footer",{className:"entity__footer"},n.default.createElement("span",{className:"card-number__detail"},t.modules.activities,": ",e.activities.count)),n.default.createElement(l.default,{module:e}))};var r=e("@aimpact/ailearn-app/components/ui"),n=e("react"),i=e("../context"),l=e("./actions")}}),E.set("./views/sections/drafts",{hash:1845378313,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.UserCard=function(){var{user:e,texts:t}=(0,s.useModuleContext)().store;return a.default.createElement("section",{className:"user-profile"},a.default.createElement(r.Image,{className:"user-profile__img",src:e.photoURL,alt:"Profile Picture"}),a.default.createElement("div",{className:"user-profile__content"},a.default.createElement("div",{className:"content"},a.default.createElement("h6",null,e.displayName),a.default.createElement("span",{className:"p2"},e.email)),a.default.createElement("div",{className:"card__actions"},a.default.createElement("link",{href:"/me"},t.profile.edit))))};var a=e("react"),s=e("../context"),r=e("pragmate-ui/image")}}),E.set("./views/sections/modules",{hash:2211973510,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.UserCard=function(){var{user:e,texts:t}=(0,r.useModuleContext)().store;return s.default.createElement("section",{className:"user-profile"},s.default.createElement(a.Image,{className:"user-profile__img",src:e.photoURL,alt:"Profile Picture"}),s.default.createElement("div",{className:"user-profile__content"},s.default.createElement("div",{className:"content"},s.default.createElement("h3",null,e.displayName),s.default.createElement("span",{className:"p2"},e.email)),s.default.createElement("div",{className:"card__actions"},s.default.createElement("link",{href:"/me"},t.profile.edit))))};var a=e("pragmate-ui/image"),s=e("react"),r=e("../context")}}),E.set("./views/sections/user-card",{hash:3346926153,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.UserCard=function(){var{user:e,texts:t}=(0,s.useModuleContext)().store;return a.default.createElement("section",{className:"user-profile"},a.default.createElement(r.Image,{className:"user-profile__img",src:e.photoURL,alt:"Profile Picture"}),a.default.createElement("div",{className:"user-profile__content flex-container flex-space-between"},a.default.createElement("div",{className:"content"},a.default.createElement("h3",null,e.displayName),a.default.createElement("span",{className:"p2"},e.email)),a.default.createElement("div",{className:"card__actions"},a.default.createElement(n.Link,{href:"/users/me"},t.profile.edit))))};var a=e("react"),s=e("../context"),r=e("pragmate-ui/image"),n=e("pragmate-ui/link")}}),y.exports.descriptor=[{im:"./controller",from:"Controller",name:"Controller"},{im:"./views/assigments/item",from:"AssignmentItem",name:"AssignmentItem"},{im:"./views/index",from:"View",name:"View"},{im:"./views/modules/item",from:"ModuleItem",name:"ModuleItem"},{im:"./views/sections/drafts",from:"UserCard",name:"UserCard"},{im:"./views/sections/modules",from:"UserCard",name:"UserCard"},{im:"./views/sections/user-card",from:"UserCard",name:"UserCard"}],y.exports.process=function({require:e,prop:t,value:a}){!e&&"Controller"!==t||s("Controller",e?e("./controller").Controller:a),!e&&"AssignmentItem"!==t||s("AssignmentItem",e?e("./views/assigments/item").AssignmentItem:a),!e&&"View"!==t||s("View",e?e("./views/index").View:a),!e&&"ModuleItem"!==t||s("ModuleItem",e?e("./views/modules/item").ModuleItem:a),!e&&"UserCard"!==t||s("UserCard",e?e("./views/sections/drafts").UserCard:a),!e&&"UserCard"!==t||s("UserCard",e?e("./views/sections/modules").UserCard:a),!e&&"UserCard"!==t||s("UserCard",e?e("./views/sections/user-card").UserCard:a)},s("__beyond_pkg",y),s("hmr",new function(){this.on=(e,t)=>y.hmr.on(e,t),this.off=(e,t)=>y.hmr.off(e,t)}),y.initialise(E)}}});