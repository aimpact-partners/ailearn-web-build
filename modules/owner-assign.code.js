System.register(["@beyond-js/kernel@0.1.9/bundle","react@18.2.0","pragmate-ui@1.0.0-beta.6/modal","pragmate-ui@1.0.0-beta.6/list","@aimpact/chat-sdk@1.2.0/session","@aimpact/ailearn-app@0.1.6/components/ui","pragmate-ui@1.0.0-beta.6/components","pragmate-ui@1.0.0-beta.6/icons","@beyond-js/kernel@0.1.9/routing","@beyond-js/react-18-widgets@1.1.2/hooks","pragmate-ui@1.0.0-beta.6/form","pragmate-ui@1.0.0-beta.6/image","@aimpact/ailearn-sdk@1.0.0/learning-modules"],function(a,e){"use strict";var t,n,i,r,o,s,c,l,m,u,d,p,g,f,h;return a("OwnerAssignForm",void 0),{setters:[function(e){t=e},function(e){n=e},function(e){i=e},function(e){r=e},function(e){o=e},function(e){s=e},function(e){c=e},function(e){l=e},function(e){m=e},function(e){u=e},function(e){d=e},function(e){p=e},function(e){g=e}],execute:function(){h=t.Bundle,(f=new h({module:{vspecifier:"@aimpact/ailearn-app@0.1.6/modules/owner-assign",multibundle:!0},type:"code"},e.meta.url).package()).dependencies.update([["react",n],["pragmate-ui/modal",i],["pragmate-ui/list",r],["@aimpact/chat-sdk/session",o],["@aimpact/ailearn-app/components/ui",s],["pragmate-ui/components",c],["pragmate-ui/icons",l],["@beyond-js/kernel/routing",m],["@beyond-js/react-18-widgets/hooks",u],["pragmate-ui/form",d],["pragmate-ui/image",p],["@aimpact/ailearn-sdk/learning-modules",g]]),(h=new Map).set("./index",{hash:1197922382,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.OwnerAssignForm=function({item:t,onClose:e,type:n="module"}){const[a,i]=d.useState(),[r,o]=d.useState(),[s,c]=d.useState(!1),[l,m]=(0,b.useTexts)(k.module.specifier);var u;return l?d.createElement(p.Modal,{closeBackdrop:!(u=e=>{e.stopPropagation(),i(f.sessionWrapper.user)}),show:!0,onClose:e,className:"modal__assignment"},d.createElement("header",null,d.createElement("h3",null,m.title),d.createElement("span",null,m.description)),d.createElement(h.ErrorRenderer,{error:r}),d.createElement(_.Form,null,d.createElement("div",{className:"user-option",onClick:u},d.createElement(v.Image,{src:f.sessionWrapper.user.photoURL}),d.createElement("div",null,d.createElement("h6",{className:"user-data__label"},m.me.label),d.createElement("span",null,m.me.description)),d.createElement(h.RadioButton,{className:"radio-button",checked:a?.id===f.sessionWrapper.user.id,onChange:u}))),0<f.sessionWrapper.user.organizations.items.length?d.createElement(d.Fragment,null,d.createElement("section",{className:"organization-section"},d.createElement("h6",null,m.organization.label),d.createElement("span",null,m.organization.description)),d.createElement(g.List,{items:f.sessionWrapper.user.organizations.items,control:x.Item,className:"organization-list",specs:{selected:a,setSelected:i}})):d.createElement(d.Fragment,null),d.createElement("div",{className:"actions__container flex-container flex-end"},d.createElement(E.Button,{variant:"primary",disabled:!a,fetching:s,onClick:async()=>{try{var e;a&&(c(!0),(e=await("LearningModule"!==t.constructor.name?await w.LearningModule.get({id:t.id}):t).clone({moduleId:t.id,ownerId:a.id,entity:a.entity,type:n})).status||(console.log(e),o(m.errors.failed)),y.routing.pushState("/modules/management?id="+e.data.id))}catch(e){console.error(e),o(m.errors.failed)}finally{c(!1)}}},m.actions.continue))):d.createElement(h.ProcessContainer,{fetching:!0})};var d=e("react"),p=e("pragmate-ui/modal"),g=e("pragmate-ui/list"),f=e("@aimpact/chat-sdk/session"),h=e("@aimpact/ailearn-app/components/ui"),E=e("pragmate-ui/components"),y=e("@beyond-js/kernel/routing"),b=e("@beyond-js/react-18-widgets/hooks"),k=e("beyond_context"),_=e("pragmate-ui/form"),v=e("pragmate-ui/image"),w=e("@aimpact/ailearn-sdk/learning-modules"),x=e("./item")}}),h.set("./item",{hash:2722891650,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Item=void 0;var r=e("react"),o=e("@aimpact/ailearn-app/components/ui");t.Item=e=>{const{item:t,setSelected:n,selected:a}=e;var e=e=>{e.stopPropagation(),n(t)},i=a?.id===t.id?"list__item item__active":" list__item";return r.createElement("li",{"data-id":t.id,"data-entity":t.entity,className:i,onClick:e},r.createElement("div",{className:"item-body"},r.createElement(o.EntityImage,{src:t.picture,entity:"institution",alt:t.name}),r.createElement("span",null,t.name)),r.createElement(o.RadioButton,{checked:a?.id===t.id,onChange:e}))}}}),f.exports.descriptor=[{im:"./index",from:"OwnerAssignForm",name:"OwnerAssignForm"}],f.exports.process=function({require:e,prop:t,value:n}){!e&&"OwnerAssignForm"!==t||a("OwnerAssignForm",e?e("./index").OwnerAssignForm:n)},a("__beyond_pkg",f),a("hmr",new function(){this.on=(e,t)=>f.hmr.on(e,t),this.off=(e,t)=>f.hmr.off(e,t)}),f.initialise(h)}}});