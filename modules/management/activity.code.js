System.register(["@beyond-js/kernel@0.1.9/bundle","@beyond-js/kernel@0.1.9/styles","react@18.2.0","@aimpact/ailearn-app@0.1.6-dev.34/components/icons","pragmate-ui@1.0.0-beta.6/components","pragmate-ui@1.0.0-beta.6/icons","@aimpact/ailearn-app@0.1.6-dev.34/main-layout.widget","pragmate-ui@1.0.0-beta.6/modal","pragmate-ui@1.0.0-beta.6/form","@aimpact/ailearn-app@0.1.6-dev.34/components/ui","@beyond-js/kernel@0.1.9/routing","pragmate-ui@1.0.0-beta.6/form/react-select","@beyond-js/react-18-widgets@1.1.2/hooks","pragmate-ui@1.0.0-beta.6/list","@aimpact/chat-sdk@1.2.0/widgets/markdown","pragmate-ui@1.0.0-beta.6/tabs","pragmate-ui@1.0.0-beta.6/empty","pragmate-ui@1.0.0-beta.6/dynamic-list","@aimpact/ailearn-app@0.1.6-dev.34/modules/management/refinament.code","@beyond-js/kernel@0.1.9/core","pragmate-ui@1.0.0-beta.6/collapsible","framer-motion@10.18.0","@aimpact/ailearn-app@0.1.6-dev.34/components/ui/bullet-points-input","@aimpact/ailearn-app@0.1.6-dev.34/components/cover-image.code"],function(n,e){"use strict";var t,a,l,o,r,c,s,i,u,d,m,p,f,v,y,g,h,E,b,C,x,_,M,k,w,S;return n({AIButton:void 0,AIIconButton:void 0,ActivityHeader:void 0,ModuleActivityForm:void 0}),{setters:[function(e){t=e},function(e){a=e},function(e){l=e},function(e){o=e},function(e){r=e},function(e){c=e},function(e){s=e},function(e){i=e},function(e){u=e},function(e){d=e},function(e){m=e},function(e){p=e},function(e){f=e},function(e){v=e},function(e){y=e},function(e){g=e},function(e){h=e},function(e){E=e},function(e){b=e},function(e){C=e},function(e){x=e},function(e){_=e},function(e){M=e},function(e){k=e}],execute:function(){S=t.Bundle,(w=new S({module:{vspecifier:"@aimpact/ailearn-app@0.1.6-dev.34/modules/management/activity",multibundle:!0},type:"code"},e.meta.url).package()).dependencies.update([["@beyond-js/kernel/styles",a],["react",l],["@aimpact/ailearn-app/components/icons",o],["pragmate-ui/components",r],["pragmate-ui/icons",c],["@aimpact/ailearn-app/main-layout.widget",s],["pragmate-ui/modal",i],["pragmate-ui/form",u],["@aimpact/ailearn-app/components/ui",d],["@beyond-js/kernel/routing",m],["pragmate-ui/form/react-select",p],["@beyond-js/react-18-widgets/hooks",f],["pragmate-ui/list",v],["@aimpact/chat-sdk/widgets/markdown",y],["pragmate-ui/tabs",g],["pragmate-ui/empty",h],["pragmate-ui/dynamic-list",E],["@aimpact/ailearn-app/modules/management/refinament.code",b],["@beyond-js/kernel/core",C],["pragmate-ui/collapsible",x],["framer-motion",_],["@aimpact/ailearn-app/components/ui/bullet-points-input",M],["@aimpact/ailearn-app/components/cover-image.code",k]]),brequire("@beyond-js/kernel/styles").styles.register("@aimpact/ailearn-app@0.1.6-dev.34/modules/management/activity.code"),(S=new Map).set("./components/ai-button",{hash:2396306767,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AIButton=function({children:e,onClick:t,ensure:a=!0,...n}){return a=a?()=>s.LayoutBroker.ensureCredits(t):t,l.default.createElement(r.Button,{...n,icon:o.ICONS.aiStars,onClick:a},e)},t.AIIconButton=function({children:e,onClick:t,ensure:a=!0,...n}){return a=a?()=>s.LayoutBroker.ensureCredits(t):t,l.default.createElement(c.IconButton,{...n,icon:o.ICONS.aiStars,onClick:a},e)};var l=e("react"),o=e("@aimpact/ailearn-app/components/icons"),r=e("pragmate-ui/components"),c=e("pragmate-ui/icons"),s=e("@aimpact/ailearn-app/main-layout.widget")}}),S.set("./components/cancel-modal",{hash:1641415938,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CancelChangesModal=function({show:e,onClose:t}){const{store:a,texts:n,clearData:l}=(0,c.useModuleContext)();return!!e&&r.default.createElement(o.ConfirmModal,{show:!0,title:n.modal.cancel.title,text:n.modal.cancel.description,onClose:t,onCancel:t,btnConfirm:{label:n.actions.confirm},btnCancel:{label:n.actions.cancel},onConfirm:()=>{l(),a.editActivity=void 0,t()}})};var o=e("pragmate-ui/modal"),r=e("react"),c=e("../context")}}),S.set("./components/generation-modal/activity-modal",{hash:3897163173,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ActivitySuggestionsModal=function({show:e,type:a,onClose:n}){const{texts:t,activity:l,editData:o}=(0,v.useModuleContext)(),[r,c]=u.default.useState(!1),[s,i]=u.default.useState({observations:"",removeItems:!1,type:a});return!!e&&u.default.createElement(d.Modal,{closeBackdrop:!(e={onChange:e=>{i({...s,[e.currentTarget.name]:e.currentTarget.value})},onClick:async e=>{c(!0);var t=await l.generate(a,s.observations);o({...t,updated:!1}),n(),setTimeout(()=>c(!1),2e3)}}),show:!0,className:"refine-modal",onClose:n},u.default.createElement(m.Form,null,u.default.createElement("header",null,u.default.createElement("h3",null,t.refine.title),u.default.createElement("span",null,t.refine.description)),u.default.createElement(m.Textarea,{label:t.refine.textarea.label,name:"observations",value:s.observations,onChange:e.onChange,placeholder:t.refine.textarea.placeholder})),u.default.createElement("footer",{className:"flex-container flex-end mt-15"},u.default.createElement(f.AIButton,{variant:"primary",onClick:e.onClick},t.actions.generate)),u.default.createElement(p.ProcessContainer,{fetching:r}))};var u=e("react"),d=e("pragmate-ui/modal"),m=e("pragmate-ui/form"),p=e("@aimpact/ailearn-app/components/ui"),f=e("../ai-button"),v=e("../../context")}}),S.set("./components/generation-modal/breadcrumb",{hash:3386163319,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.BreadCrumbHeader=function(){const{store:e,texts:t,values:a}=(0,r.useModuleContext)(),[n,l]=o.default.useState(!1);return o.default.createElement("div",{className:"internal-breadcrumb "},o.default.createElement(c.Link,{className:"back-link",onClick:()=>{a.updated?l(!0):(e.editActivity=void 0,e.setBreadcrumb(),s.routing.back())}},o.default.createElement(i.Icon,{icon:"backArrow",className:"circle"}),o.default.createElement(u.AppIcon,{icon:"module"}),o.default.createElement("span",null,t.actions.back," ",t.activities.module)),n&&o.default.createElement(d.ConfirmModal,{onConfirm:()=>{l(!1),e.editActivity=void 0,e.setBreadcrumb(),s.routing.back()},onCancel:()=>l(!1)},o.default.createElement("div",null,t.manual.cancel)))};var o=e("react"),r=e("../../context"),c=e("pragmate-ui/components"),s=e("@beyond-js/kernel/routing"),i=e("pragmate-ui/icons"),u=e("@aimpact/ailearn-app/components/icons"),d=e("pragmate-ui/modal")}}),S.set("./components/generation-modal/materials",{hash:1256829720,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialsSuggestionsModal=function({type:t,onClose:a}){const{texts:e,activity:n,editData:l}=(0,v.useModuleContext)(),[o,r]=u.default.useState(!1),[c,s]=u.default.useState(""),i={onChange:e=>{s(e.currentTarget.value)},onClick:async e=>{r(!0),await n.materials.generate(t,c),l({materials:{...n.materials},specs:{...n.specs}}),a(),setTimeout(()=>{r(!1)},2e3)}};return u.default.createElement(d.Modal,{closeBackdrop:!1,show:!0,className:"refine-modal",onClose:a},u.default.createElement(m.Form,null,u.default.createElement("header",null,u.default.createElement("h3",null,e.refine.title),u.default.createElement("span",null,e.refine.description)),u.default.createElement(m.Textarea,{label:e.refine.textarea.label,name:"notes",value:c,onChange:i.onChange,placeholder:e.refine.textarea.placeholder})),u.default.createElement("footer",{className:"flex-container flex-end mt-15"},u.default.createElement(f.AIButton,{variant:"primary",onClick:i.onClick},e.actions.generate)),u.default.createElement(p.ProcessContainer,{fetching:o}))};var u=e("react"),d=e("pragmate-ui/modal"),m=e("pragmate-ui/form"),p=e("@aimpact/ailearn-app/components/ui"),f=e("../ai-button"),v=e("../../context")}}),S.set("./components/generation-modal/specs-modal",{hash:3045223981,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpecsSuggestionsModal=function({onClose:e,suggestionSpecs:o={}}){const{texts:r,activity:c,editData:s}=(0,g.useModuleContext)(),[t,i]=m.default.useState(!1),[u,a]=m.default.useState(""),[n,d]=m.default.useState(""),l={onChange:e=>{a(e.currentTarget.value)},onClick:async e=>{try{i(!0);var t,a=await c.specs.generate(u,{...o});a.error?(d(([n,l=[]]=[a.error,a.fields],n=r.errors?.[n]?n:"default",l.length?r.errors[n]+" "+l:r.errors[n])),i(!1)):(t=c.specs.getData(),s({specs:t}),setTimeout(()=>{i(!1)},1e3))}catch(e){console.error(99,e,e.message),d("default")}var n,l}};return m.default.createElement(p.Modal,{closeBackdrop:!1,show:!0,className:"refine-modal",onClose:e},m.default.createElement("header",null,m.default.createElement("h3",null,r.refine.title),m.default.createElement("span",null,r.refine.description)),m.default.createElement(f.Form,null,m.default.createElement(v.ErrorRenderer,{texts:r,error:n}),m.default.createElement(f.Textarea,{label:r.refine.textarea.label,name:"notes",value:u,onChange:l.onChange,placeholder:r.refine.textarea.placeholder})),m.default.createElement("footer",{className:"flex-container flex-end mt-15"},m.default.createElement(y.AIButton,{variant:"primary",onClick:l.onClick},r.actions.generate)),m.default.createElement(v.ProcessContainer,{fetching:t}))};var m=e("react"),p=e("pragmate-ui/modal"),f=e("pragmate-ui/form"),v=e("@aimpact/ailearn-app/components/ui"),y=e("../ai-button"),g=e("../../context")}}),S.set("./components/generation-modal/suggestions-modal",{hash:3036694819,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SuggestionModal=function({type:e,onClose:t}){const{texts:a,activity:n}=(0,f.useModuleContext)(),[l,o]=i.default.useState(!1),[r,c]=i.default.useState({observations:"",removeItems:!1,type:e}),s={onChange:e=>{c({...r,[e.currentTarget.name]:e.currentTarget.value})},onClick:async e=>{o(!0),await n.specs.generate(r.observations),t(),setTimeout(()=>{o(!1)},2e3)}};return i.default.createElement(u.Modal,{closeBackdrop:!1,show:!0,className:"refine-modal",onClose:t},i.default.createElement(d.Form,null,i.default.createElement("header",null,i.default.createElement("h3",null,a.refine.title),i.default.createElement("span",null,a.refine.description)),i.default.createElement(d.Textarea,{label:a.refine.textarea.label,name:"observations",value:r.observations,onChange:s.onChange,placeholder:a.refine.textarea.placeholder})),i.default.createElement("footer",{className:"flex-container flex-end mt-15"},i.default.createElement(p.AIButton,{variant:"primary",onClick:s.onClick},a.actions.generate)),i.default.createElement(m.ProcessContainer,{fetching:l}))};var i=e("react"),u=e("pragmate-ui/modal"),d=e("pragmate-ui/form"),m=e("@aimpact/ailearn-app/components/ui"),p=e("../ai-button"),f=e("../../context")}}),S.set("./components/select-activity",{hash:2971708945,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectActivity=function({values:t,setValues:e}){const{activity:a,store:n}=(0,s.useModuleContext)();let l={value:"",label:"Select"};const o=[];return n.model.activities.items.forEach(e=>{e.id!==a.id&&(e.id===t.specs.activityId&&(l={value:e.id,label:e.title}),o.push({value:e.id,label:e.title}))}),r.default.createElement("label",{htmlFor:"",className:"help-info"},"Is this activity based on another?",r.default.createElement(c.ReactSelect,{onChange:t=>{e(e=>({...e,specs:{...e.specs,activityId:t.target.value}}))},defaultValue:l,options:[l,...o]}))};var r=e("react"),c=e("pragmate-ui/form/react-select"),s=e("../context")}}),S.set("./context",{hash:1403361296,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.useModuleContext=t.ModuleContext=void 0;var a=e("react");const n=t.ModuleContext=a.default.createContext({});t.useModuleContext=()=>a.default.useContext(n)}}),S.set("./forms/character-talk/form",{hash:9897201,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterTalkManualForm=function({onCancel:e}){const t=(0,u.useModuleContext)().texts,{values:a,editData:n}=(0,u.useModuleContext)(),[l,o]=r.default.useState(!1);return r.default.createElement(r.default.Fragment,null,r.default.createElement(c.Form,null,r.default.createElement(c.Input,{onChange:e=>{var e=e.currentTarget,t={...a.specs};n({specs:{...t,[e.name]:e.value},updated:!0})},label:t.specs.role.label,placeholder:t.specs.role.placeholder,name:"role"}),r.default.createElement("footer",{className:"section-actions__container actions-end border-top"},r.default.createElement(s.Button,{onClick:()=>{a.updated?o(!0):e()},variant:"primary",bordered:!0},t.actions.cancel),r.default.createElement(d.SaveButton,{callback:e})),l&&r.default.createElement(i.ConfirmModal,{onConfirm:()=>{o(!1),e()},onCancel:()=>o(!1)},r.default.createElement("div",null,t.manual.cancel))))};var r=e("react"),c=e("pragmate-ui/form"),s=e("pragmate-ui/components"),i=e("pragmate-ui/modal"),u=e("../../context"),d=e("../../save-button")}}),S.set("./forms/character-talk/index",{hash:3341164438,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterTalkForm=function(){const{activity:t,editData:a,values:e}=(0,s.useModuleContext)(),[n,l]=o.default.useState(!1);return(0,i.useBinder)([t.specs],()=>{var e=t.specs.getData();a({specs:e})},"specs.generated"),n?o.default.createElement(u.CharacterTalkManualForm,{onCancel:()=>l(!1)}):e.specs.role?o.default.createElement(o.default.Fragment,null,o.default.createElement(c.ActivityBaseSpec,{name:"role"})):o.default.createElement(r.EmptySpecs,{name:"character-talk",onManual:()=>l(!0)})};var o=e("react"),r=e("../../specs/empty"),c=e("../../specs/base-spec"),s=e("../../context"),i=e("@beyond-js/react-18-widgets/hooks"),u=e("./form")}}),S.set("./forms/content-theory/audio",{hash:955093853,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ContentTheoryAudio=function({}){const{activity:e,texts:t}=(0,d.useModuleContext)(),[a,n]=i.default.useState(!1),[l,o]=i.default.useState(e.materials.fetching),[r,c]=i.default.useState(e.materials.audios);var s;return(0,m.useBinder)([e.materials],()=>{n(!1)}),a?i.default.createElement(u.ManualMaterialForm,{name:"article",onCancel:()=>n(!1)}):r?(s=Object.keys(r),i.default.createElement(i.default.Fragment,null,i.default.createElement(f.List,{className:"list-unstyled",items:s,control:({item:e})=>{return(0,d.useModuleContext)().activity.materials.audios[e]?.url?i.default.createElement("div",{className:"activity__audio"},i.default.createElement("h5",null,t.materials[e]),i.default.createElement(p.AudioPlayer,{url:r[e].url})):null},container:"div"}))):i.default.createElement(i.default.Fragment,null,i.default.createElement(p.EmptyCard,{className:"activity--empty",text:t.activities.empty.title,description:t.activities.empty.description},i.default.createElement("div",{className:"activity__actions"},i.default.createElement(v.AIButton,{onClick:async()=>{try{o(!0),await e.materials.generateAudio(),c(e.materials.audios)}catch(e){console.log(e)}finally{o(!1)}},variant:"primary"},t.actions.generate)),i.default.createElement(p.ProcessContainer,{fetching:l})))};var i=e("react"),u=e("./manual"),d=e("../../context"),m=e("@beyond-js/react-18-widgets/hooks"),p=e("@aimpact/ailearn-app/components/ui"),f=e("pragmate-ui/list"),v=e("../../components/ai-button")}}),S.set("./forms/content-theory/content",{hash:2186283171,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ContentTheoryContent=function(){const{activity:e,texts:t}=(0,s.useModuleContext)(),[a,n]=r.default.useState(!1),l=()=>n(!0);return(0,d.useBinder)([e.materials],()=>{n(!1)}),a?r.default.createElement(c.ManualMaterialForm,{name:"article",onCancel:()=>n(!1)}):e.materials.article?r.default.createElement(r.default.Fragment,null,r.default.createElement("section",{className:"material__content"},r.default.createElement(i.Markdown,{content:e.materials.article})),r.default.createElement("div",{className:"mt-30 activity-specs-actions flex-container flex-end material__actions"},r.default.createElement(o.Button,{icon:"edit",onClick:l,variant:"primary",bordered:!0},t.actions.edit))):r.default.createElement(u.EmptyMaterial,{name:"article",onManual:l})};var o=e("pragmate-ui/components"),r=e("react"),c=e("./manual"),s=e("../../context"),i=e("@aimpact/chat-sdk/widgets/markdown"),u=e("./empty-material"),d=e("@beyond-js/react-18-widgets/hooks")}}),S.set("./forms/content-theory/empty-material",{hash:1415701636,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyMaterial=function({name:e,onManual:t}){const{activity:a,texts:n}=(0,f.useModuleContext)(),[l,o]=d.default.useState(!1),[r,c]=d.default.useState(a.materials.fetching),[,s]=d.default.useState(a.materials[e]),i=()=>o(!l),u=((0,y.useBinder)([a.materials],()=>{c(a.materials.fetching),s(a.materials[e])}),{disabled:!a.aiCompleted});return d.default.createElement(d.default.Fragment,null,d.default.createElement(m.EmptyCard,{className:"activity--empty",text:n.activities.empty.title,description:n.activities.empty.description},d.default.createElement("div",{className:"activity__actions"},d.default.createElement(v.Button,{variant:"primary",bordered:!0,onClick:t},n.actions.manual),d.default.createElement(p.AIButton,{onClick:i,variant:"primary",...u},n.actions.generate)),d.default.createElement(m.ProcessContainer,{fetching:r})),l&&d.default.createElement(g.MaterialsSuggestionsModal,{type:e,onClose:i}))};var d=e("react"),m=e("@aimpact/ailearn-app/components/ui"),p=e("../../components/ai-button"),f=e("../../context"),v=e("pragmate-ui/components"),y=e("@beyond-js/react-18-widgets/hooks"),g=e("../../components/generation-modal/materials")}}),S.set("./forms/content-theory/index",{hash:1015243611,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ContentTheoryForm=function(){const{activity:n,texts:l}=(0,u.useModuleContext)(),[,e]=i.default.useState(n.materials.fetching),[,t]=i.default.useState(n.materials.article),[a,o]=i.default.useState(!1),[,,]=i.default.useState(!1),r=()=>o(!a),c=[],s=((0,d.useBinder)([n.materials],()=>{e(n.materials.fetching),t({materials:n.materials.getData(),updated:!0})}),n.materials.items.forEach(e=>{var t="string"==typeof e?e:e.name,a=l.materials[t],e={disabled:!!e?.dependencies&&("string"==typeof e?.dependencies?!n.materials[e.dependencies]:e.dependencies.some(e=>!n.materials[e]))};c.push(i.default.createElement(p.Tab,{...e,key:n.id+`.${t}-tab`},a))}),{onClick:r,disabled:n.specs.empty&&n.materials.empty});return i.default.createElement(i.default.Fragment,null,i.default.createElement("header",{className:"activity__section-header"},i.default.createElement("h5",null,l.specs.title),i.default.createElement("div",{className:"actions flex-container flex-05"},i.default.createElement(y.Button,{variant:"link",...s,icon:"delete"},l.actions.delete))),i.default.createElement(p.TabsContainer,{active:0,className:"content-theory__tabs ",onChange:()=>{}},i.default.createElement(p.Tabs,null,c),i.default.createElement(p.Panes,{className:""},i.default.createElement(m.ContentTheoryContent,null),i.default.createElement(f.MaterialPane,{name:"synthesis"}),i.default.createElement(f.MaterialPane,{name:"dyslexia"}),i.default.createElement(v.ContentTheoryAudio,null))),i.default.createElement(g.DeleteActivityData,{show:a,onClose:r}))};var i=e("react"),u=e("../../context"),d=e("@beyond-js/react-18-widgets/hooks"),m=e("./content"),p=e("pragmate-ui/tabs"),f=e("../materials/pane"),v=e("./audio"),y=e("pragmate-ui/components"),g=e("../delete-modal")}}),S.set("./forms/content-theory/manual",{hash:1132675609,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ManualMaterialForm=function({name:a,onCancel:t}){const{values:n,editData:l,activity:o,texts:e}=(0,d.useModuleContext)(),[r,c]=i.default.useState(!1);return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:"material__content"},i.default.createElement(u.Textarea,{onChange:e=>{var e=e.currentTarget,t={...n.materials};console,l({materials:{...t,[a]:e.value},updated:!0})},name:"content",value:n.materials?.[a]??"",placeholder:e.manual.textarea})),i.default.createElement("footer",{className:"section-actions__container actions-end"},i.default.createElement(s.Button,{onClick:()=>{n.updated?c(!0):t()},variant:"primary",bordered:!0},e.actions.cancel),i.default.createElement(p.SaveButton,{callback:()=>{l({updated:!1})}})),r&&i.default.createElement(m.ConfirmModal,{onConfirm:()=>{var e={...n.materials};l({materials:{...e,[a]:o.materials[a]},updated:!1}),c(!1),t()},onCancel:()=>c(!1)},i.default.createElement("div",null,e.manual.cancel)))};var s=e("pragmate-ui/components"),i=e("react"),u=e("pragmate-ui/form"),d=e("../../context"),m=e("pragmate-ui/modal"),p=e("../../save-button")}}),S.set("./forms/debate/form",{hash:1183129835,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ManualDebateForm=function({onCancel:e}){const t=(0,d.useModuleContext)().texts,{values:a,editData:n}=(0,d.useModuleContext)(),[l,o]=c.default.useState(!1),r=a.updated?"Cancel":"Back";return c.default.createElement(c.default.Fragment,null,c.default.createElement(s.Form,null,c.default.createElement(s.Textarea,{onChange:e=>{var e=e.currentTarget,t={...a.specs};n({updated:!0,specs:{...t,[e.name]:e.value}})},value:a.specs.subject,label:t.specs.subject.label,placeholder:t.specs.subject.placeholder,name:"subject"}),c.default.createElement("footer",{className:"section-actions__container actions-end border-top"},c.default.createElement(i.Button,{onClick:()=>{a.updated?o(!0):e()},variant:"primary",bordered:!0},r),c.default.createElement(m.SaveButton,{callback:e})),l&&c.default.createElement(u.ConfirmModal,{onConfirm:()=>{o(!1),e()},onCancel:()=>o(!1)},c.default.createElement("div",null,t.manual.cancel))))};var c=e("react"),s=e("pragmate-ui/form"),i=e("pragmate-ui/components"),u=e("pragmate-ui/modal"),d=e("../../context"),m=e("../../save-button")}}),S.set("./forms/debate/index",{hash:702768284,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DebateForm=function(){const{activity:e,editData:t,values:a}=(0,s.useModuleContext)(),[n,l]=r.default.useState(!1),o=((0,i.useBinder)([e.specs],()=>t(e.getData()),"specs.generated"),()=>l(!n));return n?r.default.createElement(u.ManualDebateForm,{onCancel:o}):a.specs.subject?r.default.createElement(d.ActivityBaseSpec,{name:"subject"}):r.default.createElement(c.EmptySpecs,{name:"debate",onManual:o})};var r=e("react"),c=e("../../specs/empty"),s=e("../../context"),i=e("@beyond-js/react-18-widgets/hooks"),u=e("./form"),d=e("../../specs/base-spec")}}),S.set("./forms/delete-modal",{hash:3351610770,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteActivityData=function({show:e,onClose:t}){const[,a]=s.default.useState(!1),{texts:{activities:n,actions:l},activity:o,editData:r}=(0,i.useModuleContext)();return e?s.default.createElement(s.default.Fragment,null,s.default.createElement(c.ConfirmModal,{show:!0,onClose:t,onConfirm:e=async()=>{try{a(!0),t(),await o.clearContent();var e={specs:o.specs.getData(),materials:o.materials.getData(),updated:!1};r(e)}catch(e){console.error(e)}finally{a(!1)}},btnConfirm:{label:l.confirm},btnCancel:{label:l.cancel},onCancel:t},s.default.createElement("h3",null,n.deleteModal.title),s.default.createElement("p",null,n.deleteModal.description))):null};var c=e("pragmate-ui/modal"),s=e("react"),i=e("../context")}}),S.set("./forms/index",{hash:1794692111,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityBaseForm=function({type:e}){const{activity:t,texts:a}=(0,v.useModuleContext)(),[n,l]=i.default.useState(!1),[o,r]=i.default.useState(!1);var c,s;return"multiple-choice"===e?i.default.createElement(p.MultipleChoiceForm,null):"spoken"===e?i.default.createElement(f.SpokenForm,null):"content-theory"===e?i.default.createElement(d.ContentTheoryForm,null):((c={debate:m.DebateForm,"character-talk":u.CharacterTalkForm})[e]||console.error("No form for type",e,c),c=c[e],s={onClick:e=()=>l(!n),disabled:t.specs.empty&&t.materials.empty},i.default.createElement(i.default.Fragment,null,i.default.createElement("header",{className:"activity__section-header"},i.default.createElement("h5",null,a.specs.title),i.default.createElement("div",{className:"actions flex-container flex-05"},i.default.createElement(y.Button,{variant:"link",...s,icon:"delete"},a.actions.delete))),i.default.createElement(c,{edition:o,toggleEdition:()=>r(!o)}),i.default.createElement(g.DeleteActivityData,{show:n,onClose:e})))};var i=e("react"),u=e("./character-talk"),d=e("./content-theory"),m=e("./debate"),p=e("./multiple-choice"),f=e("./spoken"),v=e("../context"),y=e("pragmate-ui/components"),g=e("./delete-modal")}}),S.set("./forms/language",{hash:472773709,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageField=function(){const{texts:t,store:a,activity:n}=(0,s.useModuleContext)(),[,l]=(t.languages.select.placeholder,r.default.useState(n.language)),e=["en","es"].map(e=>({value:e,label:t.languages[e]})),o={isDisabled:a.saved};return r.default.createElement(r.default.Fragment,null,r.default.createElement("label",{htmlFor:""},t.languages.select.label),r.default.createElement(c.ReactSelect,{value:n.language,name:"audience",options:e,onChange:async e=>{l(e.currentTarget.value),await n.set({language:e.currentTarget.value}),await a.save()},...o}))};var r=e("react"),c=e("pragmate-ui/form/react-select"),s=e("../context")}}),S.set("./forms/materials/manual-material-form",{hash:2471684898,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ManualMaterialForm=function({name:a,onCancel:t}){const{values:n,editData:l,activity:o,texts:e}=(0,d.useModuleContext)(),[r,c]=i.default.useState(!1);return i.default.createElement("div",null,i.default.createElement(u.Textarea,{onChange:e=>{var e=e.currentTarget,t={...n.materials};l({materials:{...t,[a]:e.value},updated:!0})},name:a,value:n.materials?.[a]??"",placeholder:e.manual[a].textarea}),i.default.createElement("footer",{className:"section-actions__container actions-end"},i.default.createElement(s.Button,{onClick:()=>{n.updated?c(!0):t()},variant:"primary",bordered:!0},e.actions.cancel),i.default.createElement(p.SaveButton,{callback:()=>{l({updated:!1}),t()}})),r&&i.default.createElement(m.ConfirmModal,{onConfirm:()=>{var e={...n.materials};l({materials:{...e,[a]:o.materials[a]}}),c(!1),t()},onCancel:()=>c(!1)},i.default.createElement("div",null,e.manual.cancel)))};var s=e("pragmate-ui/components"),i=e("react"),u=e("pragmate-ui/form"),d=e("../../context"),m=e("pragmate-ui/modal"),p=e("../../save-button")}}),S.set("./forms/materials/pane",{hash:3959656546,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialPane=function({name:e}){const{activity:t,texts:a}=(0,d.useModuleContext)(),[n,l]=s.default.useState(!1),[o,r]=s.default.useState(t.materials[e]),c=()=>l(!n);return(0,u.useBinder)([t.materials],()=>r(t.materials[e])),n?s.default.createElement(f.ManualMaterialForm,{name:e,onCancel:c}):o?s.default.createElement(v.AnimatedContainer,null,s.default.createElement("section",{className:"material__content"},s.default.createElement(i.Markdown,{content:o})),s.default.createElement("div",{className:"mt-30 activity-specs-actions flex-container flex-end material__actions"},s.default.createElement(m.Button,{icon:"edit",onClick:()=>l(!0),variant:"primary",bordered:!0},a.actions.edit))):s.default.createElement(p.EmptyMaterial,{name:e,onManual:c})};var s=e("react"),i=e("@aimpact/chat-sdk/widgets/markdown"),u=e("@beyond-js/react-18-widgets/hooks"),d=e("../../context"),m=e("pragmate-ui/components"),p=e("../content-theory/empty-material"),f=e("./manual-material-form"),v=e("@aimpact/ailearn-app/components/ui")}}),S.set("./forms/multiple-choice/body/empty",{hash:497491262,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyActivity=function({openManual:e}){const{activity:t,store:a}=(0,c.useModuleContext)(),[n,l]=(0,r.useState)(),o=(0,r.useMemo)(()=>{if(void 0!==t.specs.related)return a.model.activities.items[t.specs.related]?.id},[t.specs.related,a.model.activities.items]);return r.default.createElement(r.default.Fragment,null,r.default.createElement(i.RelatedActivityField,{related:o,setError:l,error:n}),r.default.createElement(s.EmptySpecs,{name:"multiple-choice",onManual:e,disabled:!!n,suggestionSpecs:{related:o}}))};var r=e("react"),c=e("../../../context"),s=e("../../../specs/empty"),i=e("../related-activity")}}),S.set("./forms/multiple-choice/body/form/harcoded-questions",{hash:1328673946,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.HARCODED_QUESTIONS=void 0,t.HARCODED_QUESTIONS=[{question:"¿Qué es JavaScript?",options:["Un lenguaje de marcado.","Un lenguaje de programación.","Un sistema operativo.","Una base de datos."],correct_answer:1},{question:"¿Dónde se puede ejecutar JavaScript?",options:["En el navegador web.","En el servidor.","En una aplicación de escritorio.","Todas las anteriores."],correct_answer:3},{question:"¿Qué método se utiliza para imprimir mensajes en la consola del navegador?",options:["alert()","console.log()","document.write()","print()"],correct_answer:1},{question:"¿Cuál es la forma correcta de declarar una variable en JavaScript?",options:["variable x = 5;","var x = 5;","v x = 5;","int x = 5;"],correct_answer:1},{question:"¿Cuál de las siguientes es una estructura de control en JavaScript?",options:["for","execute","repeat","function"],correct_answer:0}]}}),S.set("./forms/multiple-choice/body/form/index",{hash:714486323,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MultipleChoiceForm=function({}){const{activity:e,editData:t}=(0,n.useModuleContext)();return a.default.createElement(a.default.Fragment,null,a.default.createElement(l.ManualForm,{onCancel:()=>{t({specs:e.specs.getData()})}}))};var a=e("react"),n=e("../../../../context"),l=e("./manual")}}),S.set("./forms/multiple-choice/body/form/manual",{hash:2777116014,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ManualForm=function({onCancel:t}){const{values:n,texts:e,editData:l,store:o,activity:r}=(0,u.useModuleContext)(),[a,c]=i.default.useState([]),s=i.default.useRef(null);return i.default.useEffect(()=>{a.length&&s.current.querySelectorAll(".dynamic-question-item__container").forEach((e,t)=>{a.includes(t)&&(e.classList.add("question--error"),e.addEventListener("focusin",()=>{e.classList.remove("question--error")}),globalThis.scrollTo({top:0,behavior:"smooth"}))})},[a]),i.default.createElement(i.default.Fragment,null,i.default.createElement(f.ErrorRenderer,{error:a.length?e.errors.wrongQuestions:""}),i.default.createElement("section",{ref:s,className:"activity__form activity__materials-form"},i.default.createElement(p.DynamicQuestionsForm,null),i.default.createElement("footer",{className:"section-actions__container border-top actions-end"},i.default.createElement(d.Button,{variant:"primary",bordered:!0,onClick:t},e.actions.cancel),i.default.createElement(m.SaveButton,{saved:!0,callback:async()=>{var e=n.specs.questions;const a=[];e.forEach((e,t)=>{(!e?.question||!e?.options.length||isNaN(e?.correctAnswer)||0<e.options.filter(e=>""===e.value).length)&&a.push(t)}),a.length?c(a):(l({updated:!1}),await o.model.activities.map.get(r.id).set(n),await r.set(n),o.save(),t())}}))))};var i=e("react"),u=e("../../../../context"),d=e("pragmate-ui/components"),m=e("../../../../save-button"),p=e("./questions"),f=e("@aimpact/ailearn-app/components/ui")}}),S.set("./forms/multiple-choice/body/form/questions/actions",{hash:3692925222,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicActions=function(){var e=(0,o.useModuleContext)().texts.multipleChoice.actions,t=(0,n.useDynamicListContext)().addItem;return a.default.createElement("section",{className:"section-actions__container actions-end no-m no-p stretch"},a.default.createElement(l.Button,{variant:"link",onClick:t},e.addQuestion))};var a=e("react"),n=e("pragmate-ui/dynamic-list"),l=e("pragmate-ui/components"),o=e("../../../../../context")}}),S.set("./forms/multiple-choice/body/form/questions/answers/footer",{hash:4211204766,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicAnswersFooter=function({disabled:e,onAdd:t,showed:a}){const n=(0,c.useModuleContext)().texts["multipleChoice"],l=(0,s.useDynamicListContext)().addItem;return o.default.createElement("section",{className:"flex-container flex-end"},o.default.createElement(r.Button,{title:n.actions.addAnswer,onClick:e=>{if(!a)return t(!0);l()},disabled:e},n.actions.addAnswer))};var o=e("react"),r=e("pragmate-ui/components"),c=e("../../../../../../context"),s=e("pragmate-ui/dynamic-list")}}),S.set("./forms/multiple-choice/body/form/questions/answers/index",{hash:1104551707,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicAnswersForm=function({fetching:e,show:t,answers:a,onChange:n,disabled:l}){var[o,r]=c.default.useState(!1);return e?c.default.createElement("div",null,c.default.createElement(d.Spinner,{active:!0,variant:"primary"})):c.default.createElement(s.Provider,{name:"question-answers",className:"answer-questions-form__container",value:a,Item:i.DynamicQuestionAnswerItem,onChange:n},(t||o)&&c.default.createElement(s.List,{className:"dynamic-form"}),c.default.createElement(u.DynamicAnswersFooter,{showed:t||o,disabled:l,onAdd:r}))};var c=e("react"),s=e("pragmate-ui/dynamic-list"),i=e("./item"),u=e("./footer"),d=e("pragmate-ui/components")}}),S.set("./forms/multiple-choice/body/form/questions/answers/item",{hash:569073849,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicQuestionAnswerItem=function(a){const e=(0,m.useInput)(a.index).onKeyDown,{correct:n,value:t=""}=a.value,{values:l,setValues:o,removeItem:r}=(0,f.useDynamicListContext)(),c=(0,p.useModuleContext)().texts["multipleChoice"],s="dynamic__icon selectable"+(n?" dynamic__icon--correct":"");return i.default.createElement("div",{className:"dynamic-field__item dynamic-field__item--answer"},i.default.createElement("div",{className:"drag-icon"},a.index+1,"."),i.default.createElement(u.Input,{type:"text",value:t,onKeyDown:e,onChange:e=>{a.setValue({value:e.target.value,correct:!!n})},placeholder:c.answers.placeholder}),i.default.createElement("section",{className:"item__actions"},i.default.createElement(d.IconButton,{icon:"circle-check",className:s,title:c.actions.markCorrect,onClick:e=>{o(l.map((e,t)=>t===a.index?{...e,correct:!n}:{...e,correct:!1}))}}),i.default.createElement(d.IconButton,{icon:"delete",className:"drag-bullet-point",title:c.actions.delete,onClick:()=>r(a.index)})))};var i=e("react"),u=e("pragmate-ui/form"),d=e("pragmate-ui/icons"),m=e("../hooks/use-input"),p=e("../../../../../../context"),f=e("pragmate-ui/dynamic-list")}}),S.set("./forms/multiple-choice/body/form/questions/header",{hash:3894635481,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicHeader=function(){const{activity:a,texts:e,values:n,editData:l,store:t}=(0,p.useModuleContext)(),o=(0,f.useDynamicListContext)().specs;var r=e.multipleChoice.actions;const[c,s]=u.default.useState(!1),i=()=>s(!c);return u.default.createElement("section",{className:"section-actions__container actions-end border-bottom"},u.default.createElement(m.AIButton,{variant:"link",onClick:i},r.generateQuestions),u.default.createElement(d.RefinementModal,{show:c,owner:t.model.owner,credits:t.model.credits,onConsume:t.model.consumeCoins,onClose:i,globalTexts:t.globalTexts,title:e.multipleChoice.modalQuestions.title,descripction:e.multipleChoice.modalQuestions.description,onGenerate:async({notes:e})=>{const t=(await a.specs.generate(e,{related:n.specs.related})).questions.map(({question:e,options:t,correct_answer:a})=>({question:e,options:t,correctAnswer:a}));o.setFetching(!0),globalThis.setTimeout(()=>{o.setFetching(!1),l({specs:{...n.specs,questions:[...n.specs.questions,...t]},updated:!0})},1e3)}}))};var u=e("react"),d=e("@aimpact/ailearn-app/modules/management/refinament.code"),m=e("@aimpact/ailearn-app/components/ui"),p=e("../../../../../context"),f=e("pragmate-ui/dynamic-list")}}),S.set("./forms/multiple-choice/body/form/questions/hooks/use-input",{hash:4293506373,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.useInput=function(a){const{addItem:n,refs:t,removeItem:l,items:o}=(0,c.useDynamicListContext)(),r=e=>{globalThis.setTimeout(()=>t.current[e]?.querySelector("input").focus(),0)};return{onKeyDown:e=>{var t=e.currentTarget.value.trim();if("Tab"===e.key){if(e.shiftKey&&0<a)return t||l(a),r(a-1),void e.preventDefault();if(a<o.length-1)return void r(a+1);if(e.preventDefault(),!t)return;n(),globalThis.setTimeout(()=>{r(a+1)},0)}"Backspace"!==e.key||t||(e.preventDefault(),e.shiftKey&&0<a?(t||(l(a),r(a-2)),e.preventDefault()):0<a&&l(a))}}};var c=e("pragmate-ui/dynamic-list")}}),S.set("./forms/multiple-choice/body/form/questions/index",{hash:2125261280,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicQuestionsForm=function(){const{values:t,editData:a}=(0,s.useModuleContext)(),[e,n]=l.default.useState(!1);return e?l.default.createElement("div",null,l.default.createElement(u.Spinner,{active:!0,variant:"primary"})):l.default.createElement(o.Provider,{name:"questions",defaultValue:{question:""},draggable:!0,Item:r.DynamicQuestionItem,value:t.specs.questions,onChange:({currentTarget:e})=>{e=e.value.map(e=>({question:e.question,options:e.options,correctAnswer:e.correctAnswer})),e={...t.specs,questions:[...e]};a({specs:{...e},updated:!0})},specs:{setFetching:n}},l.default.createElement(i.DynamicHeader,null),l.default.createElement(o.List,{className:"dynamic-form dynamic-questions-form"}),l.default.createElement(c.DynamicActions,null))};var l=e("react"),o=e("pragmate-ui/dynamic-list"),r=e("./question"),c=e("./actions"),s=e("../../../../../context"),i=e("./header"),u=e("pragmate-ui/components")}}),S.set("./forms/multiple-choice/body/form/questions/question",{hash:3096915448,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicQuestionItem=function(n){const e=(0,k.useInput)(n.index).onKeyDown,{activity:l,values:o,editData:r,store:t}=(0,w.useModuleContext)(),a=(0,w.useModuleContext)().texts["multipleChoice"],[c,s]=C.default.useState(!1),i=()=>s(!c),u=e=>{const a=n.value.correctAnswer;return e.map((e,t)=>({value:e,correct:t===a}))},d=n.value?.options?u(n.value.options):[],[m,p]=C.default.useState(d),f=(0,j.useDynamicListContext)().removeItem,v=n.value?.question??"",[y,g]=C.default.useState(!1),{owner:h,credits:E,consumeCoins:b}=t.model;return C.default.createElement("section",{className:"dynamic-question-item__container"},C.default.createElement("div",{className:"dynamic-field__item dynamic-question-item"},C.default.createElement("div",{className:"drag-icon"},n.index+1,"."),C.default.createElement(x.Input,{name:"question",value:v??"",onChange:e=>{n.setValue({question:e.target.value,options:m})},onKeyDown:e}),C.default.createElement("section",{className:"item__actions"},C.default.createElement(N.ProcessIconButton,{icon:"aiStars",disabled:!v||""===v,onClick:async()=>{const e=new A.PendingPromise;return i(),setTimeout(()=>{e.resolve()},1e3),e},title:a.actions.generateAnswers}),C.default.createElement(_.IconButton,{icon:"delete",className:"drag-bullet-point",onClick:e=>{e.stopPropagation(),e=f(n.index),r({specs:{...o.specs,questions:e},updated:!0})},title:a.actions.delete}))),C.default.createElement(S.DynamicAnswersForm,{fetching:y,disabled:!n.value,show:m?.length,answers:m,onChange:({currentTarget:{value:e}})=>{var t=-1===(t=e.findIndex(e=>e.correct))?void 0:t,e={question:v,options:e.map(e=>e.value),correctAnswer:t};n.setValue(e)}}),C.default.createElement(M.RefinementModal,{owner:h,credits:E,onConsume:b,globalTexts:t.globalTexts,show:c,onClose:i,title:a.modalAnswers.title,descripction:a.modalAnswers.description,onGenerate:async({notes:e})=>{const t=await l.specs.generateAnswers({notes:e,question:v}),a=[...o.specs.questions];g(!0),globalThis.setTimeout(()=>{a[n.index].options=t,p(u(t)),r({specs:{...o.specs,questions:[...a]},updated:!0}),g(!1)},1e3)}}))};var C=e("react"),x=e("pragmate-ui/form"),_=e("pragmate-ui/icons"),M=e("@aimpact/ailearn-app/modules/management/refinament.code"),k=e("./hooks/use-input"),w=e("../../../../../context"),S=e("./answers"),j=e("pragmate-ui/dynamic-list"),N=e("@aimpact/ailearn-app/components/ui"),A=e("@beyond-js/kernel/core")}}),S.set("./forms/multiple-choice/body/list",{hash:4059176057,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MultipleChoiceList=function(){const{values:e,texts:t}=(0,l.useModuleContext)(),[,a]=n.default.useState(!1);return n.default.createElement(n.default.Fragment,null,n.default.createElement("header",{className:"flex-container flex-space-between"},n.default.createElement("h4",null,t.specs.questions.title),n.default.createElement(r.IconButton,{icon:"edit",onClick:()=>a(!0)})),n.default.createElement(o.List,{className:"specs__items-list",items:e.specs.questions,specs:{},control:c.QuestionItemList}))};var n=e("react"),l=e("../../../context"),o=e("pragmate-ui/list"),r=e("pragmate-ui/icons"),c=e("./question-item-list")}}),S.set("./forms/multiple-choice/body/question-item-list",{hash:2259167476,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.QuestionItemList=function({data:a,as:e="li",draggable:t=!1}){const[n,,]=i.default.useState(!1),l=(0,u.useModuleContext)().texts,o=e,r=()=>!n;return i.default.createElement(o,{className:"subform__items"},i.default.createElement(d.CollapsibleContainer,{onToggle:r},i.default.createElement(d.CollapsibleHeader,null,i.default.createElement("h6",null,t?i.default.createElement(c.Icon,{className:"item-list-icon",icon:"drag"}):i.default.createElement(c.Icon,{className:"item-list-icon",icon:"circle-check"}),i.default.createElement("span",{className:"item-list__content"},a.question))),i.default.createElement(d.CollapsibleContent,{onToggle:r},a.options?.length?i.default.createElement(s.List,{items:a.options,control:({data:e,index:t})=>(t=t===a.correctAnswer?"check":"close",i.default.createElement("li",{className:"item-list--answer section-container "+("check"==t?"success-container":"incorrect-answer")},i.default.createElement("span",{className:"item-list-icon"},"check"==t&&i.default.createElement(c.Icon,{icon:t,className:"icon-xs"})),i.default.createElement("span",{className:"item-list__content"},e)))}):i.default.createElement("div",{className:"text-end text-danger"},l.multipleChoice.emptyOptions))))};var c=e("pragmate-ui/icons"),s=e("pragmate-ui/list"),i=e("react"),u=e("../../../context"),d=e("pragmate-ui/collapsible")}}),S.set("./forms/multiple-choice/header",{hash:4179258504,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MultipleChoiceFormHeader=function(){const[t,a]=v.default.useState(!1),{values:e,activity:n,editData:l,texts:o}=(0,y.useModuleContext)(),[r,c]=v.default.useState(!1),[s,i]=v.default.useState(!1),u=async()=>a(!t);var d,m,p,f;return(0,g.useBinder)([n.specs],()=>{var e=n.specs.getData();l({specs:e})},"specs.generated"),t?v.default.createElement(h.ManualForm,{onCancel:u}):e.specs?.questions?.length?(d={onClick:()=>c(!r),disabled:n.specs.empty&&n.materials.empty},m={onClick:e=>a(!t),disabled:n.specs.empty&&n.materials.empty},p={onClick:e=>i(!s),disabled:n.specs.empty&&n.materials.empty},f=s?o.actions.cancel:o.actions.order,v.default.createElement("header",{className:"activity__section-header"},v.default.createElement("h5",null,o.specs.title),v.default.createElement("div",{className:"actions flex-container flex-05"},!t&&v.default.createElement(b.Button,{variant:"link",...m,icon:"edit"},o.actions.edit),v.default.createElement(b.Button,{variant:"link",...p,icon:"list"},f),v.default.createElement(b.Button,{variant:"link",...d,icon:"delete"},o.actions.delete)))):v.default.createElement(E.EmptyActivity,{openManual:u})};var v=e("react"),y=e("../../context"),g=e("@beyond-js/react-18-widgets/hooks"),h=e("./body/form/manual"),E=e("./body/empty"),b=e("pragmate-ui/components")}}),S.set("./forms/multiple-choice/index",{hash:290129061,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MultipleChoiceForm=function(){const[t,a]=v.default.useState(!1),{values:e,activity:n,editData:l,texts:o}=(0,y.useModuleContext)(),[r,c]=v.default.useState(!1),[s,i]=v.default.useState(!1),u=async()=>a(!t);var d,m,p,f;return(0,g.useBinder)([n.specs],()=>{var e=n.specs.getData();l({specs:e})},"specs.generated"),t?v.default.createElement(h.ManualForm,{onCancel:u}):e.specs?.questions?.length?(m={onClick:d=()=>c(!r),disabled:n.specs.empty&&n.materials.empty},p={onClick:e=>i(!s),disabled:n.specs.empty&&n.materials.empty},f=s?o.actions.cancel:o.actions.order,v.default.createElement(v.default.Fragment,null,v.default.createElement("div",{className:"form__multiple-field"},v.default.createElement("header",{className:"activity__section-header"},v.default.createElement("h5",null,o.specs.title),v.default.createElement("div",{className:"actions flex-container flex-05"},v.default.createElement(C.Button,{variant:"link",onClick:e=>a(!t),icon:"pencil"},o.actions.edit),v.default.createElement(C.Button,{variant:"link",...p,icon:"list"},f),v.default.createElement(C.Button,{variant:"link",...m,icon:"delete"},o.actions.delete))),v.default.createElement(x.MultipleChoiceList,{reordering:s,toggle:()=>i(!s)})),v.default.createElement(b.DeleteActivityData,{show:r,onClose:d}))):v.default.createElement(E.EmptyActivity,{openManual:u})};var v=e("react"),y=e("../../context"),g=e("@beyond-js/react-18-widgets/hooks"),h=e("./body/form/manual"),E=e("./body/empty"),b=e("../delete-modal"),C=e("pragmate-ui/components"),x=e("./list")}}),S.set("./forms/multiple-choice/list",{hash:2212344137,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MultipleChoiceList=function({reordering:e}){const{values:t,activity:a,editData:n,store:l}=(0,u.useModuleContext)(),[o,r]=c.default.useState(t.specs.questions);return e?(e=async()=>{var e={...t.specs,questions:o};await a.specs.set(e),n({specs:e,updated:!1}),await l.save()},c.default.createElement(c.default.Fragment,null,c.default.createElement(d.Reorder.Group,{values:o,onReorder:e=>{r(e),(e={...e.specs}).questions=[...o],e={specs:e,updated:!0},n(e)},className:"activity-list"},o.map(e=>c.default.createElement(d.Reorder.Item,{key:e.question,value:e},c.default.createElement(i.QuestionItemList,{data:e,as:"div",draggable:!0})))),c.default.createElement("section",{className:"section-actions__container actions-end"},c.default.createElement(m.SaveButton,{saved:!0,callback:e})))):c.default.createElement(s.List,{className:"activity-list",items:t.specs.questions,specs:{},control:i.QuestionItemList})};var c=e("react"),s=e("pragmate-ui/list"),i=e("./body/question-item-list"),u=e("../../context"),d=e("framer-motion"),m=e("../../save-button")}}),S.set("./forms/multiple-choice/options-header",{hash:4017858604,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.BulletPointsHeader=function({refineAction:e=!0}){var t=(0,c.useModuleContext)().texts,a=(0,l.useBulletPointsInputContext)().addBulletPoint;return n.default.createElement("div",{className:"bullet-buttons__container flex-container flex-end flex-100 mb-15"},n.default.createElement(o.Button,{icon:"add",variant:"primary",bordered:!0,onClick:a},t.bulletPoint.add),e&&n.default.createElement(r.AIButton,{variant:"primary",onClick:()=>console.log("questions")},t.actions.generate))};var n=e("react"),l=e("@aimpact/ailearn-app/components/ui/bullet-points-input"),o=e("pragmate-ui/components"),r=e("../../components/ai-button"),c=e("../../context")}}),S.set("./forms/multiple-choice/related-activity",{hash:1594318554,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.RelatedActivityField=function({related:e,setError:t,error:a}){const{store:n,texts:{multipleChoice:l,errors:o},values:r,activity:c,editData:s}=(0,m.useModuleContext)(),i=n.model.activities.items.filter(e=>"content-theory"===e.type).map(e=>({value:e.id,label:e.title}));var u={value:"",label:l.related.independent};return d.default.createElement(d.default.Fragment,null,d.default.createElement("label",null,l.related.label),d.default.createElement(p.ReactSelect,{value:e,options:[u,...i],onChange:e=>{c.specs.set({related:e.target.value}),""===e.target.value||n.model.activities.map.get(e.target.value).materials.article?(t(""),s({specs:{...r.specs,related:e.target.value}})):t(o.relatedArticle)}}),d.default.createElement(f.ErrorRenderer,{error:a,texts:o}))};var d=e("react"),m=e("../../context"),p=e("pragmate-ui/form/react-select"),f=e("@aimpact/ailearn-app/components/ui")}}),S.set("./forms/spoken/criteria-field-item",{hash:945060312,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CriteriaFieldItem=function({total:e,item:a,index:n,onDelete:t,onChange:l}){var o=(0,u.useModuleContext)().texts,r=e=>{var e=e.currentTarget,t={...a};t[e.name]=e.value,l(n,t)};return c.default.createElement("div",{className:"form-repeated-container"},c.default.createElement(s.Input,{onChange:r,label:o.specs.subject.label,placeholder:o.specs.criteria.placeholder,value:a.name,name:"name",className:"main__control"}),c.default.createElement(s.Textarea,{onChange:r,label:o.specs.criteria.label,value:a.subject,placeholder:o.specs.subject.placeholder,name:"subject"}),1<e&&c.default.createElement("div",{className:"flex-container flex-end"},c.default.createElement(i.Button,{variant:"link",onClick:()=>t(n)}," ",o.actions.delete)))};var c=e("react"),s=e("pragmate-ui/form"),i=e("pragmate-ui/components"),u=e("../../context")}}),S.set("./forms/spoken/criteria-field",{hash:148616516,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CriteriaField=function({onCancel:e=void 0}){const{values:n,editData:l,texts:t}=(0,p.useModuleContext)(),[a,o]=d.default.useState(n.specs?.criteria?.length||1),[r,c]=d.default.useState(n?.specs?.criteria?.length?[...n.specs.criteria]:[{name:"",subject:""}]),s=[],i=e=>{e=r.slice(0,e).concat(r.slice(e+1)),o(e.length),c(e),l({specs:{...n.specs,criteria:e},updated:!0})},u=(e,t)=>{var a=[...r];a[e]=t,c(a),l({specs:{...n.specs,criteria:a},updated:!0})};for(let e=0;e<a;++e)s.push(d.default.createElement(f.CriteriaFieldItem,{onChange:u,total:a,item:r[e],onDelete:i,key:"name-"+e,index:e}));return d.default.createElement("section",{className:"form__subsection"},s,d.default.createElement("footer",{className:"section-actions__container actions-end"},e&&d.default.createElement(m.Button,{variant:"primary",bordered:!0,onClick:e},t.actions.cancel),d.default.createElement(m.Button,{variant:"link",onClick:()=>{o(a+1),c([...r,{name:"",subject:""}])}},t.actions.add)))};var d=e("react"),m=e("pragmate-ui/components"),p=e("../../context"),f=e("./criteria-field-item")}}),S.set("./forms/spoken/criteria-form",{hash:1245134839,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpokenCriteriaForm=function({onCancel:e}){const{values:t,texts:a,editData:n,activity:l}=(0,m.useModuleContext)(),[o,r]=s.default.useState(!1),c=!t.specs.task||!t.specs.assessment||!t.specs.criteria?.length;return s.default.createElement(i.Form,{className:"activity__form"},s.default.createElement(p.CriteriaField,null),s.default.createElement("footer",{className:"section-actions__container actions-end border-top"},s.default.createElement(u.Button,{onClick:()=>{t.updated?r(!0):(n({specs:l.specs.getData(),updated:!1}),e())},variant:"primary",bordered:!0},a.actions.cancel),s.default.createElement(f.SaveButton,{callback:e,disabled:c})),o&&s.default.createElement(d.ConfirmModal,{onConfirm:()=>{r(!1),n({specs:l.specs.getData(),updated:!1}),e()},onCancel:()=>r(!1)},s.default.createElement("div",null,a.manual.cancel)))};var s=e("react"),i=e("pragmate-ui/form"),u=e("pragmate-ui/components"),d=e("pragmate-ui/modal"),m=e("../../context"),p=e("./criteria-field"),f=e("../../save-button")}}),S.set("./forms/spoken/criteria-item",{hash:1299847821,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CriteriaItem=function({data:e}){return a.default.createElement("div",{className:"subform__items"},a.default.createElement("strong",{className:"capitalize"},e.name,": ")," ",a.default.createElement("span",null,e.subject))};var a=e("react")}}),S.set("./forms/spoken/form",{hash:3132798405,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpokenManualForm=function({onCancel:e}){const{values:a,editData:n,texts:t,activity:l}=(0,f.useModuleContext)(),[o,r]=u.default.useState(!1),c=e=>{var e=e.currentTarget,t={...a.specs};n({specs:{...t,[e.name]:e.value},updated:!0})},s=a.specs.criteria?.length&&a.specs.criteria?.reduce((e,t)=>e&&!!t.name&&!!t.subject,!0),i=!a.specs.task||!a.specs.assessment||!s;return u.default.createElement(u.default.Fragment,null,u.default.createElement(d.Form,{className:"activity__form"},u.default.createElement(d.Textarea,{onChange:c,value:a.specs.task,label:t.specs.task.label,placeholder:t.specs.task.placeholder,name:"task"}),u.default.createElement(d.Textarea,{onChange:c,value:a.specs.assessment,label:t.specs.assessment.label,placeholder:t.specs.assessment.placeholder,name:"assessment"}),u.default.createElement(v.CriteriaField,null),u.default.createElement("footer",{className:"activity__form__footer"},u.default.createElement(m.Button,{onClick:()=>{a.updated?r(!0):(n({specs:l.specs.getData(),updated:!1}),e())},variant:"primary",bordered:!0},t.actions.cancel),u.default.createElement(y.SaveButton,{callback:e,disabled:i})),o&&u.default.createElement(p.ConfirmModal,{onConfirm:()=>{l.specs.clear(),n({specs:l.specs.getData(),updated:!1}),r(!1),e()},onCancel:()=>r(!1)},u.default.createElement("div",null,t.manual.cancel))))};var u=e("react"),d=e("pragmate-ui/form"),m=e("pragmate-ui/components"),p=e("pragmate-ui/modal"),f=e("../../context"),v=e("./criteria-field"),y=e("../../save-button")}}),S.set("./forms/spoken/index",{hash:3192161906,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpokenForm=function(){const{values:e,activity:t,editData:a,texts:n}=(0,g.useModuleContext)(),[l,o]=f.default.useState(!1),[r,c]=f.default.useState(!1),[s,i]=f.default.useState(!1),u=()=>c(!r),d=()=>i(!s),m=((0,h.useBinder)([t.specs],()=>a(t.getData()),"specs.generated"),{onClick:d,disabled:t.specs.empty&&t.materials.empty}),p=()=>{o(!l)};return l||e.specs.criteria&&e.specs.task&&e.specs.assessment?l?f.default.createElement(E.SpokenManualForm,{onCancel:p}):f.default.createElement(f.default.Fragment,null,f.default.createElement("header",{className:"activity__section-header"},f.default.createElement("h5",null,n.specs.title),f.default.createElement("div",{className:"actions flex-container flex-05"},f.default.createElement(x.Button,{variant:"link",...m,icon:"delete"},n.actions.delete))),f.default.createElement(y.ActivityBaseSpec,{name:"task"}),f.default.createElement(y.ActivityBaseSpec,{name:"assessment"}),f.default.createElement("div",{className:"activity-list__container"},r?f.default.createElement(M.SpokenCriteriaForm,{onCancel:u}):f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:"flex-container flex-space-between flex-vertical-center"},f.default.createElement("h6",null,n.spoken.criteria.label),f.default.createElement(C.Icon,{icon:"edit",className:"icon-clickable",onClick:u})),f.default.createElement(b.List,{className:"criteria__items-list",items:e.specs.criteria,specs:{},control:_.CriteriaItem}))),f.default.createElement(k.DeleteActivityData,{show:s,onClose:d})):f.default.createElement(v.EmptySpecs,{name:"spoken",onManual:p})};var f=e("react"),v=e("../../specs/empty"),y=e("../../specs/base-spec"),g=e("../../context"),h=e("@beyond-js/react-18-widgets/hooks"),E=e("./form"),b=e("pragmate-ui/list"),C=e("pragmate-ui/icons"),x=e("pragmate-ui/components"),_=e("./criteria-item"),M=e("./criteria-form"),k=e("../delete-modal")}}),S.set("./header",{hash:2980465286,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityHeader=function({}){const{activity:t,texts:e,editData:a}=(0,u.useModuleContext)(),[n,l]=s.default.useState(!1),[o,r]=s.default.useState(t.picture?t.picture+"?size=sm":void 0),c="header-activity__container header-activity__container--"+t.type;return(0,f.useBinder)([t],()=>r(t.picture+"?size=sm&"+Date.now()),"image.generated"),s.default.createElement("section",{className:"page-edition-section-header"},s.default.createElement(m.BreadCrumbHeader,null),s.default.createElement("header",{className:c},s.default.createElement(p.CoverImage,{title:e.picture.title,description:e.picture.description,suggestions:t.pictureSuggestions,entity:"activity",picture:o,onGenerate:e=>t.generatePicture(e)}),s.default.createElement("div",{className:"header__title-container"},s.default.createElement(i.ContentEditable,{className:"inline-control",name:"title",as:"h3",onSave:async e=>{e={title:e.target.value},a(e),await t.save(e)},content:t.title,placeholder:e.form.title})),s.default.createElement(v.AppIcon,{className:"activiy-icon",icon:t.type})),s.default.createElement(d.ActivitySuggestionsModal,{show:n,type:t.type,onClose:()=>l(!n)}))};var s=e("react"),i=e("@aimpact/ailearn-app/components/ui"),u=e("./context"),d=e("./components/generation-modal/activity-modal"),m=e("./components/generation-modal/breadcrumb"),p=e("@aimpact/ailearn-app/components/cover-image.code"),f=e("@beyond-js/react-18-widgets/hooks"),v=e("@aimpact/ailearn-app/components/icons")}}),S.set("./index",{hash:4180999191,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleActivityForm=function({store:e,activity:t}){const[a,n]=u.default.useState(t.getData()),[l,o]=(0,f.useTexts)(v.module.specifier),[r,c]=u.default.useState(0),s=t.type,i=e.activityTypes.get(s);if(globalThis.activity=t,i)return l?u.default.createElement(y.ModuleContext.Provider,{value:{activity:t,texts:o,store:e,values:a,clearData:()=>{t.materials.clear(),n(t.getData())},updated:a.updated,editData:e=>{e={...a,...e};n({...e})},currentTab:r,setCurrentTab:c,ensureCredits:p.LayoutBroker.ensureCredits,itemsType:i}},u.default.createElement(m.PageContainer,{className:"page-activity-container activity-container--"+t.type},u.default.createElement(E.ActivityHeader,null),u.default.createElement(g.GeneralActivityFields,null),u.default.createElement(b.ActivityObjectiveSpecs,null),u.default.createElement(h.ActivityBaseForm,{type:s}))):u.default.createElement(d.Spinner,{active:!0});throw new Error(`the activity type ${s} is not supported`)};var u=e("react"),d=e("pragmate-ui/components"),m=e("@aimpact/ailearn-app/components/ui"),p=e("@aimpact/ailearn-app/main-layout.widget"),f=e("@beyond-js/react-18-widgets/hooks"),v=e("beyond_context"),y=e("./context"),g=e("./specs"),h=e("./forms"),E=e("./header"),b=e("./specs/objective")}}),S.set("./interface",{hash:792411869,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})}}),S.set("./save-button",{hash:1603006657,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SaveButton=function({saved:t=!1,disabled:e,callback:a}){const{values:n,editData:l,texts:o,store:r,activity:c}=(0,u.useModuleContext)(),s={disabled:!n.updated||e,onClick:async e=>{e.stopPropagation(),t||(await r.model.activities.map.get(c.id).set(n),await c.set(n),r.save(),l({updated:!1})),a&&a()}};return i.default.createElement(d.Button,{variant:"primary",...s},o.actions.save)};var i=e("react"),u=e("./context"),d=e("pragmate-ui/components")}}),S.set("./specs/base-spec",{hash:3182451074,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityBaseSpec=function({name:e}){const{values:a,texts:t,activity:n,editData:l}=(0,c.useModuleContext)(),o=n.specs[e]??t.specs[e].placeholder;return r.default.createElement("div",{className:"specs-label"},r.default.createElement("label",{htmlFor:""},t.specs[e].label),r.default.createElement(s.ContentEditable,{name:e,onSave:async({target:{name:e,value:t}})=>{await n.save({specs:{...a.specs,[e]:t}}),l({specs:{...a.specs,[e]:t}})},content:o},o))};var r=e("react"),c=e("../context"),s=e("@aimpact/ailearn-app/components/ui")}}),S.set("./specs/empty",{hash:1831894225,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EmptySpecs=function({onManual:e,disabled:t,suggestionSpecs:a={}}){const{texts:n,activity:l,store:o}=(0,m.useModuleContext)(),[r,c]=u.default.useState(!1),s={disabled:!l.prepared||t},i=()=>c(!r);return u.default.createElement(u.default.Fragment,null,u.default.createElement(d.EmptyCard,{className:"activity--empty",text:n.activities.empty.title,description:n.activities.empty.description},u.default.createElement("footer",{className:"activity__actions"},u.default.createElement(p.Button,{variant:"primary",bordered:!0,onClick:e},n.actions.manual),u.default.createElement(f.AIButton,{...s,onClick:i,variant:"primary",ensure:!1},n.actions.generate))),r&&u.default.createElement(v.RefinementModal,{show:r,owner:o.model.owner,credits:o.model.credits,onConsume:o.model.consumeCoins,onClose:i,globalTexts:o.globalTexts,title:n.refine.title,descripction:n.refine.description,onGenerate:e=>l.specs.generate(e,{...a})}))};var u=e("react"),d=e("@aimpact/ailearn-app/components/ui"),m=e("../context"),p=e("pragmate-ui/components"),f=e("../components/ai-button"),v=e("@aimpact/ailearn-app/modules/management/refinament.code")}}),S.set("./specs/index",{hash:1630174409,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralActivityFields=function(){const{texts:e,activity:a,editData:n,store:l}=(0,r.useModuleContext)();return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:"specs-label"},o.default.createElement(s.LanguageField,null)),o.default.createElement("div",{className:"specs-label"},o.default.createElement("label",null," ",e.activities.description.label),o.default.createElement(c.ContentEditable,{name:"description",selector:"p",onSave:async({currentTarget:{name:e,value:t}})=>{n({[e]:t}),await a.set({[e]:t}),await l.save()},placeholder:e.activities.description.placeholder,content:a.description})))};var o=e("react"),r=e("../context"),c=e("@aimpact/ailearn-app/components/ui"),s=e("../forms/language")}}),S.set("./specs/objective",{hash:948121357,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityObjectiveSpecs=function(){const{values:e,texts:t,activity:a,editData:n,store:l}=(0,r.useModuleContext)();return a.specs.properties.includes("objective")?o.default.createElement("div",{className:"specs-label"},o.default.createElement("label",null,t.specs.objective.label),o.default.createElement(c.ContentEditable,{name:"objective",onSave:async({currentTarget:{name:e,value:t}})=>{e={specs:{...a.specs,[e]:t}},n(e),await a.set(e),await l.save()},placeholder:t.specs.objective.placeholder,content:e.specs.objective})):null};var o=e("react"),r=e("../context"),c=e("@aimpact/ailearn-app/components/ui")}}),w.exports.descriptor=[{im:"./components/ai-button",from:"AIButton",name:"AIButton"},{im:"./components/ai-button",from:"AIIconButton",name:"AIIconButton"},{im:"./header",from:"ActivityHeader",name:"ActivityHeader"},{im:"./index",from:"ModuleActivityForm",name:"ModuleActivityForm"}],w.exports.process=function({require:e,prop:t,value:a}){!e&&"AIButton"!==t||n("AIButton",e?e("./components/ai-button").AIButton:a),!e&&"AIIconButton"!==t||n("AIIconButton",e?e("./components/ai-button").AIIconButton:a),!e&&"ActivityHeader"!==t||n("ActivityHeader",e?e("./header").ActivityHeader:a),!e&&"ModuleActivityForm"!==t||n("ModuleActivityForm",e?e("./index").ModuleActivityForm:a)},n("__beyond_pkg",w),n("hmr",new function(){this.on=(e,t)=>w.hmr.on(e,t),this.off=(e,t)=>w.hmr.off(e,t)}),w.initialise(S)}}});