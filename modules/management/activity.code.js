System.register(["@beyond-js/kernel@0.1.9/bundle","@beyond-js/kernel@0.1.9/styles","react@18.2.0","@aimpact/ailearn-app@0.1.13/components/ui","pragmate-ui@1.0.0-beta.6/components","@beyond-js/react-18-widgets@1.1.2/hooks","pragmate-ui@1.0.0-beta.6/empty","@aimpact/ailearn-app@0.1.13/modules/management/refinament.code","pragmate-ui@1.0.0-beta.6/form","pragmate-ui@1.0.0-beta.6/perfect-scrollbar","@aimpact/chat-sdk@1.3.0/widgets/markdown","pragmate-ui@1.0.0-beta.6/list","pragmate-ui@1.0.0-beta.6/modal","pragmate-ui@1.0.0-beta.6/tabs","pragmate-ui@1.0.0-beta.6/dynamic-list","pragmate-ui@1.0.0-beta.6/icons","@beyond-js/kernel@0.1.9/core","pragmate-ui@1.0.0-beta.6/form/react-select","framer-motion@10.18.0","pragmate-ui@1.0.0-beta.6/collapsible","@aimpact/ailearn-app@0.1.13/components/dynamic-field","@aimpact/ailearn-app@0.1.13/components/icons","@aimpact/ailearn-app@0.1.13/main-layout.widget","@beyond-js/kernel@0.1.9/routing","@aimpact/ailearn-app@0.1.13/components/cover-image.code","pragmate-ui@1.0.0-beta.6/image"],function(n,e){var t,a,i,l,r,c,o,s,u,m,d,p,f,v,y,g,h,E,b,C,x,_,A,w,k,M,S,j;return n({AIButton:void 0,AIIconButton:void 0,ActivityHeader:void 0,ModuleActivityForm:void 0}),{setters:[function(e){t=e},function(e){a=e},function(e){i=e},function(e){l=e},function(e){r=e},function(e){c=e},function(e){o=e},function(e){s=e},function(e){u=e},function(e){m=e},function(e){d=e},function(e){p=e},function(e){f=e},function(e){v=e},function(e){y=e},function(e){g=e},function(e){h=e},function(e){E=e},function(e){b=e},function(e){C=e},function(e){x=e},function(e){_=e},function(e){A=e},function(e){w=e},function(e){k=e},function(e){M=e}],execute:function(){j=t.Bundle,(S=new j({module:{vspecifier:"@aimpact/ailearn-app@0.1.13/modules/management/activity",multibundle:!0},type:"code"},e.meta.url).package()).dependencies.update([["@beyond-js/kernel/styles",a],["react",i],["@aimpact/ailearn-app/components/ui",l],["pragmate-ui/components",r],["@beyond-js/react-18-widgets/hooks",c],["pragmate-ui/empty",o],["@aimpact/ailearn-app/modules/management/refinament.code",s],["pragmate-ui/form",u],["pragmate-ui/perfect-scrollbar",m],["@aimpact/chat-sdk/widgets/markdown",d],["pragmate-ui/list",p],["pragmate-ui/modal",f],["pragmate-ui/tabs",v],["pragmate-ui/dynamic-list",y],["pragmate-ui/icons",g],["@beyond-js/kernel/core",h],["pragmate-ui/form/react-select",E],["framer-motion",b],["pragmate-ui/collapsible",C],["@aimpact/ailearn-app/components/dynamic-field",x],["@aimpact/ailearn-app/components/icons",_],["@aimpact/ailearn-app/main-layout.widget",A],["@beyond-js/kernel/routing",w],["@aimpact/ailearn-app/components/cover-image.code",k],["pragmate-ui/image",M]]),brequire("@beyond-js/kernel/styles").styles.register("@aimpact/ailearn-app@0.1.13/modules/management/activity.code"),(j=new Map).set("./activities/character-talk/index",{hash:48197127,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterTalkActivity=function(){let{texts:e,activity:a}=(0,o.useActivityContext)(),[t,n]=r.useState(a.specs.empty()?"empty":"specs"),i=e=>n(e),l=()=>{var e=a.specs.empty()?"empty":"specs";n(e)};return(0,p.useBinder)([a],l,"activity.saved"),(0,p.useBinder)([a.specs],l,"specs.cleaned"),"specs"===t&&a.specs.empty(),r.createElement(r.Fragment,null,r.createElement(v.ActivityHeader,null),r.createElement("div",{className:"specs-label"},r.createElement("label",null," ",e.activities.description.label),r.createElement(c.ContentEditable,{name:"description",selector:"p",onSave:async({currentTarget:{name:e,value:t}})=>a.save({[e]:t}),placeholder:e.activities.description.placeholder,content:a.description})),r.createElement(f.ObjectiveField,null),r.createElement(m.ConditionalContainer,{condition:t,options:{specs:r.createElement(d.Specs,null),manual:r.createElement(u.ManualMaterialForm,{toggleView:i})},placeholder:r.createElement(s.EmptySpecs,{name:a.type,toggleView:i})}))};var r=e("react"),c=e("@aimpact/ailearn-app/components/ui"),o=e("../../context"),s=e("../specs/empty"),u=e("../specs/manual"),m=e("pragmate-ui/components"),d=e("../specs/specs"),p=e("@beyond-js/react-18-widgets/hooks"),f=e("../objective-field"),v=e("../../header")}}),j.set("./activities/content-theory/activity-content",{hash:21954670,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityContent=function({}){return a.default.createElement(a.default.Fragment,null,a.default.createElement(n.Specs,null))};var a=e("react"),n=e("../specs/specs")}}),j.set("./activities/content-theory/index",{hash:4226290906,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ContentTheoryActivity=function({}){let{texts:e,activity:a,store:t}=(0,s.useActivityContext)(),{}=t,[n,i]=c.useState(a.specs.empty()?"empty":"specs"),l=e=>{"specs"===e&&a.specs.empty()?i("empty"):i(e)},r=()=>{var e=a.specs.empty()?"empty":"specs";i(e)};return(0,p.useBinder)([a],r,"activity.saved"),(0,p.useBinder)([a.specs],r,"specs.cleaned"),c.createElement(c.Fragment,null,c.createElement(g.ActivityHeader,null),c.createElement("div",{className:"specs-label"},c.createElement("label",null," ",e.activities.description.label),c.createElement(o.ContentEditable,{name:"description",selector:"p",onSave:async({currentTarget:{name:e,value:t}})=>{a.save({[e]:t})},placeholder:e.activities.description.placeholder,content:a.description})),c.createElement(f.ObjectiveField,null),c.createElement(d.ConditionalContainer,{condition:n,options:{specs:c.createElement(v.ActivityContent,{toggleView:l}),manual:c.createElement(m.ManualMaterialForm,{toggleView:l})},placeholder:c.createElement(u.EmptySpecs,{name:a.type,toggleView:l})}),c.createElement(y.MaterialsView,{toggleView:l}))};var c=e("react"),o=e("@aimpact/ailearn-app/components/ui"),s=e("../../context"),u=e("../specs/empty"),m=e("../specs/manual"),d=e("pragmate-ui/components"),p=e("@beyond-js/react-18-widgets/hooks"),f=e("../objective-field"),v=e("./activity-content"),y=e("./materials"),g=e("../../header")}}),j.set("./activities/content-theory/materials/article/empty",{hash:358241747,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyArticleMaterial=function({name:e,onManual:t}){let{activity:a,texts:n,store:{globalTexts:i}}=(0,y.useActivityContext)(),l=n.contentTheory.materials,[r,c]=p.default.useState(!1),[,,]=p.default.useState(!1),[o,s]=p.default.useState(a.materials.fetching),[,u]=p.default.useState(a.materials[e]),m=()=>c(!r),d=((0,h.useBinder)([a.materials],()=>{s(a.materials.fetching),u(a.materials[e])}),{disabled:!a.title});return p.default.createElement(p.default.Fragment,null,p.default.createElement(f.EmptyCard,{className:"activity--empty",text:n.activities.empty.title,description:n.activities.empty.description},p.default.createElement("div",{className:"activity__actions"},p.default.createElement(g.Button,{variant:"primary",bordered:!0,onClick:t},i.actions.manual),p.default.createElement(f.AIButton,{onClick:m,variant:"primary",...d},i.actions.generate)),p.default.createElement(f.ProcessContainer,{fetching:o})),r&&p.default.createElement(v.RefinementModal,{show:r,required:!0,title:l.refinement.title,description:l.refinement.description,onClose:m,onGenerate:async e=>{try{await a.materials.generate("article",e)}catch(e){console.log(e)}}}))};var p=e("react"),f=e("@aimpact/ailearn-app/components/ui"),v=e("@aimpact/ailearn-app/modules/management/refinament.code"),y=e("../../../../context"),g=e("pragmate-ui/components"),h=e("@beyond-js/react-18-widgets/hooks")}}),j.set("./activities/content-theory/materials/article/form",{hash:2375778010,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ArticleForm=function({toggleManual:t}){let{texts:e,store:a,values:n,activity:i}=(0,v.useActivityContext)(),l=a.globalTexts,r=e.contentTheory.materials,[c,o]=f.default.useState(!1),[s,u]=f.default.useState(n.materials?.article??""),m=async e=>{o(!0),i.materials.set({article:s}),await i.save(),t(),o(!1)},d=f.default.useRef(null),p=(f.default.useEffect(()=>{var e=d.current.querySelector("textarea"),t=(e.focus(),e.value.length);e.setSelectionRange(t,t)},[]),"tab-container "+(c?" is-fetching":""));return f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:p,ref:d},f.default.createElement(h.ScrollContainer,{className:"ds-drawer-scroll-container","data-perfect-scrollbar":"","data-suppress-scroll-x":"true"},f.default.createElement(g.Form,{onSubmit:m,className:"activity-modal__form-content tab-cntent"},f.default.createElement(g.Textarea,{onChange:e=>{u(e.target.value)},name:"content",value:s,placeholder:r.form.article.placeholder}))),f.default.createElement("footer",{className:"activity-modal__form-footer"},f.default.createElement(y.Button,{onClick:t,variant:"primary",bordered:!0},l.actions.cancel),f.default.createElement(y.Button,{variant:"primary",onClick:m},l.actions.save))))};var f=e("react"),v=e("../../../../context"),y=e("pragmate-ui/components"),g=e("pragmate-ui/form"),h=e("pragmate-ui/perfect-scrollbar")}}),j.set("./activities/content-theory/materials/article/index",{hash:1803552190,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ArticleTab=function(){let e=(0,l.useActivityContext)().activity,[t,a]=i.default.useState(!1),n=()=>a(!t);return i.default.createElement(c.ConditionalContainer,{condition:t,ternary:!0,options:{true:i.default.createElement(o.ArticleForm,{toggleManual:n}),false:i.default.createElement(c.ConditionalContainer,{condition:!!e.materials.article,ternary:!0,options:{true:i.default.createElement(s.ArticleTabView,{toggleManual:n}),false:i.default.createElement(r.EmptyArticleMaterial,{name:"article",onManual:n})}})}})};var i=e("react"),l=e("../../../../context"),r=e("./empty"),c=e("pragmate-ui/components"),o=e("./form"),s=e("./view")}}),j.set("./activities/content-theory/materials/article/view",{hash:2661617821,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ArticleTabView=function({toggleManual:e}){let{store:t,activity:a}=(0,l.useActivityContext)(),n=t.globalTexts;return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:"material-content"},i.default.createElement(c.Markdown,{content:a.materials.article})),i.default.createElement("footer",{className:" activity-modal__form-footer"},i.default.createElement(r.Button,{icon:"edit",onClick:e,variant:"primary",bordered:!0},n.actions.edit),i.default.createElement(o.DeleteConfirmButton,{icon:"delete",onConfirm:async()=>{a.materials.clear(),a.save()},variant:"primary"})))};var i=e("react"),l=e("../../../../context"),r=e("pragmate-ui/components"),c=e("@aimpact/chat-sdk/widgets/markdown"),o=e("@aimpact/ailearn-app/components/ui")}}),j.set("./activities/content-theory/materials/audios/empty",{hash:3048821190,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ContentTheoryEmptyAudio=function({}){let{activity:e,texts:t,store:{globalTexts:a}}=(0,r.useActivityContext)(),[n,i]=l.default.useState(e.materials.fetching);return l.default.createElement(l.default.Fragment,null,l.default.createElement(c.EmptyCard,{className:"activity--empty",text:t.activities.empty.title,description:t.activities.empty.description},l.default.createElement("div",{className:"activity__actions"},l.default.createElement(c.AIButton,{onClick:async()=>{try{i(!0),await e.materials.generateAudio()}catch(e){console.log(e)}finally{i(!1)}},variant:"primary"},a.actions.generate)),l.default.createElement(c.ProcessContainer,{fetching:n})))};var l=e("react"),r=e("../../../../context"),c=e("@aimpact/ailearn-app/components/ui")}}),j.set("./activities/content-theory/materials/audios/index",{hash:4231958933,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ContentTheoryAudio=function(){let e=(0,o.useActivityContext)().activity,[,t]=c.default.useState(!1),[,a]=c.default.useState(e.materials.fetching),[n,i]=c.default.useState(e.materials.audios);return(0,l.useBinder)([e.materials],()=>{t(!1),a(e.materials.fetching),i(e.materials.audios)}),c.default.createElement(r.ConditionalContainer,{condition:!!n,ternary:!0,options:{true:c.default.createElement(u.ContentTheoryAudioView,null),false:c.default.createElement(s.ContentTheoryEmptyAudio,null)}})};var l=e("@beyond-js/react-18-widgets/hooks"),r=e("pragmate-ui/components"),c=e("react"),o=e("../../../../context"),s=e("./empty"),u=e("./view")}}),j.set("./activities/content-theory/materials/audios/item",{hash:2620005488,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ContentTheoryAudioItem=void 0;var i=e("react"),l=e("../../../../context"),r=e("@aimpact/ailearn-app/components/ui");t.ContentTheoryAudioItem=({item:e})=>{var{activity:t,texts:a}=(0,l.useActivityContext)(),n=t.materials.audios;return t.materials.audios[e]?.url?i.default.createElement("div",{className:"activity__audio"},i.default.createElement("h5",null,a.contentTheory.materials.types[e]),i.default.createElement(r.AudioPlayer,{url:n[e].url})):null}}}),j.set("./activities/content-theory/materials/audios/view",{hash:2252717187,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ContentTheoryAudioView=function(){let{activity:e,store:{}}=(0,o.useActivityContext)(),[,t]=c.default.useState(!1),[,a]=c.default.useState(e.materials.fetching),n=e.materials.audios,i=((0,l.useBinder)([e.materials],()=>{t(!1),a(e.materials.fetching)}),n?Object.keys(n):[]);return c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:"material-content"},c.default.createElement(r.List,{className:"list-unstyled",items:i,control:s.ContentTheoryAudioItem,as:"div"}),","),c.default.createElement("footer",{className:" activity-modal__form-footer"},c.default.createElement(u.DeleteConfirmButton,{onConfirm:async()=>{a(!0),await e.materials.deleteAudios(),a(!1)},bordered:!0})))};var l=e("@beyond-js/react-18-widgets/hooks"),r=e("pragmate-ui/list"),c=e("react"),o=e("../../../../context"),s=e("./item"),u=e("@aimpact/ailearn-app/components/ui")}}),j.set("./activities/content-theory/materials/empty",{hash:2919279748,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyMaterial=function({name:e,onManual:t}){let{activity:a,texts:n,store:{globalTexts:i}}=(0,f.useActivityContext)(),[l,r]=d.default.useState(!1),[c,o]=d.default.useState(a.materials.fetching),[,s]=d.default.useState(a.materials[e]),u=()=>r(!l),m=((0,y.useBinder)([a.materials],()=>{o(a.materials.fetching),s(a.materials[e])}),{disabled:!a.title||!a.materials?.article});return d.default.createElement(d.default.Fragment,null,d.default.createElement(p.EmptyCard,{className:"activity--empty",text:n.activities.empty.title,description:n.activities.empty.description},d.default.createElement("div",{className:"activity__actions"},d.default.createElement(v.Button,{variant:"primary",bordered:!0,onClick:t},i.actions.manual),d.default.createElement(p.AIButton,{onClick:u,variant:"primary",...m},i.actions.generate)),d.default.createElement(p.ProcessContainer,{fetching:c})),l&&d.default.createElement(g.MaterialsSuggestionsModal,{type:e,onClose:u}))};var d=e("react"),p=e("@aimpact/ailearn-app/components/ui"),f=e("../../../context"),v=e("pragmate-ui/components"),y=e("@beyond-js/react-18-widgets/hooks"),g=e("../../../components/generation-modal/materials")}}),j.set("./activities/content-theory/materials/form",{hash:4040189119,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialsForm=function({show:e,onClose:t}){let{texts:a,store:n,values:i,activity:l}=(0,g.useActivityContext)(),r=n.globalTexts,c=a.contentTheory.materials,[,o]=f.default.useState(i.materials?.article??""),[s,u]=f.default.useState(!1),[,m]=f.default.useState({}),d=()=>u(!s);if((0,_.useBinder)([l.materials],()=>{o(l.materials.article),m({})}),!e)return null;let p=[];return p.push(f.default.createElement(E.Tab,{key:"article-attachment"},c.types.article)),l.materials.article&&Object.keys(c.types).forEach(e=>{"article"!==e&&p.push(f.default.createElement(E.Tab,{key:e},c.types[e]))}),f.default.createElement(f.default.Fragment,null,f.default.createElement(y.Modal,{show:!0,closeBackdrop:!1,className:"activity-modal__form",onClose:t},f.default.createElement("header",{className:"activity-modal__form-header"},f.default.createElement("h5",null,c.title),f.default.createElement(v.AIButton,{title:r.actions.generate,onClick:d,icon:"file",variant:"link"},r.actions.generate)),f.default.createElement(E.TabsContainer,{active:0,className:"content-theory__tabs ",onChange:e=>{o(e.target.value)}},f.default.createElement(E.Tabs,null,p),f.default.createElement(E.Panes,null,f.default.createElement(b.ArticleTab,{onClose:t}),f.default.createElement(C.MaterialPane,{name:"synthesis"}),f.default.createElement(C.MaterialPane,{name:"dyslexia"}),f.default.createElement(x.ContentTheoryAudio,null))),f.default.createElement(h.RefinementModal,{show:s,required:!0,title:c.refinement.title,description:c.refinement.description,onClose:d,onConsume:()=>{},onGenerate:async e=>{try{var t=await l.materials.generate("article",e);o(t)}catch(e){console.log(e)}}})))};var f=e("react"),v=e("@aimpact/ailearn-app/components/ui"),y=e("pragmate-ui/modal"),g=e("../../../context"),h=e("@aimpact/ailearn-app/modules/management/refinament.code"),E=e("pragmate-ui/tabs"),b=e("./article"),C=e("./pane"),x=e("./audios"),_=e("@beyond-js/react-18-widgets/hooks")}}),j.set("./activities/content-theory/materials/index",{hash:89444257,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialsView=function({}){let{store:e,texts:t}=(0,c.useActivityContext)(),[a,n]=r.default.useState(!1),{}=e,i=()=>{n(!0)};return r.default.createElement(r.default.Fragment,null,r.default.createElement("section",null,r.default.createElement("header",{className:"activity__section-header"},r.default.createElement("h5",null,t.contentTheory.materials.title),r.default.createElement("div",{className:"actions"},r.default.createElement(l.Button,{className:"disabled-button",title:"proximamente",icon:"file",variant:"link"},t.contentTheory.empty.actions.upload),r.default.createElement(l.Button,{onClick:i,variant:"link"},t.contentTheory.empty.actions.add))),r.default.createElement(s.MaterialList,{onCreate:i})),a&&r.default.createElement(o.MaterialsForm,{show:a,onClose:()=>n(!1)}))};var l=e("pragmate-ui/components"),r=e("react"),c=e("../../../context"),o=e("./form"),s=e("./list")}}),j.set("./activities/content-theory/materials/list",{hash:3127023098,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialList=function({onCreate:e}){let t=(0,n.useActivityContext)().activity;return a.default.createElement(a.default.Fragment,null,t.materials.article&&a.default.createElement("div",{className:"attachments__container"},a.default.createElement("div",{className:"attachment__card card--article",onClick:e},80<(e=t.materials.article).length?e.substring(0,80)+"...":e,a.default.createElement(i.DeleteConfirmIconButton,{className:"circle",icon:"delete",onConfirm:e=>{t.materials.clear(),t.save()}}))))};var a=e("react"),n=e("../../../context"),i=e("@aimpact/ailearn-app/components/ui")}}),j.set("./activities/content-theory/materials/manual-material-form",{hash:3651623107,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ManualMaterialForm=function({name:e,onCancel:t,onClose:a}){let{values:n,activity:i,texts:l,store:r}=(0,E.useActivityContext)(),c=r.globalTexts,[o,s]=y.default.useState(!1),[u,m]=y.default.useState(n.materials?.[e]??""),[d,p]=y.default.useState(!1),f=async()=>{p(!0),i.materials.set({[e]:u}),await i.save({[e]:u}),p(!1),a()};return y.default.createElement(y.default.Fragment,null,y.default.createElement(g.Form,{className:"activity-modal__form-content",onSubmit:f},y.default.createElement(g.Textarea,{onChange:e=>{m(e.target.value)},name:e,value:u,placeholder:l.manual[e].textarea})),y.default.createElement("footer",{className:"activity-modal__form-footer"},y.default.createElement(v.Button,{onClick:()=>{n.updated?s(!0):t()},variant:"primary",bordered:!0},c.actions.cancel),y.default.createElement(v.Button,{variant:"primary",onClick:f,disabled:!u||d},c.actions.save)),o&&y.default.createElement(h.ConfirmModal,{onConfirm:async()=>{},onCancel:()=>s(!1)},y.default.createElement("div",null,l.manual.cancel)))};var v=e("pragmate-ui/components"),y=e("react"),g=e("pragmate-ui/form"),h=e("pragmate-ui/modal"),E=e("../../../context")}}),j.set("./activities/content-theory/materials/pane",{hash:2843729002,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialPane=function({name:e}){let{store:t,activity:a}=(0,h.useActivityContext)(),n=t.globalTexts,[i,l]=m.default.useState(!1),[r,c]=m.default.useState(a.materials[e]),o=()=>l(!i),[s,u]=m.default.useState(!1);return(0,p.useBinder)([a.materials],()=>c(a.materials[e])),i?m.default.createElement(y.ManualMaterialForm,{name:e,onClose:o,onCancel:o}):r?m.default.createElement(m.default.Fragment,null,m.default.createElement("section",{className:"material__content"},m.default.createElement(d.Markdown,{content:r})),m.default.createElement("footer",{className:"activity-modal__form-footer material__actions"},m.default.createElement(g.DeleteConfirmButton,{onConfirm:()=>{u(!0),a.materials.set({[e]:""}),a.save({[e]:""}),u(!1)},disabled:s,bordered:!0}),m.default.createElement(f.Button,{icon:"edit",onClick:()=>l(!0),disabled:s,variant:"primary",bordered:!0},n.actions.edit))):m.default.createElement(v.EmptyMaterial,{name:e,onManual:o})};var m=e("react"),d=e("@aimpact/chat-sdk/widgets/markdown"),p=e("@beyond-js/react-18-widgets/hooks"),f=e("pragmate-ui/components"),v=e("./empty"),y=e("./manual-material-form"),g=e("@aimpact/ailearn-app/components/ui"),h=e("../../../context")}}),j.set("./activities/debate/index",{hash:1793036517,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DebateActivity=function(){let{texts:e,activity:a}=(0,o.useActivityContext)(),[t,n]=r.useState(a.specs.empty()?"empty":"specs"),i=e=>n(e),l=()=>{var e=a.specs.empty()?"empty":"specs";n(e)};return(0,p.useBinder)([a],l,"activity.saved"),(0,p.useBinder)([a.specs],l,"specs.cleaned"),r.createElement(r.Fragment,null,r.createElement(v.ActivityHeader,null),r.createElement("div",{className:"specs-label"},r.createElement("label",null," ",e.activities.description.label),r.createElement(c.ContentEditable,{name:"description",selector:"p",onSave:async({currentTarget:{name:e,value:t}})=>{a.save({[e]:t})},placeholder:e.activities.description.placeholder,content:a.description})),r.createElement(f.ObjectiveField,null),r.createElement(m.ConditionalContainer,{condition:t,options:{specs:r.createElement(d.Specs,null),manual:r.createElement(u.ManualMaterialForm,{onCancel:i,toggleView:i})},placeholder:r.createElement(s.EmptySpecs,{name:a.type,toggleView:i})}))};var r=e("react"),c=e("@aimpact/ailearn-app/components/ui"),o=e("../../context"),s=e("../specs/empty"),u=e("../specs/manual"),m=e("pragmate-ui/components"),d=e("../specs/specs"),p=e("@beyond-js/react-18-widgets/hooks"),f=e("../objective-field"),v=e("../../header")}}),j.set("./activities/delete-modal",{hash:3238128405,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteActivityData=function({show:e,onClose:t}){let[,a]=c.default.useState(!1),{activity:n,texts:{activities:i},store:{globalTexts:{actions:l}}}=(0,o.useActivityContext)();return e?c.default.createElement(c.default.Fragment,null,c.default.createElement(r.ConfirmModal,{show:!0,onClose:t,onConfirm:e=async()=>{try{a(!0),await n.clearContent(),t()}catch(e){console.error(e)}finally{a(!1)}},btnConfirm:{label:l.confirm},btnCancel:{label:l.cancel},onCancel:t},c.default.createElement("h3",null,i.deleteModal.title),c.default.createElement("p",null,i.deleteModal.description))):null};var r=e("pragmate-ui/modal"),c=e("react"),o=e("../context")}}),j.set("./activities/multiple-choice/empty",{hash:2638999037,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MultipleChoiceEmptySpecs=function({toggleView:e,disabled:t,suggestionSpecs:a={}}){let{texts:n,activity:i,store:l,store:{globalTexts:r}}=(0,f.useActivityContext)(),[c,o]=m.default.useState(!1),s={disabled:t},u=()=>o(!c);return m.default.createElement(m.default.Fragment,null,m.default.createElement("header",{className:"activity__section-header"},m.default.createElement("h5",null,n.specs.title),m.default.createElement("div",{className:"actions"},m.default.createElement(v.Button,{variant:"link",bordered:!0,onClick:()=>e("form")},r.actions.manual),m.default.createElement(p.AIButton,{...s,onClick:u,variant:"link",ensure:!1},r.actions.generate))),m.default.createElement("span",null,n.activities.empty.description),c&&m.default.createElement(d.RefinementModal,{show:c,activity:i,activities:l.model.activities,showRelated:!0,owner:l.model.owner,credits:l.model.credits,onConsume:l.model.consumeCoins,onClose:u,title:n.refine.title,descripction:n.refine.description,onGenerate:e=>i.specs.generate(e,{...a})}))};var m=e("react"),d=e("@aimpact/ailearn-app/modules/management/refinament.code"),p=e("@aimpact/ailearn-app/components/ui"),f=e("../../context"),v=e("pragmate-ui/components")}}),j.set("./activities/multiple-choice/form/index",{hash:2693002642,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MultipleChoiceManualForm=function({onCancel:e,changeView:t}){let{values:n,texts:a,activity:i,store:{globalTexts:l}}=(0,p.useActivityContext)(),[r,c]=s.default.useState([]),o=s.default.useRef(null);return s.default.useEffect(()=>{r.length&&o.current.querySelectorAll(".dynamic-question-item__container").forEach((e,t)=>{r.includes(t)&&(e.classList.add("question--error"),e.addEventListener("focusin",()=>{e.classList.remove("question--error")}),globalThis.scrollTo({top:0,behavior:"smooth"}))})},[r]),s.default.createElement(s.default.Fragment,null,s.default.createElement(f.SpecsHeader,null),s.default.createElement("section",{ref:o,className:"activity__form activity__materials-form"},s.default.createElement(d.ErrorRenderer,{error:r.length?a.errors.wrongQuestions:""}),s.default.createElement(m.DynamicQuestionsForm,null),s.default.createElement("footer",{className:"section-actions__container border-top actions-end"},s.default.createElement(u.Button,{variant:"primary",bordered:!0,onClick:e},l.actions.cancel),s.default.createElement(u.Button,{variant:"primary",onClick:async()=>{let e=n.specs.questions,a=[];e.forEach((e,t)=>{(!e?.question||!e?.options.length||isNaN(e?.correctAnswer)||0<e.options.filter(e=>""===e.value).length)&&a.push(t)}),a.length?c(a):(await i.save(),t())},disabled:!!r.length},l.actions.save))))};var s=e("react"),u=e("pragmate-ui/components"),m=e("./questions"),d=e("@aimpact/ailearn-app/components/ui"),p=e("../../../context"),f=e("../../specs/header")}}),j.set("./activities/multiple-choice/form/questions/actions",{hash:3330609136,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicActions=function(){var e=(0,l.useActivityContext)().texts.multipleChoice.actions,t=(0,n.useDynamicListContext)().addItem;return a.default.createElement("section",{className:"section-actions__container actions-end no-m no-p stretch"},a.default.createElement(i.Button,{variant:"link",onClick:t},e.addQuestion))};var a=e("react"),n=e("pragmate-ui/dynamic-list"),i=e("pragmate-ui/components"),l=e("../../../../context")}}),j.set("./activities/multiple-choice/form/questions/answers/footer",{hash:4144017881,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicAnswersFooter=function({disabled:e,onAdd:t,showed:a}){let n=(0,o.useActivityContext)().texts.multipleChoice,i=(0,c.useDynamicListContext)().addItem;return l.default.createElement("section",{className:"flex-container flex-end"},l.default.createElement(r.Button,{title:n.actions.addAnswer,onClick:e=>{if(!a)return t(!0);i()},disabled:e},n.actions.addAnswer))};var l=e("react"),r=e("pragmate-ui/components"),c=e("pragmate-ui/dynamic-list"),o=e("../../../../../context")}}),j.set("./activities/multiple-choice/form/questions/answers/index",{hash:4190891243,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicAnswersForm=function({fetching:e,show:t,answers:a,onChange:n,disabled:i}){var[l,r]=c.default.useState(!1);return e?c.default.createElement("div",null,c.default.createElement(m.Spinner,{active:!0,variant:"primary"})):c.default.createElement(o.Provider,{name:"question-answers",className:"answer-questions-form__container",value:a,Item:s.DynamicQuestionAnswerItem,onChange:n},(t||l)&&c.default.createElement(o.List,{className:"dynamic-form"}),c.default.createElement(u.DynamicAnswersFooter,{showed:t||l,disabled:i,onAdd:r}))};var c=e("react"),o=e("pragmate-ui/dynamic-list"),s=e("./item"),u=e("./footer"),m=e("pragmate-ui/components")}}),j.set("./activities/multiple-choice/form/questions/answers/item",{hash:654092169,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicQuestionAnswerItem=function(a){let e=(0,d.useInput)(a.index).onKeyDown,{correct:n,value:t=""}=a.value,{values:i,setValues:l,removeItem:r}=(0,p.useDynamicListContext)(),c=(0,f.useActivityContext)().texts.multipleChoice,o="dynamic__icon selectable"+(n?" dynamic__icon--correct":"");return s.default.createElement("div",{className:"dynamic-field__item dynamic-field__item--answer"},s.default.createElement("div",{className:"drag-icon"},a.index+1,"."),s.default.createElement(u.Input,{type:"text",value:t,onKeyDown:e,onChange:e=>{a.setValue({value:e.target.value,correct:!!n})},placeholder:c.answers.placeholder}),s.default.createElement("section",{className:"item__actions"},s.default.createElement(m.IconButton,{icon:"circle-check",className:o,title:c.actions.markCorrect,onClick:e=>{var t=i.map((e,t)=>t===a.index?{...e,correct:!n}:{...e,correct:!1});l(t)}}),s.default.createElement(m.IconButton,{icon:"delete",className:"drag-bullet-point",title:c.actions.delete,onClick:()=>r(a.index)})))};var s=e("react"),u=e("pragmate-ui/form"),m=e("pragmate-ui/icons"),d=e("../hooks/use-input"),p=e("pragmate-ui/dynamic-list"),f=e("../../../../../context")}}),j.set("./activities/multiple-choice/form/questions/header",{hash:1340395178,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicHeader=function(){let{activity:a,texts:e,values:n,store:t}=(0,p.useActivityContext)(),i=(0,d.useDynamicListContext)().specs,l=e.multipleChoice.actions,[r,c]=s.default.useState(!1),o=()=>c(!r);return s.default.createElement("section",{className:"section-actions__container actions-end border-bottom"},s.default.createElement(m.AIButton,{variant:"link",onClick:o},l.generateQuestions),s.default.createElement(u.RefinementModal,{show:r,owner:t.model.owner,credits:t.model.credits,onConsume:t.model.consumeCoins,onClose:o,globalTexts:t.globalTexts,title:e.multipleChoice.modalQuestions.title,descripction:e.multipleChoice.modalQuestions.description,onGenerate:async({notes:t})=>{try{let e=(await a.specs.generate(t,{related:n.specs.related})).questions.map(({question:e,options:t,correct_answer:a})=>({question:e,options:t,correctAnswer:a}));i.setFetching(!0),globalThis.setTimeout(()=>{i.setFetching(!1),a.specs.set({questions:[...n.specs.questions,...e]})},100)}catch(e){console.log(e)}}}))};var s=e("react"),u=e("@aimpact/ailearn-app/modules/management/refinament.code"),m=e("@aimpact/ailearn-app/components/ui"),d=e("pragmate-ui/dynamic-list"),p=e("../../../../context")}}),j.set("./activities/multiple-choice/form/questions/hooks/use-input",{hash:4293506373,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.useInput=function(a){let{addItem:n,refs:t,removeItem:i,items:l}=(0,c.useDynamicListContext)(),r=e=>{globalThis.setTimeout(()=>t.current[e]?.querySelector("input").focus(),0)};return{onKeyDown:e=>{var t=e.currentTarget.value.trim();if("Tab"===e.key){if(e.shiftKey&&0<a)return t||i(a),r(a-1),void e.preventDefault();if(a<l.length-1)return void r(a+1);if(e.preventDefault(),!t)return;n(),globalThis.setTimeout(()=>{r(a+1)},0)}"Backspace"!==e.key||t||(e.preventDefault(),e.shiftKey&&0<a?(t||(i(a),r(a-2)),e.preventDefault()):0<a&&i(a))}}};var c=e("pragmate-ui/dynamic-list")}}),j.set("./activities/multiple-choice/form/questions/index",{hash:2547975199,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicQuestionsForm=function(){let{values:e,activity:t}=(0,u.useActivityContext)(),[a,n]=i.default.useState(!1);return a?i.default.createElement("div",null,i.default.createElement(s.Spinner,{active:!0,variant:"primary"})):i.default.createElement(l.Provider,{name:"questions",defaultValue:{question:""},draggable:!0,Item:r.DynamicQuestionItem,value:e.specs.questions,onChange:({currentTarget:e})=>{e=e.value.map(e=>({question:e.question,options:e.options,correctAnswer:e.correctAnswer}));t.specs.set({questions:[...e]})},specs:{setFetching:n}},i.default.createElement(o.DynamicHeader,null),i.default.createElement(l.List,{className:"dynamic-form dynamic-questions-form"}),i.default.createElement(c.DynamicActions,null))};var i=e("react"),l=e("pragmate-ui/dynamic-list"),r=e("./question"),c=e("./actions"),o=e("./header"),s=e("pragmate-ui/components"),u=e("../../../../context")}}),j.set("./activities/multiple-choice/form/questions/question",{hash:4083194930,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicQuestionItem=function(n){let e=(0,A.useInput)(n.index).onKeyDown,{texts:{multipleChoice:t},activity:i,values:l,store:a}=(0,j.useActivityContext)(),[r,c]=b.default.useState(!1),o=()=>c(!r),s=e=>{let a=n.value.correctAnswer;return e.map((e,t)=>({value:e,correct:t===a}))},u=n.value?.options?s(n.value.options):[],[m,d]=b.default.useState(u),p=(0,k.useDynamicListContext)().removeItem,f=n.value?.question??"",[v,y]=b.default.useState(!1),{owner:g,credits:h,consumeCoins:E}=a.model;return b.default.createElement("section",{className:"dynamic-question-item__container"},b.default.createElement("div",{className:"dynamic-field__item dynamic-question-item"},b.default.createElement("div",{className:"drag-icon"},n.index+1,"."),b.default.createElement(C.Input,{name:"question",value:f??"",onChange:e=>{n.setValue({question:e.target.value,options:m})},onKeyDown:e}),b.default.createElement("section",{className:"item__actions"},b.default.createElement(M.ProcessIconButton,{icon:"aiStars",disabled:!f||""===f,onClick:async()=>{let e=new S.PendingPromise;return o(),setTimeout(()=>{e.resolve()},1e3),e},title:t.actions.generateAnswers}),b.default.createElement(x.IconButton,{icon:"delete",className:"drag-bullet-point",onClick:e=>{e.stopPropagation(),e=p(n.index),i.specs.set({questions:e})},title:t.actions.delete}))),b.default.createElement(w.DynamicAnswersForm,{fetching:v,disabled:!n.value,show:m?.length,answers:m,onChange:({currentTarget:{value:e}})=>{var t=-1===(t=e.findIndex(e=>e.correct))?void 0:t,e={question:f,options:e.map(e=>e.value),correctAnswer:t};n.setValue(e)}}),b.default.createElement(_.RefinementModal,{owner:g,credits:h,onConsume:E,globalTexts:a.globalTexts,show:r,onClose:o,title:t.modalAnswers.title,descripction:t.modalAnswers.description,onGenerate:async({notes:e})=>{let t=await i.specs.generateAnswers({notes:e,question:f}),a=[...l.specs.questions];y(!0),globalThis.setTimeout(()=>{a[n.index].options=t,i.specs.set({questions:a}),d(s(t)),y(!1)},1e3)}}))};var b=e("react"),C=e("pragmate-ui/form"),x=e("pragmate-ui/icons"),_=e("@aimpact/ailearn-app/modules/management/refinament.code"),A=e("./hooks/use-input"),w=e("./answers"),k=e("pragmate-ui/dynamic-list"),M=e("@aimpact/ailearn-app/components/ui"),S=e("@beyond-js/kernel/core"),j=e("../../../../context")}}),j.set("./activities/multiple-choice/form/related-activity",{hash:1842988910,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.RelatedActivityField=function({related:e,updateErrors:t}){let{store:a,texts:{multipleChoice:n,errors:i},activity:l}=(0,u.useActivityContext)(),r=a.model.activities.items.filter(e=>"content-theory"===e.type).map(e=>({value:e.id,label:e.title})),c={value:"",label:n.related.independent};return o.default.createElement(o.default.Fragment,null,o.default.createElement("label",null,n.related.label),o.default.createElement(s.ReactSelect,{value:e,options:[c,...r],onChange:e=>{l.specs.set({related:e.target.value}),""===e.target.value||a.model.activities.get(e.target.value).materials.article?(t([]),l.specs.set({related:e.target.value})):t([i.NO_RELATED_ACTIVITY])}}))};var o=e("react"),s=e("pragmate-ui/form/react-select"),u=e("../../../context")}}),j.set("./activities/multiple-choice/index",{hash:1743411968,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MultipleChoiceActivity=function(){let{texts:e,activity:a}=(0,o.useActivityContext)(),[t,n]=r.useState(a.specs.empty()?"empty":"specs"),i=()=>{var e=a.specs.empty()?"empty":"specs";n(e)},l=((0,u.useBinder)([a],i,"activity.saved"),(0,u.useBinder)([a.specs],i,["specs.cleaned","specs.generated"]),a.specs.empty()&&"specs"===t?"empty":t);return r.createElement(r.Fragment,null,r.createElement(v.ActivityHeader,null),r.createElement("div",{className:"specs-label"},r.createElement("label",null," ",e.activities.description.label),r.createElement(c.ContentEditable,{name:"description",selector:"p",onSave:async({currentTarget:{name:e,value:t}})=>a.save({[e]:t}),placeholder:e.activities.description.placeholder,content:a.description})),r.createElement(m.ObjectiveField,null),r.createElement(s.ConditionalContainer,{condition:l,options:{specs:r.createElement(p.MultipleChoiceSpecs,{setView:n}),form:r.createElement(d.MultipleChoiceManualForm,{onCancel:()=>{a.specs.revert(),n("specs")},changeView:()=>n("specs")})},placeholder:r.createElement(f.MultipleChoiceEmptySpecs,{name:a.type,toggleView:e=>n(e)})}))};var r=e("react"),c=e("@aimpact/ailearn-app/components/ui"),o=e("../../context"),s=e("pragmate-ui/components"),u=e("@beyond-js/react-18-widgets/hooks"),m=e("../objective-field"),d=e("./form"),p=e("./specs"),f=e("./empty"),v=e("../../header")}}),j.set("./activities/multiple-choice/specs/answers",{hash:1788779777,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.QuestionAnswer=void 0;var n=e("pragmate-ui/icons"),i=e("react");t.QuestionAnswer=({item:e,correctAnswer:t,index:a})=>i.default.createElement("li",{className:"item-list--answer section-container "+("check"==(a=a===t?"check":"close")?"success-container":"incorrect-answer")},i.default.createElement("span",{className:"item-list-icon"},"check"==a&&i.default.createElement(n.Icon,{icon:a,className:"icon-xs"})),i.default.createElement("span",{className:"item-list__content"},e))}}),j.set("./activities/multiple-choice/specs/header",{hash:551076203,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpecsHeader=function({children:e,disabled:t,suggestionSpecs:a={}}){let{texts:n,activity:i,store:l,store:{globalTexts:r}}=(0,f.useActivityContext)(),[c,o]=m.default.useState(!1),s={disabled:!i.prepared||t},u=()=>o(!c);return m.default.createElement(m.default.Fragment,null,m.default.createElement("header",{className:"activity__section-header"},m.default.createElement("h5",null,n.specs.title),m.default.createElement("div",{className:"actions"},m.default.createElement(p.AIButton,{...s,onClick:u,variant:"link",ensure:!1},r.actions.generate))),e,c&&m.default.createElement(d.RefinementModal,{show:c,owner:l.model.owner,onConsume:l.model.consumeCoins,onClose:u,title:n.refine.title,descripction:n.refine.description,onGenerate:e=>i.specs.generate(e,{...a})}))};var m=e("react"),d=e("@aimpact/ailearn-app/modules/management/refinament.code"),p=e("@aimpact/ailearn-app/components/ui"),f=e("../../../context")}}),j.set("./activities/multiple-choice/specs/index",{hash:1430869190,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MultipleChoiceSpecs=function({setView:t}){let[,,]=f.default.useState(!1),{activity:a,editData:n,store:e,texts:i}=(0,v.useActivityContext)(),l=e.globalTexts.actions,[r,c]=f.default.useState(!1),[o,s]=f.default.useState(!1),u=((0,y.useBinder)([a.specs],()=>{var e=a.specs.getData();n({specs:e})},"specs.generated"),()=>c(!r)),m={onClick:u,disabled:a.specs.empty&&a.materials.empty},d={onClick:e=>s(!o),disabled:a.specs.empty&&a.materials.empty},p=o?l.cancel:l.order;return f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:"form__multiple-field"},f.default.createElement("header",{className:"activity__section-header"},f.default.createElement("h5",null,i.specs.title),f.default.createElement("div",{className:"actions flex-container flex-05"},f.default.createElement(h.Button,{variant:"link",onClick:e=>t("form"),icon:"pencil"},l.edit),f.default.createElement(h.Button,{variant:"link",...d,icon:"list"},p),f.default.createElement(h.Button,{variant:"link",...m,icon:"delete"},l.delete))),f.default.createElement(E.MultipleChoiceList,{reordering:o,toggle:()=>s(!o)})),f.default.createElement(g.DeleteActivityData,{show:r,onClose:u}))};var f=e("react"),v=e("../../../context"),y=e("@beyond-js/react-18-widgets/hooks"),g=e("../../delete-modal"),h=e("pragmate-ui/components"),E=e("./list")}}),j.set("./activities/multiple-choice/specs/list",{hash:1130532532,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MultipleChoiceList=function({reordering:e,toggle:t}){let{values:a,activity:n,store:i}=(0,p.useActivityContext)(),[l,r]=s.default.useState(a.specs.questions),[c,o]=s.default.useState(!1);return e?(e=async()=>{o(!0),await n.specs.set({questions:l}),await n.save(),o(!1),t()},s.default.createElement(s.default.Fragment,null,s.default.createElement(m.Reorder.Group,{values:l,onReorder:e=>{r(e),(e={...e.specs}).questions=[...l],n.specs.set(e)},className:"activity-list"},l.map(e=>s.default.createElement(m.Reorder.Item,{key:e.question,value:e},s.default.createElement(f.QuestionItemList,{data:e,as:"div",draggable:!0})))),s.default.createElement("section",{className:"section-actions__container actions-end"},s.default.createElement(d.Button,{variant:"primary",onClick:e,disabled:c},i.globalTexts.actions.save)))):s.default.createElement(u.List,{className:"activity-list",items:a.specs.questions,control:f.QuestionItemList})};var s=e("react"),u=e("pragmate-ui/list"),m=e("framer-motion"),d=e("pragmate-ui/components"),p=e("../../../context"),f=e("./question-item-list")}}),j.set("./activities/multiple-choice/specs/question-item-list",{hash:2044658730,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.QuestionItemList=function({data:e,as:t="li",draggable:a=!1}){let[n,,]=o.default.useState(!1),i=(0,s.useActivityContext)().texts,l=t;return o.default.createElement(l,{className:"subform__items"},o.default.createElement(u.CollapsibleContainer,{onToggle:()=>!n},o.default.createElement(u.CollapsibleHeader,null,o.default.createElement("h6",null,o.default.createElement(d.ConditionalContainer,{condition:a,ternary:!0,options:{true:o.default.createElement(r.Icon,{className:"item-list-icon",icon:"drag"}),false:o.default.createElement(r.Icon,{className:"item-list-icon",icon:"circle-check"})}}),o.default.createElement("span",{className:"item-list__content"},e.question))),o.default.createElement(u.CollapsibleContent,null,o.default.createElement(d.ConditionalContainer,{condition:!!e.options?.length,options:{true:o.default.createElement(c.List,{items:e.options,specs:{correctAnswer:e.correctAnswer},control:m.QuestionAnswer}),false:o.default.createElement("div",{className:"text-end text-danger"},i.multipleChoice.emptyOptions)}}))))};var r=e("pragmate-ui/icons"),c=e("pragmate-ui/list"),o=e("react"),s=e("../../../context"),u=e("pragmate-ui/collapsible"),m=e("./answers"),d=e("pragmate-ui/components")}}),j.set("./activities/objective-field",{hash:1628285344,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectiveField=function(){let{values:e,texts:t,activity:a}=(0,l.useActivityContext)();return n.createElement(n.Fragment,null,n.createElement("div",{className:"specs-label"},n.createElement("label",null,t.specs.objective.label),n.createElement(i.ContentEditable,{name:"objective",onSave:async({currentTarget:{value:e}})=>{a.specs.set({objective:e}),await a.save()},placeholder:t.specs.objective.placeholder,content:e.specs?.objective})))};var n=e("react"),i=e("@aimpact/ailearn-app/components/ui"),l=e("../context")}}),j.set("./activities/specs/base-spec",{hash:3313503426,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityBaseSpec=function({name:e}){let{texts:t,activity:a}=(0,l.useActivityContext)(),n=a.specs[e]??t.specs[e].placeholder;return i.default.createElement("div",{className:"specs-label"},i.default.createElement("label",{htmlFor:""},t.specs[e].label),i.default.createElement(r.ContentEditable,{name:e,onSave:async({target:{name:e,value:t}})=>{a.specs.set({[e]:t}),await a.save()},content:n},n))};var i=e("react"),l=e("../../context"),r=e("@aimpact/ailearn-app/components/ui")}}),j.set("./activities/specs/base-subspec",{hash:1868760248,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseSubspec=function({item:e}){return a.default.createElement("div",{className:"subform__items"},a.default.createElement("strong",{className:"capitalize"},e.name,": ")," ",a.default.createElement("span",null,e.value))};var a=e("react")}}),j.set("./activities/specs/dynamic-label",{hash:4152479464,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicLabelContainer=function({name:i}){let{activity:{specs:l},texts:e}=(0,o.useActivityContext)(),[t,a]=c.default.useState(!1),n=()=>a(!t),r=l[i]?.map((e,t)=>{var[a,n]=Object.keys(l.structure[i].fields);return{name:e[a],value:e[n]}});return c.default.createElement(c.default.Fragment,null,c.default.createElement("header",{className:"flex-container flex-space-between flex-vertical-center"},c.default.createElement("h6",null,e.specs[i].label),c.default.createElement(m.Icon,{icon:"edit",className:"icon-clickable",onClick:n})),c.default.createElement(d.ConditionalContainer,{condition:t,ternary:!0,options:{true:c.default.createElement(p.DynamicItemSpec,{onCancel:n,name:i,item:l[i]}),false:c.default.createElement(s.List,{className:"criteria__items-list",items:r,control:u.BaseSubspec})}}))};var c=e("react"),o=e("../../context"),s=e("pragmate-ui/list"),u=e("./base-subspec"),m=e("pragmate-ui/icons"),d=e("pragmate-ui/components"),p=e("./manual/dynamic-spec")}}),j.set("./activities/specs/empty",{hash:2271348337,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EmptySpecs=function({toggleView:e,disabled:t,suggestionSpecs:a={}}){let{texts:n,activity:i,store:l,store:{globalTexts:r}}=(0,f.useActivityContext)(),[c,o]=m.default.useState(!1),s={disabled:!i.prepared||t},u=()=>o(!c);return m.default.createElement(m.default.Fragment,null,m.default.createElement("header",{className:"activity__section-header"},m.default.createElement("h5",null,n.specs.title),m.default.createElement("div",{className:"actions"},m.default.createElement(v.Button,{variant:"link",bordered:!0,onClick:()=>e("manual")},r.actions.manual),m.default.createElement(p.AIButton,{...s,onClick:u,variant:"link",ensure:!1},r.actions.generate))),m.default.createElement("div",{className:"activity__empty-container"},m.default.createElement("span",{className:"activity--empty__description"},n.activities.empty.description)),c&&m.default.createElement(d.RefinementModal,{show:c,owner:l.model.owner,credits:l.model.credits,onConsume:l.model.consumeCoins,onClose:u,title:n.refine.title,descripction:n.refine.description,onGenerate:e=>i.specs.generate(e,{...a})}))};var m=e("react"),d=e("@aimpact/ailearn-app/modules/management/refinament.code"),p=e("@aimpact/ailearn-app/components/ui"),f=e("../../context"),v=e("pragmate-ui/components")}}),j.set("./activities/specs/header",{hash:2924046515,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpecsHeader=function({children:e,disabled:t,suggestionSpecs:a={}}){let{texts:n,activity:i,store:l,store:{globalTexts:r}}=(0,f.useActivityContext)(),[c,o]=m.default.useState(!1),s={disabled:!i.prepared||t},u=()=>o(!c);return m.default.createElement(m.default.Fragment,null,m.default.createElement("header",{className:"activity__section-header"},m.default.createElement("h5",null,n.specs.title),m.default.createElement("div",{className:"actions"},m.default.createElement(p.AIButton,{...s,onClick:u,variant:"link",ensure:!1},r.actions.generate))),e,c&&m.default.createElement(d.RefinementModal,{show:c,owner:l.model.owner,onConsume:l.model.consumeCoins,onClose:u,title:n.refine.title,descripction:n.refine.description,onGenerate:e=>i.specs.generate(e,{...a})}))};var m=e("react"),d=e("@aimpact/ailearn-app/modules/management/refinament.code"),p=e("@aimpact/ailearn-app/components/ui"),f=e("../../context")}}),j.set("./activities/specs/manual/dynamic-spec",{hash:4290850893,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicItemSpec=function({onCancel:e,name:t}){var a=(0,l.useActivityContext)().activity.specs,{processing:e,actions:n}=(0,o.useForm)(e);return i.default.createElement(i.default.Fragment,null,i.default.createElement(r.DynamicContainer,{name:t,data:a.structure[t]}),i.default.createElement(c.ManualFormFooter,{onSave:n.onSave,onCancel:n.onCancel,processing:e}))};var i=e("react"),l=e("../../../context"),r=e("./dynamic"),c=e("./footer"),o=e("./use-form")}}),j.set("./activities/specs/manual/dynamic",{hash:571613,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicContainer=a;var o=e("react"),s=e("@aimpact/ailearn-app/components/dynamic-field"),t=e("pragmate-ui/form"),u=e("../../../context");let m={input:t.Input,textarea:t.Textarea,radio:t.Radio,checkbox:t.Checkbox,select:t.Select,array:a};function a({name:t,data:i}){let{activity:{specs:a},texts:e}=(0,u.useActivityContext)();if(!i.hasOwnProperty("fields"))return console.warn("DynamicContainer: no fields found on "+t),null;var n=Object.keys(i.fields),l=a[t]||[];let r={},c=e.specs[t];return n=n.map((e,t)=>{var a=m[i.fields[e]],n={label:c[e].label,placeholder:c[e].placeholder};return r[e]="",o.default.createElement(a,{...n,key:e+"-"+t,name:e,data:e})}),l.length||l.push(r),o.default.createElement(o.default.Fragment,null,o.default.createElement(s.DynamicField,{name:t,value:l,onChange:e=>{e=e.currentTarget.value,a.set({[t]:e})}},n))}}}),j.set("./activities/specs/manual/footer",{hash:2408792289,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ManualFormFooter=function({processing:e,onCancel:t,onSave:a}){var n=(0,l.useActivityContext)().store.globalTexts;return i.default.createElement("footer",{className:"flex-container flex-end mt-30 gap-05"},i.default.createElement(r.Button,{variant:"primary",bordered:!0,onClick:t,disabled:e},n.actions.cancel),i.default.createElement(r.Button,{variant:"primary",onClick:a,disabled:e},n.actions.save))};var i=e("react"),l=e("../../../context"),r=e("pragmate-ui/components")}}),j.set("./activities/specs/manual/index",{hash:2762557426,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ManualMaterialForm=function({toggleView:e}){let{texts:i,activity:a,store:t}=(0,m.useActivityContext)(),{}=t,{processing:n,actions:l}=(0,d.useForm)(e),r=a.specs,c=Object.keys(r.structure),o=e=>{var{name:e,value:t}=e.currentTarget;a.specs.set({[e]:t})},s=c.map((e,t)=>{i.specs[e]||console.warn("ManualMaterialForm: no field texts found for "+e);var{label:a,placeholder:n}=i.specs[e],a={label:a,placeholder:n,value:r[e]??""};return"object"==typeof r.structure[e]&&"array"!==r.structure[e].type?(n=v[r.structure[e].type],u.default.createElement(n,{key:e+"-"+t,name:e,...a,onChange:o})):"string"==typeof r.structure[e]?(n=v[r.structure[e]],u.default.createElement(n,{key:e+"-"+t,name:e,...a,onChange:o})):(n=v[r.structure[e].type],u.default.createElement(n,{variant:"floating",key:e+"-"+t,name:e,data:r.structure[e],...a}))});return u.default.createElement(u.default.Fragment,null,u.default.createElement(f.SpecsHeader,null),u.default.createElement("div",{className:"activity__form"},u.default.createElement("div",null,s),u.default.createElement(p.ManualFormFooter,{onSave:l.onSave,onCancel:l.onCancel,processing:n})))};var u=e("react"),m=e("../../../context"),t=e("pragmate-ui/form"),a=e("./dynamic"),d=e("./use-form"),p=e("./footer"),f=e("../header");let v={input:t.Input,textarea:t.Textarea,radio:t.Radio,checkbox:t.Checkbox,select:t.Select,array:a.DynamicContainer}}}),j.set("./activities/specs/manual/use-form",{hash:56153088,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.useForm=function(e){let[t,a]=i.default.useState(!1),{activity:n,store:{}}=(0,l.useActivityContext)();return{processing:t,setProcessing:a,actions:{onSave:async()=>{try{a(!0),await n.save(),a(!1),e("specs")}catch(e){console.error(e)}},onCancel:()=>{n.specs.revert(),e("specs")}}}};var i=e("react"),l=e("../../../context")}}),j.set("./activities/specs/specs",{hash:145476041,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Specs=function(){let[e,t]=m.default.useState(!1),{activity:a,activity:{specs:n},texts:i,store:{globalTexts:l}}=(0,d.useActivityContext)(),r=()=>t(!e),c=n.getProperties(),o=Object.keys(n.structure),s={onClick:r,disabled:a.specs.empty()},u=o.map((e,t)=>"string"==typeof n.structure[e]||"array"!==n.structure[e].type?m.default.createElement(f.ActivityBaseSpec,{key:e+"-"+t,name:e}):m.default.createElement(p.DynamicLabelContainer,{key:e+"-"+t,name:e,data:c}));return m.default.createElement(m.default.Fragment,null,m.default.createElement("header",{className:"activity__section-header"},m.default.createElement("h5",null,i.specs.title),m.default.createElement("div",{className:"actions flex-container flex-05"},m.default.createElement(v.Button,{variant:"link",...s,icon:"delete"},l.actions.delete))),u,m.default.createElement(y.DeleteActivityData,{show:e,onClose:r}))};var m=e("react"),d=e("../../context"),p=e("./dynamic-label"),f=e("./base-spec"),v=e("pragmate-ui/components"),y=e("../../components/delete-modal")}}),j.set("./activities/spoken/index",{hash:3467716652,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpokenActivity=function(){let{texts:e,activity:a}=(0,s.useActivityContext)(),[t,n]=c.useState(a.specs.empty()?"empty":"specs"),i=e=>n(e),l=()=>{var e=a.specs.empty()?"empty":"specs";n(e)},r=((0,f.useBinder)([a],l,"activity.saved"),(0,f.useBinder)([a.specs],l,"specs.cleaned"),"specs"===t&&a.specs.empty()?"empty":t);return c.createElement(c.Fragment,null,c.createElement(y.ActivityHeader,null),c.createElement("div",{className:"specs-label"},c.createElement("label",null," ",e.activities.description.label),c.createElement(o.ContentEditable,{name:"description",selector:"p",onSave:async({currentTarget:{name:e,value:t}})=>{a.save({[e]:t})},placeholder:e.activities.description.placeholder,content:a.description})),c.createElement(v.ObjectiveField,null),c.createElement(d.ConditionalContainer,{condition:r,options:{specs:c.createElement(p.Specs,null),manual:c.createElement(m.ManualMaterialForm,{toggleView:i})},placeholder:c.createElement(u.EmptySpecs,{name:a.type,toggleView:i})}))};var c=e("react"),o=e("@aimpact/ailearn-app/components/ui"),s=e("../../context"),u=e("../specs/empty"),m=e("../specs/manual"),d=e("pragmate-ui/components"),p=e("../specs/specs"),f=e("@beyond-js/react-18-widgets/hooks"),v=e("../objective-field"),y=e("../../header")}}),j.set("./components/ai-button",{hash:2396306767,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AIButton=function({children:e,onClick:t,ensure:a=!0,...n}){return a=a?()=>o.LayoutBroker.ensureCredits(t):t,i.default.createElement(r.Button,{...n,icon:l.ICONS.aiStars,onClick:a},e)},t.AIIconButton=function({children:e,onClick:t,ensure:a=!0,...n}){return a=a?()=>o.LayoutBroker.ensureCredits(t):t,i.default.createElement(c.IconButton,{...n,icon:l.ICONS.aiStars,onClick:a},e)};var i=e("react"),l=e("@aimpact/ailearn-app/components/icons"),r=e("pragmate-ui/components"),c=e("pragmate-ui/icons"),o=e("@aimpact/ailearn-app/main-layout.widget")}}),j.set("./components/cancel-modal",{hash:2305831071,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CancelChangesModal=function({show:e,onClose:t}){let{store:a,texts:n,clearData:i,store:{globalTexts:l}}=(0,o.useActivityContext)();return!!e&&c.default.createElement(r.ConfirmModal,{show:!0,title:n.modal.cancel.title,text:n.modal.cancel.description,onClose:t,onCancel:t,btnConfirm:{label:l.actions.confirm},btnCancel:{label:l.actions.cancel},onConfirm:()=>{i(),a.editActivity(void 0),t()}})};var r=e("pragmate-ui/modal"),c=e("react"),o=e("../context")}}),j.set("./components/delete-modal",{hash:3566858788,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteActivityData=function({show:e,onClose:t}){let[,a]=c.default.useState(!1),{texts:{activities:n},activity:i,store:{globalTexts:{actions:l}}}=(0,o.useActivityContext)();return e?c.default.createElement(c.default.Fragment,null,c.default.createElement(r.ConfirmModal,{show:!0,onClose:t,onConfirm:e=async()=>{try{a(!0),t(),i.specs.clear(),await i.save()}catch(e){console.error(e)}finally{a(!1)}},btnConfirm:{label:l.confirm},btnCancel:{label:l.cancel},onCancel:t},c.default.createElement("h3",null,n.deleteModal.title),c.default.createElement("p",null,n.deleteModal.description))):null};var r=e("pragmate-ui/modal"),c=e("react"),o=e("../context")}}),j.set("./components/generation-modal/activity-modal",{hash:931967617,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ActivitySuggestionsModal=function({show:e,type:a,onClose:n}){let{texts:t,activity:i,editData:l,store:{globalTexts:r}}=(0,y.useActivityContext)(),[c,o]=m.default.useState(!1),[s,u]=m.default.useState({observations:"",removeItems:!1,type:a});return!!e&&m.default.createElement(d.Modal,{closeBackdrop:!(e={onChange:e=>{u({...s,[e.currentTarget.name]:e.currentTarget.value})},onClick:async e=>{o(!0);var t=await i.generate(a,s.observations);l({...t,updated:!1}),n(),setTimeout(()=>o(!1),2e3)}}),show:!0,className:"refine-modal",onClose:n},m.default.createElement(p.Form,null,m.default.createElement("header",null,m.default.createElement("h3",null,t.refine.title),m.default.createElement("span",null,t.refine.description)),m.default.createElement(p.Textarea,{label:t.refine.textarea.label,name:"observations",value:s.observations,onChange:e.onChange,placeholder:t.refine.textarea.placeholder})),m.default.createElement("footer",{className:"flex-container flex-end mt-15"},m.default.createElement(v.AIButton,{variant:"primary",onClick:e.onClick},r.actions.generate)),m.default.createElement(f.ProcessContainer,{fetching:c}))};var m=e("react"),d=e("pragmate-ui/modal"),p=e("pragmate-ui/form"),f=e("@aimpact/ailearn-app/components/ui"),v=e("../ai-button"),y=e("../../context")}}),j.set("./components/generation-modal/breadcrumb",{hash:1165703704,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.BreadCrumbHeader=function(){let{store:e,texts:t,values:a,store:{globalTexts:n}}=(0,c.useActivityContext)(),[i,l]=r.default.useState(!1);return r.default.createElement("div",{className:"internal-breadcrumb "},r.default.createElement(o.Link,{className:"back-link",onClick:()=>{a.updated?l(!0):(e.editActivity(void 0),s.routing.back())}},r.default.createElement(u.Icon,{icon:"backArrow",className:"circle"}),r.default.createElement(m.AppIcon,{icon:"module"}),r.default.createElement("span",null,n.actions.back," ",t.activities.module)),i&&r.default.createElement(d.ConfirmModal,{onConfirm:()=>{l(!1),e.editActivity(void 0),s.routing.back()},onCancel:()=>l(!1)},r.default.createElement("div",null,t.manual.cancel)))};var r=e("react"),c=e("../../context"),o=e("pragmate-ui/components"),s=e("@beyond-js/kernel/routing"),u=e("pragmate-ui/icons"),m=e("@aimpact/ailearn-app/components/icons"),d=e("pragmate-ui/modal")}}),j.set("./components/generation-modal/materials",{hash:3877757081,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialsSuggestionsModal=function({type:t,onClose:a}){let{texts:e,activity:n,store:{globalTexts:i}}=(0,v.useActivityContext)(),[l,r]=u.default.useState(!1),[c,o]=u.default.useState(""),s={onChange:e=>{o(e.currentTarget.value)},onClick:async e=>{r(!0),await n.materials.generate(t,c),a(),setTimeout(()=>{r(!1)},2e3)}};return u.default.createElement(m.Modal,{closeBackdrop:!1,show:!0,className:"refine-modal",onClose:a},u.default.createElement(d.Form,null,u.default.createElement("header",null,u.default.createElement("h3",null,e.refine.title),u.default.createElement("span",null,e.refine.description)),u.default.createElement(d.Textarea,{label:e.refine.textarea.label,name:"notes",value:c,onChange:s.onChange,placeholder:e.refine.textarea.placeholder})),u.default.createElement("footer",{className:"flex-container flex-end mt-15"},u.default.createElement(f.AIButton,{variant:"primary",onClick:s.onClick},i.actions.generate)),u.default.createElement(p.ProcessContainer,{fetching:l}))};var u=e("react"),m=e("pragmate-ui/modal"),d=e("pragmate-ui/form"),p=e("@aimpact/ailearn-app/components/ui"),f=e("../ai-button"),v=e("../../context")}}),j.set("./components/generation-modal/specs-modal",{hash:3747141589,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpecsSuggestionsModal=function({onClose:e,suggestionSpecs:l={}}){let{texts:r,activity:c,editData:o,store:{globalTexts:t}}=(0,h.useActivityContext)(),[a,s]=p.default.useState(!1),[u,n]=p.default.useState(""),[i,m]=p.default.useState(""),d={onChange:e=>{n(e.currentTarget.value)},onClick:async e=>{try{s(!0);var t,a=await c.specs.generate(u,{...l});a.error?(m(([n,i=[]]=[a.error,a.fields],n=r.errors?.[n]?n:"default",i.length?r.errors[n]+" "+i:r.errors[n])),s(!1)):(t=c.specs.getData(),o({specs:t}),setTimeout(()=>{s(!1)},1e3))}catch(e){console.error(99,e,e.message),m("default")}var n,i}};return p.default.createElement(f.Modal,{closeBackdrop:!1,show:!0,className:"refine-modal",onClose:e},p.default.createElement("header",null,p.default.createElement("h3",null,r.refine.title),p.default.createElement("span",null,r.refine.description)),p.default.createElement(v.Form,null,p.default.createElement(y.ErrorRenderer,{texts:r,error:i}),p.default.createElement(v.Textarea,{label:r.refine.textarea.label,name:"notes",value:u,onChange:d.onChange,placeholder:r.refine.textarea.placeholder})),p.default.createElement("footer",{className:"flex-container flex-end mt-15"},p.default.createElement(g.AIButton,{variant:"primary",onClick:d.onClick},t.actions.generate)),p.default.createElement(y.ProcessContainer,{fetching:a}))};var p=e("react"),f=e("pragmate-ui/modal"),v=e("pragmate-ui/form"),y=e("@aimpact/ailearn-app/components/ui"),g=e("../ai-button"),h=e("../../context")}}),j.set("./components/generation-modal/suggestions-modal",{hash:2815882905,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SuggestionModal=function({type:e,onClose:t}){let{texts:a,activity:n,store:{globalTexts:i}}=(0,v.useActivityContext)(),[l,r]=u.default.useState(!1),[c,o]=u.default.useState({observations:"",removeItems:!1,type:e}),s={onChange:e=>{o({...c,[e.currentTarget.name]:e.currentTarget.value})},onClick:async e=>{r(!0),await n.specs.generate(c.observations),t(),setTimeout(()=>{r(!1)},2e3)}};return u.default.createElement(m.Modal,{closeBackdrop:!1,show:!0,className:"refine-modal",onClose:t},u.default.createElement(d.Form,null,u.default.createElement("header",null,u.default.createElement("h3",null,a.refine.title),u.default.createElement("span",null,a.refine.description)),u.default.createElement(d.Textarea,{label:a.refine.textarea.label,name:"observations",value:c.observations,onChange:s.onChange,placeholder:a.refine.textarea.placeholder})),u.default.createElement("footer",{className:"flex-container flex-end mt-15"},u.default.createElement(f.AIButton,{variant:"primary",onClick:s.onClick},i.actions.generate)),u.default.createElement(p.ProcessContainer,{fetching:l}))};var u=e("react"),m=e("pragmate-ui/modal"),d=e("pragmate-ui/form"),p=e("@aimpact/ailearn-app/components/ui"),f=e("../ai-button"),v=e("../../context")}}),j.set("./components/language-field",{hash:4219818305,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageField=function(){let{texts:t,store:a,activity:n}=(0,o.useActivityContext)(),[,i]=(t.languages.select.placeholder,r.default.useState(n.language)),e=["en","es"].map(e=>({value:e,label:t.languages[e]})),l={isDisabled:a.saved};return r.default.createElement(r.default.Fragment,null,r.default.createElement("label",{htmlFor:""},t.languages.select.label),r.default.createElement(c.ReactSelect,{value:n.language,name:"audience",options:e,onChange:async e=>{i(e.currentTarget.value),await n.set({language:e.currentTarget.value}),await a.save()},...l}))};var r=e("react"),c=e("pragmate-ui/form/react-select"),o=e("../context")}}),j.set("./components/select-activity",{hash:3390676443,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectActivity=function({values:t,setValues:e}){let{activity:a,store:n}=(0,o.useActivityContext)(),i={value:"",label:"Select"},l=[];n.model.activities.items.forEach(e=>{e.id!==a.id&&(e.id===t.specs.activityId&&(i={value:e.id,label:e.title}),l.push({value:e.id,label:e.title}))});return r.default.createElement("label",{htmlFor:"",className:"help-info"},"Is this activity based on another?",r.default.createElement(c.ReactSelect,{onChange:t=>{e(e=>({...e,specs:{...e.specs,activityId:t.target.value}}))},defaultValue:i,options:[i,...l]}))};var r=e("react"),c=e("pragmate-ui/form/react-select"),o=e("../context")}}),j.set("./context",{hash:3218830360,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.useActivityContext=t.ActivityContext=void 0;var a=e("react");let n=t.ActivityContext=a.default.createContext({});t.useActivityContext=()=>a.default.useContext(n)}}),j.set("./header",{hash:1037584266,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityHeader=function({}){let{activity:t,texts:e}=(0,s.useActivityContext)(),[a,n]=c.default.useState(!1),[i,l]=c.default.useState({src:t.picture,date:Date.now()}),r="header-activity__container header-activity__container--"+t.type;return(0,p.useBinder)([t],()=>l({src:t.picture,date:Date.now()}),"image.generated"),c.default.createElement("section",{className:"page-edition-section-header"},c.default.createElement(m.BreadCrumbHeader,null),c.default.createElement("header",{className:r},c.default.createElement(d.CoverImage,{title:e.picture.title,description:e.picture.description,suggestions:t.pictureSuggestions,entity:"activity",picture:i.src+"?size=sm&"+Date.now(),onGenerate:e=>t.generatePicture(e)}),c.default.createElement("div",{className:"header__title-container"},c.default.createElement(o.ContentEditable,{className:"inline-control",name:"title",as:"h3",onSave:async e=>{e={title:e.target.value},await t.save(e)},content:t.title,placeholder:e.form.title})),c.default.createElement("div",{className:"flex-container header__icons"},c.default.createElement(v.ActivityLanguage,null),c.default.createElement(f.AppIcon,{className:"activiy-icon",icon:t.type}))),c.default.createElement(u.ActivitySuggestionsModal,{show:a,type:t.type,onClose:()=>n(!a)}))};var c=e("react"),o=e("@aimpact/ailearn-app/components/ui"),s=e("./context"),u=e("./components/generation-modal/activity-modal"),m=e("./components/generation-modal/breadcrumb"),d=e("@aimpact/ailearn-app/components/cover-image.code"),p=e("@beyond-js/react-18-widgets/hooks"),f=e("@aimpact/ailearn-app/components/icons"),v=e("./language")}}),j.set("./index",{hash:1686428413,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleActivityForm=function({store:e,activity:t}){let[a,n]=c.default.useState(t.getProperties()),[i,l]=(0,s.useTexts)(u.module.specifier),r=t.type;return(0,s.useBinder)([t],()=>n({...t.getProperties()}),"properties.changed"),i?(e={store:e,activity:t,texts:l,values:a,setValues:n},c.default.createElement(m.ActivityContext.Provider,{value:e},c.default.createElement(o.PageContainer,{className:"page-activity-container activity-container--"+t.type},c.default.createElement(d.ConditionalContainer,{condition:r,options:{"multiple-choice":c.default.createElement(y.MultipleChoiceActivity,null),debate:c.default.createElement(f.DebateActivity,null),"character-talk":c.default.createElement(v.CharacterTalkActivity,null),spoken:c.default.createElement(g.SpokenActivity,null),"content-theory":c.default.createElement(p.ContentTheoryActivity,null)},placeholder:c.default.createElement(c.default.Fragment,null,"Nada que renderizar")})))):c.default.createElement(d.Spinner,{active:!0})};var c=e("react"),o=e("@aimpact/ailearn-app/components/ui"),s=e("@beyond-js/react-18-widgets/hooks"),u=e("beyond_context"),m=e("./context"),d=e("pragmate-ui/components"),p=e("./activities/content-theory"),f=e("./activities/debate"),v=e("./activities/character-talk"),y=e("./activities/multiple-choice"),g=e("./activities/spoken")}}),j.set("./interface",{hash:792411869,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})}}),j.set("./language",{hash:1587417072,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityLanguage=function(){let{texts:t,store:a,activity:n}=(0,f.useActivityContext)(),[i,l]=(t.languages.select.placeholder,d.default.useState(n.language)),[e,r]=d.default.useState(!1),[c,o]=d.default.useState(!1),s=["en","es"].map(e=>({value:e,label:t.languages[e]})),u=async e=>{o(!0),n.set({language:i}),await a.save(),o(!1),r(!1)},m=()=>r(!e);return d.default.createElement(d.default.Fragment,null,d.default.createElement(v.Image,{className:"activity__language",src:{en:"/assets/english.png",es:"/assets/spanish.png"}[n.language],alt:"language",onClick:m}),e&&d.default.createElement(y.Modal,{show:!0,onClose:m},d.default.createElement(h.Form,{onSubmit:u},d.default.createElement("label",{htmlFor:""},t.languages.select.label),d.default.createElement(p.ReactSelect,{value:i,name:"language",options:s,onChange:async e=>{l(e.currentTarget.value)}}),d.default.createElement("div",{className:"actions"},d.default.createElement(g.Button,{variant:"primary",onClick:u,disabled:c},a.globalTexts.actions.save)))))};var d=e("react"),p=e("pragmate-ui/form/react-select"),f=e("./context"),v=e("pragmate-ui/image"),y=e("pragmate-ui/modal"),g=e("pragmate-ui/components"),h=e("pragmate-ui/form")}}),j.set("./save-button",{hash:520994083,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SaveButton=function({saved:t=!1,disabled:e,callback:a}){let{values:n,editData:i,store:l,activity:r}=(0,s.useActivityContext)(),c={disabled:!n.updated||e,onClick:async e=>{e.stopPropagation(),t||(await l.model.activities.map.get(r.id).set(n),await r.set(n),l.save(),i({updated:!1})),a&&a()}};return o.default.createElement(u.Button,{variant:"primary",...c},l.globalTexts.actions.save)};var o=e("react"),s=e("./context"),u=e("pragmate-ui/components")}}),S.exports.descriptor=[{im:"./components/ai-button",from:"AIButton",name:"AIButton"},{im:"./components/ai-button",from:"AIIconButton",name:"AIIconButton"},{im:"./header",from:"ActivityHeader",name:"ActivityHeader"},{im:"./index",from:"ModuleActivityForm",name:"ModuleActivityForm"}],S.exports.process=function({require:e,prop:t,value:a}){!e&&"AIButton"!==t||n("AIButton",e?e("./components/ai-button").AIButton:a),!e&&"AIIconButton"!==t||n("AIIconButton",e?e("./components/ai-button").AIIconButton:a),!e&&"ActivityHeader"!==t||n("ActivityHeader",e?e("./header").ActivityHeader:a),!e&&"ModuleActivityForm"!==t||n("ModuleActivityForm",e?e("./index").ModuleActivityForm:a)},n("__beyond_pkg",S),n("hmr",new function(){this.on=(e,t)=>S.hmr.on(e,t),this.off=(e,t)=>S.hmr.off(e,t)}),S.initialise(j)}}});