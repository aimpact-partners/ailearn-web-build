System.register(["@beyond-js/kernel@0.1.9/bundle","@beyond-js/kernel@0.1.9/styles","react@18.2.0","@aimpact/ailearn-app@0.0.32/components/icons","pragmate-ui@0.1.1/components","pragmate-ui@0.1.1/icons","@aimpact/ailearn-app@0.0.32/coins-layout.widget","pragmate-ui@0.1.1/modal","pragmate-ui@0.1.1/form","@aimpact/ailearn-app@0.0.32/components/ui","@beyond-js/kernel@0.1.9/routing","pragmate-ui@0.1.1/form/react-select","@beyond-js/react-18-widgets@1.1.2/hooks","pragmate-ui@0.1.1/list","@aimpact/ailearn-app@0.0.32/config","@aimpact/chat-sdk@1.0.0/widgets/markdown","pragmate-ui@0.1.1/tabs","pragmate-ui@0.1.1/empty","@aimpact/ailearn-app@0.0.32/components/ui/bullet-points-input","pragmate-ui@0.1.1/chips","@beyond-js/kernel@0.1.9/core","@aimpact/ailearn-app@0.0.32/components/cover-image.code"],function(n,e){"use strict";var t,a,l,r,o,c,s,i,u,d,m,p,f,v,h,y,g,b,E,x,C,M,_,k;return n({AIButton:void 0,AIIconButton:void 0,AudioPlayer:void 0,OptionAnswers:void 0,ItemOption:void 0,ActivityHeader:void 0,ModuleActivityForm:void 0}),{setters:[function(e){t=e},function(e){a=e},function(e){l=e},function(e){r=e},function(e){o=e},function(e){c=e},function(e){s=e},function(e){i=e},function(e){u=e},function(e){d=e},function(e){m=e},function(e){p=e},function(e){f=e},function(e){v=e},function(e){h=e},function(e){y=e},function(e){g=e},function(e){b=e},function(e){E=e},function(e){x=e},function(e){C=e},function(e){M=e}],execute:function(){k=t.Bundle,(_=new k({module:{vspecifier:"@aimpact/ailearn-app@0.0.32/modules/management/activity",multibundle:!0},type:"code"},e.meta.url).package()).dependencies.update([["@beyond-js/kernel/styles",a],["react",l],["@aimpact/ailearn-app/components/icons",r],["pragmate-ui/components",o],["pragmate-ui/icons",c],["@aimpact/ailearn-app/coins-layout.widget",s],["pragmate-ui/modal",i],["pragmate-ui/form",u],["@aimpact/ailearn-app/components/ui",d],["@beyond-js/kernel/routing",m],["pragmate-ui/form/react-select",p],["@beyond-js/react-18-widgets/hooks",f],["pragmate-ui/list",v],["@aimpact/ailearn-sdk/config",h],["@aimpact/chat-sdk/widgets/markdown",y],["pragmate-ui/tabs",g],["pragmate-ui/empty",b],["@aimpact/ailearn-app/components/ui/bullet-points-input",E],["pragmate-ui/chips",x],["@beyond-js/kernel/core",C],["@aimpact/ailearn-app/components/cover-image.code",M]]),brequire("@beyond-js/kernel/styles").styles.register("@aimpact/ailearn-app@0.0.32/modules/management/activity.code"),(k=new Map).set("./components/ai-button",{hash:3669703153,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AIButton=function({children:e,onClick:t,...a}){return n.default.createElement(r.Button,{...a,icon:l.ICONS.aiStars,onClick:()=>c.LayoutBroker.ensureCredits(t)},e)},t.AIIconButton=function({children:e,onClick:t,...a}){return n.default.createElement(o.IconButton,{...a,icon:l.ICONS.aiStars,onClick:()=>c.LayoutBroker.ensureCredits(t)},e)};var n=e("react"),l=e("@aimpact/ailearn-app/components/icons"),r=e("pragmate-ui/components"),o=e("pragmate-ui/icons"),c=e("@aimpact/ailearn-app/coins-layout.widget")}}),k.set("./components/cancel-modal",{hash:1641415938,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CancelChangesModal=function({show:e,onClose:t}){const{store:a,texts:n,clearData:l}=(0,c.useModuleContext)();return!!e&&o.default.createElement(r.ConfirmModal,{show:!0,title:n.modal.cancel.title,text:n.modal.cancel.description,onClose:t,onCancel:t,btnConfirm:{label:n.actions.confirm},btnCancel:{label:n.actions.cancel},onConfirm:()=>{l(),a.editActivity=void 0,t()}})};var r=e("pragmate-ui/modal"),o=e("react"),c=e("../context")}}),k.set("./components/content-editable",{hash:2547633096,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ContentEditable=void 0;var d=e("react"),m=e("pragmate-ui/icons");t.ContentEditable=({name:t,selector:e="div",className:a,children:n,onSave:l})=>{const[r,o]=(0,d.useState)(!1),c=(0,d.useRef)(null);(0,d.useEffect)(()=>{"string"==typeof n&&c.current&&(c.current.textContent=n)},[n]);var s=r?"save":"edit",i=r?"pui-editable-selector":"",u=r?async e=>{try{await l({name:t,value:c.current?.textContent}),o(!1)}catch(e){console.error(e)}}:()=>{o(!r),setTimeout(()=>{var e,t,a=c.current;a&&(e=document.createRange(),t=globalThis.getSelection(),e.selectNodeContents(a),e.collapse(!1),t?.removeAllRanges(),t?.addRange(e),a.focus())},0)};return d.default.createElement("div",{className:"pui-content-editable"+(a?" "+a:"")},d.default.createElement(e,{ref:c,className:i,contentEditable:r,suppressContentEditableWarning:!0}),d.default.createElement(m.IconButton,{icon:s,onClick:u}))}}}),k.set("./components/generation-modal/activity-modal",{hash:492044030,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ActivitySuggestionsModal=function({show:e,type:a,onClose:n}){const{texts:t,activity:l,editData:r}=(0,v.useModuleContext)(),[o,c]=u.default.useState(!1),[s,i]=u.default.useState({observations:"",removeItems:!1,type:a});return!!e&&(e={onChange:e=>{i({...s,[e.currentTarget.name]:e.currentTarget.value})},onClick:async e=>{c(!0);var t=await l.generate(a,s.observations);r({...t,updated:!1}),n(),setTimeout(()=>c(!1),2e3)}},u.default.createElement(d.Modal,{show:!0,className:"refine-modal",onClose:n},u.default.createElement(m.Form,null,u.default.createElement("header",null,u.default.createElement("h3",null,t.refine.title),u.default.createElement("span",null,t.refine.description)),u.default.createElement(m.Textarea,{label:t.refine.textarea.label,name:"observations",value:s.observations,onChange:e.onChange,placeholder:t.refine.textarea.placeholder})),u.default.createElement("footer",{className:"flex-container flex-end mt-15"},u.default.createElement(f.AIButton,{variant:"primary",onClick:e.onClick},t.actions.generate)),u.default.createElement(p.ProcessContainer,{fetching:o})))};var u=e("react"),d=e("pragmate-ui/modal"),m=e("pragmate-ui/form"),p=e("@aimpact/ailearn-app/components/ui"),f=e("../ai-button"),v=e("../../context")}}),k.set("./components/generation-modal/breadcrumb",{hash:3309774354,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.BreadCrumbHeader=function(){const{activity:e,store:t,texts:a}=(0,l.useModuleContext)();return n.default.createElement("div",{className:"internal-breadcrumb"},n.default.createElement(r.Link,{className:"back-link",onClick:()=>{t.editActivity=void 0,t.setBreadcrumb(),o.routing.back()}},n.default.createElement(c.Icon,{icon:"backArrow",className:"circle"}),n.default.createElement("span",null,a.actions.back," : ",a.activities.module)),n.default.createElement(r.Link,null,n.default.createElement("span",{className:"primary-text"},a.types[e.dataType.id])))};var n=e("react"),l=e("../../context"),r=e("pragmate-ui/components"),o=e("@beyond-js/kernel/routing"),c=e("pragmate-ui/icons")}}),k.set("./components/generation-modal/materials",{hash:2450520703,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialsSuggestionsModal=function({type:t,onClose:a}){const{texts:e,activity:n,editData:l}=(0,v.useModuleContext)(),[r,o]=u.default.useState(!1),[c,s]=u.default.useState(""),i={onChange:e=>{s(e.currentTarget.value)},onClick:async e=>{o(!0),await n.materials.generate(t,c),l({materials:{...n.materials},specs:{...n.specs}}),a(),setTimeout(()=>{o(!1)},2e3)}};return u.default.createElement(d.Modal,{show:!0,className:"refine-modal",onClose:a},u.default.createElement(m.Form,null,u.default.createElement("header",null,u.default.createElement("h3",null,e.refine.title),u.default.createElement("span",null,e.refine.description)),u.default.createElement(m.Textarea,{label:e.refine.textarea.label,name:"notes",value:c,onChange:i.onChange,placeholder:e.refine.textarea.placeholder})),u.default.createElement("footer",{className:"flex-container flex-end mt-15"},u.default.createElement(f.AIButton,{variant:"primary",onClick:i.onClick},e.actions.generate)),u.default.createElement(p.ProcessContainer,{fetching:r}))};var u=e("react"),d=e("pragmate-ui/modal"),m=e("pragmate-ui/form"),p=e("@aimpact/ailearn-app/components/ui"),f=e("../ai-button"),v=e("../../context")}}),k.set("./components/generation-modal/specs-modal",{hash:1558602698,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpecsSuggestionsModal=function({onClose:t,suggestionSpecs:a={}}){const{texts:e,activity:n}=(0,f.useModuleContext)(),[l,r]=i.default.useState(!1),[o,c]=i.default.useState(""),s={onChange:e=>{c(e.currentTarget.value)},onClick:async e=>{r(!0),await n.specs.generate(o,{...a}),t(),setTimeout(()=>{r(!1)},1e3)}};return i.default.createElement(u.Modal,{show:!0,className:"refine-modal",onClose:t},i.default.createElement(d.Form,null,i.default.createElement("header",null,i.default.createElement("h3",null,e.refine.title),i.default.createElement("span",null,e.refine.description)),i.default.createElement(d.Textarea,{label:e.refine.textarea.label,name:"notes",value:o,onChange:s.onChange,placeholder:e.refine.textarea.placeholder})),i.default.createElement("footer",{className:"flex-container flex-end mt-15"},i.default.createElement(p.AIButton,{variant:"primary",onClick:s.onClick},e.actions.generate)),i.default.createElement(m.ProcessContainer,{fetching:l}))};var i=e("react"),u=e("pragmate-ui/modal"),d=e("pragmate-ui/form"),m=e("@aimpact/ailearn-app/components/ui"),p=e("../ai-button"),f=e("../../context")}}),k.set("./components/generation-modal/suggestions-modal",{hash:1573064741,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SuggestionModal=function({type:e,onClose:t}){const{texts:a,activity:n}=(0,f.useModuleContext)(),[l,r]=i.default.useState(!1),[o,c]=i.default.useState({observations:"",removeItems:!1,type:e}),s={onChange:e=>{c({...o,[e.currentTarget.name]:e.currentTarget.value})},onClick:async e=>{r(!0),await n.specs.generate(o.observations),t(),setTimeout(()=>{r(!1)},2e3)}};return i.default.createElement(u.Modal,{show:!0,className:"refine-modal",onClose:t},i.default.createElement(d.Form,null,i.default.createElement("header",null,i.default.createElement("h3",null,a.refine.title),i.default.createElement("span",null,a.refine.description)),i.default.createElement(d.Textarea,{label:a.refine.textarea.label,name:"observations",value:o.observations,onChange:s.onChange,placeholder:a.refine.textarea.placeholder})),i.default.createElement("footer",{className:"flex-container flex-end mt-15"},i.default.createElement(p.AIButton,{variant:"primary",onClick:s.onClick},a.actions.generate)),i.default.createElement(m.ProcessContainer,{fetching:l}))};var i=e("react"),u=e("pragmate-ui/modal"),d=e("pragmate-ui/form"),m=e("@aimpact/ailearn-app/components/ui"),p=e("../ai-button"),f=e("../../context")}}),k.set("./components/select-activity",{hash:2971708945,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectActivity=function({values:t,setValues:e}){const{activity:a,store:n}=(0,s.useModuleContext)();let l={value:"",label:"Select"};const r=[];return n.model.activities.items.forEach(e=>{e.id!==a.id&&(e.id===t.specs.activityId&&(l={value:e.id,label:e.title}),r.push({value:e.id,label:e.title}))}),o.default.createElement("label",{htmlFor:"",className:"help-info"},"Is this activity based on another?",o.default.createElement(c.ReactSelect,{onChange:t=>{e(e=>({...e,specs:{...e.specs,activityId:t.target.value}}))},defaultValue:l,options:[l,...r]}))};var o=e("react"),c=e("pragmate-ui/form/react-select"),s=e("../context")}}),k.set("./context",{hash:1403361296,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.useModuleContext=t.ModuleContext=void 0;var a=e("react");const n=t.ModuleContext=a.default.createContext({});t.useModuleContext=()=>a.default.useContext(n)}}),k.set("./forms/character-talk/form",{hash:165451354,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterTalkManualForm=function({onCancel:e}){const t=(0,u.useModuleContext)().texts,{values:a,editData:n}=(0,u.useModuleContext)(),[l,r]=o.default.useState(!1);return o.default.createElement(o.default.Fragment,null,o.default.createElement(c.Form,null,o.default.createElement(c.Input,{onChange:e=>{var e=e.currentTarget,t={...a.specs};n({specs:{...t,[e.name]:e.value},updated:!0})},label:t.specs.role.label,placeholder:t.specs.role.placeholder,name:"role"}),o.default.createElement("footer",{className:"flex-container flex-end mt-15"},o.default.createElement(s.Button,{onClick:()=>{a.updated?r(!0):e()},variant:"primary",bordered:!0},t.actions.cancel)),l&&o.default.createElement(i.ConfirmModal,{onConfirm:()=>{r(!1),e()},onCancel:()=>r(!1)},o.default.createElement("div",null,t.manual.cancel))))};var o=e("react"),c=e("pragmate-ui/form"),s=e("pragmate-ui/components"),i=e("pragmate-ui/modal"),u=e("../../context")}}),k.set("./forms/character-talk/index",{hash:3341164438,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterTalkForm=function(){const{activity:t,editData:a,values:e}=(0,s.useModuleContext)(),[n,l]=r.default.useState(!1);return(0,i.useBinder)([t.specs],()=>{var e=t.specs.getData();a({specs:e})},"specs.generated"),n?r.default.createElement(u.CharacterTalkManualForm,{onCancel:()=>l(!1)}):e.specs.role?r.default.createElement(r.default.Fragment,null,r.default.createElement(c.ActivityBaseSpec,{name:"role"})):r.default.createElement(o.EmptySpecs,{name:"character-talk",onManual:()=>l(!0)})};var r=e("react"),o=e("../../specs/empty"),c=e("../../specs/base-spec"),s=e("../../context"),i=e("@beyond-js/react-18-widgets/hooks"),u=e("./form")}}),k.set("./forms/content-theory/AudioPlayer",{hash:2781382207,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AudioPlayer=function({src:e}){if(!e)return console.warn("not audio to process"),null;e=URL.createObjectURL(e);const t=a.default.useRef(null);return a.default.useEffect(()=>{const e=t.current;e.addEventListener("loadedmetadata",()=>{e.duration===1/0&&(e.currentTime=1e101,e.ontimeupdate=()=>{e.ontimeupdate=null,e.currentTime=0})})},[e]),e?a.default.createElement("div",{className:"audio-player"},a.default.createElement("audio",{controls:!0,preload:"metadata"},a.default.createElement("source",{src:e,type:"audio/mp3",ref:t}),"Your browser does not support the audio element.")):null};var a=e("react")}}),k.set("./forms/content-theory/audio",{hash:3826439041,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ContentTheoryAudio=function({}){const{activity:a,texts:n}=(0,s.useModuleContext)(),[e,t]=o.default.useState(!1),[l,r]=o.default.useState(a.materials.fetching);return(0,i.useBinder)([a.materials],()=>{t(!1)}),e?o.default.createElement(c.ManualMaterialForm,{name:"article",onCancel:()=>t(!1)}):a.materials.audios?o.default.createElement(o.default.Fragment,null,o.default.createElement(d.List,{items:a.materials.audios,control:({data:e})=>{var t=`${m.default.params.apis.ailearn}/activities/${a.id}/materials/${e}/audio`;return o.default.createElement("div",{className:"audio-item flex-container flex-flex-vertical-center flex-space-between"},o.default.createElement("h5",null,n.materials[e]),o.default.createElement("div",{className:"audio-player"},o.default.createElement("audio",{controls:!0,preload:"metadata"},o.default.createElement("source",{src:t,type:"audio/mp3"}),"Your browser does not support the audio element.")))},container:"div"})):o.default.createElement(o.default.Fragment,null,o.default.createElement(u.EmptyCard,{text:n.activities.empty.title,description:n.activities.empty.description},o.default.createElement("div",{className:"flex-container flex-center"},o.default.createElement(p.AIButton,{onClick:async()=>{try{r(!0),await a.materials.generateAudio()}catch(e){console.log(e)}finally{r(!1)}},variant:"primary"},n.actions.generate)),o.default.createElement(u.ProcessContainer,{fetching:l})))};var o=e("react"),c=e("./manual"),s=e("../../context"),i=e("@beyond-js/react-18-widgets/hooks"),u=e("@aimpact/ailearn-app/components/ui"),d=e("pragmate-ui/list"),m=e("@aimpact/ailearn-sdk/config"),p=e("../../components/ai-button")}}),k.set("./forms/content-theory/content",{hash:2186283171,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ContentTheoryContent=function(){const{activity:e,texts:t}=(0,s.useModuleContext)(),[a,n]=o.default.useState(!1),l=()=>n(!0);return(0,d.useBinder)([e.materials],()=>{n(!1)}),a?o.default.createElement(c.ManualMaterialForm,{name:"article",onCancel:()=>n(!1)}):e.materials.article?o.default.createElement(o.default.Fragment,null,o.default.createElement("section",{className:"material__content"},o.default.createElement(i.Markdown,{content:e.materials.article})),o.default.createElement("div",{className:"mt-30 activity-specs-actions flex-container flex-end material__actions"},o.default.createElement(r.Button,{icon:"edit",onClick:l,variant:"primary",bordered:!0},t.actions.edit))):o.default.createElement(u.EmptyMaterial,{name:"article",onManual:l})};var r=e("pragmate-ui/components"),o=e("react"),c=e("./manual"),s=e("../../context"),i=e("@aimpact/chat-sdk/widgets/markdown"),u=e("./empty-material"),d=e("@beyond-js/react-18-widgets/hooks")}}),k.set("./forms/content-theory/empty-material",{hash:3634568172,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyMaterial=function({name:e,onManual:t}){const{activity:a,texts:n}=(0,f.useModuleContext)(),[l,r]=d.default.useState(!1),[o,c]=d.default.useState(a.materials.fetching),[,s]=d.default.useState(a.materials[e]),i=()=>r(!l),u=((0,h.useBinder)([a.materials],()=>{c(a.materials.fetching),s(a.materials[e])}),{disabled:!a.aiCompleted});return d.default.createElement(d.default.Fragment,null,d.default.createElement(m.EmptyCard,{className:"activity--empty",text:n.activities.empty.title,description:n.activities.empty.description},d.default.createElement("div",{className:"flex-container flex-center"},d.default.createElement(v.Button,{variant:"primary",bordered:!0,onClick:t},n.actions.manual),d.default.createElement(p.AIButton,{onClick:i,variant:"primary",...u},n.actions.generate)),d.default.createElement(m.ProcessContainer,{fetching:o})),l&&d.default.createElement(y.MaterialsSuggestionsModal,{type:e,onClose:i}))};var d=e("react"),m=e("@aimpact/ailearn-app/components/ui"),p=e("../../components/ai-button"),f=e("../../context"),v=e("pragmate-ui/components"),h=e("@beyond-js/react-18-widgets/hooks"),y=e("../../components/generation-modal/materials")}}),k.set("./forms/content-theory/index",{hash:1007984020,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ContentTheoryForm=function(){const{activity:n,texts:l}=(0,a.useModuleContext)(),[,e]=o.default.useState(n.materials.fetching),[,t]=o.default.useState(n.materials.article),r=[];return(0,c.useBinder)([n.materials],()=>{e(n.materials.fetching),t({materials:n.materials.getData(),updated:!0})}),n.materials.items.forEach(e=>{var t="string"==typeof e?e:e.name,a=l.materials[t],e={disabled:!!e?.dependencies&&("string"==typeof e?.dependencies?!n.materials[e.dependencies]:e.dependencies.some(e=>!n.materials[e]))};r.push(o.default.createElement(i.Tab,{...e,key:n.id+`.${t}-tab`},a))}),o.default.createElement(i.TabsContainer,{active:0,className:"mt-15 ",onChange:()=>{}},o.default.createElement(i.Tabs,null,r),o.default.createElement(i.Panes,{className:""},o.default.createElement(s.ContentTheoryContent,null),o.default.createElement(u.MaterialPane,{name:"synthesis"}),o.default.createElement(u.MaterialPane,{name:"dyslexia"}),o.default.createElement(d.ContentTheoryAudio,null)))};var o=e("react"),a=e("../../context"),c=e("@beyond-js/react-18-widgets/hooks"),s=e("./content"),i=e("pragmate-ui/tabs"),u=e("../materials/pane"),d=e("./audio")}}),k.set("./forms/content-theory/manual",{hash:993347427,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ManualMaterialForm=function({name:a,onCancel:t}){const{values:n,editData:l,activity:r,texts:e}=(0,d.useModuleContext)(),[o,c]=i.default.useState(!1);return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:"material__content"},i.default.createElement(u.Textarea,{onChange:e=>{var e=e.currentTarget,t={...n.materials};l({materials:{...t,[a]:e.value},updated:!0})},name:"content",value:n.materials?.[a]??"",placeholder:e.manual.textarea})),i.default.createElement("footer",{className:"flex-container flex-end mt-15"},i.default.createElement(s.Button,{onClick:()=>{n.updated?c(!0):t()},variant:"primary",bordered:!0},e.actions.cancel),i.default.createElement(p.SaveButton,null)),o&&i.default.createElement(m.ConfirmModal,{onConfirm:()=>{var e={...n.materials};l({materials:{...e,[a]:r.materials[a]}}),c(!1),t()},onCancel:()=>c(!1)},i.default.createElement("div",null,e.manual.cancel)))};var s=e("pragmate-ui/components"),i=e("react"),u=e("pragmate-ui/form"),d=e("../../context"),m=e("pragmate-ui/modal"),p=e("../../save-button")}}),k.set("./forms/debate/form",{hash:577303246,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ManualDebateForm=function({onCancel:e}){const t=(0,d.useModuleContext)().texts,{values:a,editData:n}=(0,d.useModuleContext)(),[l,r]=c.default.useState(!1),o=a.updated?"Cancel":"Back";return c.default.createElement(c.default.Fragment,null,c.default.createElement(s.Form,null,c.default.createElement(s.Textarea,{onChange:e=>{var e=e.currentTarget,t={...a.specs};n({updated:!0,specs:{...t,[e.name]:e.value}})},value:a.specs.subject,label:t.specs.subject.label,placeholder:t.specs.subject.placeholder,name:"subject"}),c.default.createElement("footer",{className:"flex-container flex-end mt-15"},c.default.createElement(i.Button,{onClick:()=>{a.updated?r(!0):e()},variant:"primary",bordered:!0},o),c.default.createElement(m.SaveButton,{callback:e})),l&&c.default.createElement(u.ConfirmModal,{onConfirm:()=>{r(!1),e()},onCancel:()=>r(!1)},c.default.createElement("div",null,t.manual.cancel))))};var c=e("react"),s=e("pragmate-ui/form"),i=e("pragmate-ui/components"),u=e("pragmate-ui/modal"),d=e("../../context"),m=e("../../save-button")}}),k.set("./forms/debate/index",{hash:702768284,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DebateForm=function(){const{activity:e,editData:t,values:a}=(0,s.useModuleContext)(),[n,l]=o.default.useState(!1),r=((0,i.useBinder)([e.specs],()=>t(e.getData()),"specs.generated"),()=>l(!n));return n?o.default.createElement(u.ManualDebateForm,{onCancel:r}):a.specs.subject?o.default.createElement(d.ActivityBaseSpec,{name:"subject"}):o.default.createElement(c.EmptySpecs,{name:"debate",onManual:r})};var o=e("react"),c=e("../../specs/empty"),s=e("../../context"),i=e("@beyond-js/react-18-widgets/hooks"),u=e("./form"),d=e("../../specs/base-spec")}}),k.set("./forms/delete-modal",{hash:1523120684,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteActivityData=function({show:e,onClose:t}){const[,a]=s.default.useState(!1),{texts:{activities:n,actions:l},activity:r,editData:o}=(0,i.useModuleContext)();return e?s.default.createElement(s.default.Fragment,null,s.default.createElement(c.ConfirmModal,{show:!0,onClose:t,onConfirm:e=async()=>{try{a(!0),t(),await r.clearContent();var e={specs:r.specs.getData(),materials:r.materials.getData(),updated:!1};o(e)}catch(e){console.error(e)}finally{a(!1)}},btnConfirm:{label:l.confirm},btnCancel:{label:l.cancel}},s.default.createElement("h3",null,n.deleteModal.title),s.default.createElement("p",null,n.deleteModal.description))):null};var c=e("pragmate-ui/modal"),s=e("react"),i=e("../context")}}),k.set("./forms/index",{hash:4040925672,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityBaseForm=function({type:e}){const{activity:t,texts:a}=(0,f.useModuleContext)(),[n,l]=s.default.useState(!1),r={"content-theory":u.ContentTheoryForm,debate:d.DebateForm,spoken:p.SpokenForm,"multiple-choice":m.MultipleChoiceForm,"character-talk":i.CharacterTalkForm};r[e]||console.error("No form for type",e,r);var e=r[e],o=()=>l(!n),c={onClick:o,disabled:t.specs.empty&&t.materials.empty};return s.default.createElement(s.default.Fragment,null,s.default.createElement("header",{className:"flex-container flex-space-between mt-15 mb-15"},s.default.createElement("h3",null,a.specs.title),s.default.createElement("div",{className:"actions flex-container flex-05"},s.default.createElement(v.Button,{variant:"primary",bordered:!0,...c},a.actions.delete))),s.default.createElement(e,null),s.default.createElement(h.DeleteActivityData,{show:n,onClose:o}))};var s=e("react"),i=e("./character-talk"),u=e("./content-theory"),d=e("./debate"),m=e("./multiple-choice"),p=e("./spoken"),f=e("../context"),v=e("pragmate-ui/components"),h=e("./delete-modal")}}),k.set("./forms/language",{hash:802517160,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageField=function(){const{texts:t,store:a,activity:n}=(0,s.useModuleContext)(),[,l]=(t.languages.select.placeholder,o.default.useState(n.language)),e=["en","es"].map(e=>({value:e,label:t.languages[e]})),r={isDisabled:a.saved};return o.default.createElement("div",null,o.default.createElement("label",{htmlFor:""},t.languages.select.label),o.default.createElement(c.ReactSelect,{value:n.language,name:"audience",options:e,onChange:async e=>{l(e.currentTarget.value),await n.set({language:e.currentTarget.value}),await a.save()},...r}))};var o=e("react"),c=e("pragmate-ui/form/react-select"),s=e("../context")}}),k.set("./forms/materials/manual-material-form",{hash:1055788041,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ManualMaterialForm=function({name:a,onCancel:t}){const{values:n,editData:l,activity:r,texts:e}=(0,d.useModuleContext)(),[o,c]=i.default.useState(!1);return i.default.createElement("div",null,i.default.createElement(u.Textarea,{onChange:e=>{var e=e.currentTarget,t={...n.materials};l({materials:{...t,[a]:e.value},updated:!0})},name:a,value:n.materials?.[a]??"",placeholder:e.manual[a].textarea}),i.default.createElement("footer",{className:"flex-container flex-end mt-15"},i.default.createElement(s.Button,{onClick:()=>{n.updated?c(!0):t()},variant:"primary",bordered:!0},e.actions.cancel),i.default.createElement(p.SaveButton,{callback:t})),o&&i.default.createElement(m.ConfirmModal,{onConfirm:()=>{var e={...n.materials};l({materials:{...e,[a]:r.materials[a]}}),c(!1),t()},onCancel:()=>c(!1)},i.default.createElement("div",null,e.manual.cancel)))};var s=e("pragmate-ui/components"),i=e("react"),u=e("pragmate-ui/form"),d=e("../../context"),m=e("pragmate-ui/modal"),p=e("../../save-button")}}),k.set("./forms/materials/pane",{hash:2051955450,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialPane=function({name:e}){const t=(0,i.useModuleContext)().activity,[a,n]=o.default.useState(t.materials[e]),[l,r]=o.default.useState(!1);return(0,s.useBinder)([t.materials],()=>{n(t.materials[e])}),l?o.default.createElement(d.ManualMaterialForm,{name:e,onCancel:()=>r(!1)}):a?o.default.createElement(c.Markdown,{content:a}):o.default.createElement(u.EmptyMaterial,{name:e,onManual:()=>r(!0)})};var o=e("react"),c=e("@aimpact/chat-sdk/widgets/markdown"),s=e("@beyond-js/react-18-widgets/hooks"),i=e("../../context"),u=e("../content-theory/empty-material"),d=e("./manual-material-form")}}),k.set("./forms/multiple-choice/body/empty",{hash:1107922265,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyActivity=function({openManual:e}){var t=(0,n.useModuleContext)().activity;return a.default.createElement(a.default.Fragment,null,a.default.createElement(r.RelatedActivityField,null),a.default.createElement(l.EmptySpecs,{name:"multiple-choice",onManual:e,suggestionSpecs:{related:t.specs.related}}))};var a=e("react"),n=e("../../../context"),l=e("../../../specs/empty"),r=e("../related-activity")}}),k.set("./forms/multiple-choice/body/form/choices/answers/form",{hash:322178034,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AnswerForm=function({question:t,toggleAnswerForm:a}){const n=(0,m.useBulletPointsInputContext)().specs["clear"],{texts:e,activity:l,editData:r}=(0,d.useModuleContext)(),[o,c]=s.default.useState("");return s.default.createElement("div",{className:"answer__form"},s.default.createElement(i.Input,{name:"new-answer-option",value:o,onChange:e=>c(e.currentTarget.value)}),s.default.createElement("div",{className:"answer__form__actions flex-container flex-end flex-05"},s.default.createElement(u.Button,{onClick:e=>{a(!1),n()},variant:"primary",bordered:!0,icon:"delete"},e.actions.delete),s.default.createElement(u.Button,{onClick:e=>{c(""),t.addOption(o),r({specs:l.specs.getData(),updated:!0})},icon:"add",variant:"primary"},e.actions.add)))};var s=e("react"),i=e("pragmate-ui/form"),u=e("pragmate-ui/components"),d=e("../../../../../../context"),m=e("@aimpact/ailearn-app/components/ui/bullet-points-input")}}),k.set("./forms/multiple-choice/body/form/choices/answers/index",{hash:3232145774,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.OptionAnswers=function({question:e}){const[,t]=r.default.useState(e.correct),[,a]=r.default.useState(e.options??[]),[n,l]=r.default.useState(e.getData());return(0,s.useBinder)([e],()=>{t(e.correctAnswer),a(e.options),l(e.getData()),console.log("me disparo",e.getData())}),n.options.length?r.default.createElement(o.List,{specs:{question:e},className:"question-options__list",items:n.options,control:c.AnswerItem}):null};var r=e("react"),o=e("pragmate-ui/list"),c=e("./item"),s=e("@beyond-js/react-18-widgets/hooks")}}),k.set("./forms/multiple-choice/body/form/choices/answers/item",{hash:3663724462,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AnswerItem=void 0;var s=e("react"),i=e("pragmate-ui/components"),u=e("pragmate-ui/chips"),d=e("../../../../../../context"),m=e("pragmate-ui/icons");t.AnswerItem=e=>{const{texts:t,activity:a,editData:n}=(0,d.useModuleContext)(),{item:l,index:r,specs:{question:o}}=e,c=()=>n({specs:a.specs.getData(),updated:!0});return s.default.createElement("li",null,s.default.createElement("span",null,l),s.default.createElement("section",{className:"item-actions flex-container"},o.correctAnswer===r?s.default.createElement(u.Chip,{icon:"check",sizing:"xs",type:"primary"},t.multipleChoice.labels.correct):s.default.createElement(i.Button,{onClick:e=>{e.preventDefault(),o.setCorrect(r),c()},icon:"info",bordered:!0,sizing:"xs",variant:"primary"},t.multipleChoice.labels.mark),s.default.createElement(m.IconButton,{className:"circle",icon:"delete",onClick:e=>{o.removeOption(r),c()}})))}}}),k.set("./forms/multiple-choice/body/form/choices/item",{hash:3150143409,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ItemOption=function({data:e,index:t}){var a=(0,c.useBulletPointsInputContext)().specs,[n,l]=o.default.useState(a.showAnswerFormIn===t),e="object"==typeof e?e.question:e,n=a.showAnswerFormIn===t||n,r=a.specs.questions[t];return o.default.createElement("div",{className:"bullet-point__item-container"},o.default.createElement(c.BulletPointsInputItem,{data:e,index:t}),a.answers&&r&&o.default.createElement(s.OptionAnswers,{question:r,data:a.answers,index:t}),n&&o.default.createElement(i.AnswerForm,{index:t,question:r,toggleAnswerForm:l}))};var o=e("react"),c=e("@aimpact/ailearn-app/components/ui/bullet-points-input"),s=e("./answers"),i=e("./answers/form")}}),k.set("./forms/multiple-choice/body/form/index",{hash:2619896165,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MultipleChoiceForm=function({toggleManual:e,back:t}){var a=(0,l.useModuleContext)().texts;return n.default.createElement(n.default.Fragment,null,n.default.createElement("header",{className:"flex-container flex-space-between"},n.default.createElement("h4",null,a.specs.questions.title),n.default.createElement(r.IconButton,{icon:"backArrow",onClick:t})),n.default.createElement(o.ManualForm,{onCancel:()=>e(!1)}))};var n=e("react"),l=e("../../../../context"),r=e("pragmate-ui/icons"),o=e("./manual")}}),k.set("./forms/multiple-choice/body/form/manual",{hash:1585690530,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ManualForm=function({onCancel:e}){const{activity:n,texts:t,values:l,editData:r}=(0,v.useModuleContext)(),o=d.default.useState("")[1],{setAnswers:c,specs:a,actionsSpecs:s,options:i,setOptions:u}=(0,y.useBulletPointSettings)();return d.default.createElement("section",{className:"activity__materials-form"},d.default.createElement(m.BulletPointsInput,{actions:s,values:i,Item:p.ItemOption,specs:a,handleChange:({currentTarget:e})=>{o("");var t={...l.specs},a=(n.specs.set({questions:e.value}),n.specs.questions.map(e=>({items:e.options,correct:e.correctAnswer})));c(a),u(e.value),r({specs:{...t,...n.specs.getData()},updated:!0})},fieldName:"questions"},d.default.createElement(f.BulletPointsHeader,null)),d.default.createElement("footer",{className:"flex flex-container mt-15 flex-05"},d.default.createElement(h.Button,{variant:"primary",bordered:!0,onClick:e},t.actions.cancel),d.default.createElement(g.SaveButton,{callback:e})))};var d=e("react"),m=e("@aimpact/ailearn-app/components/ui/bullet-points-input"),p=e("./choices/item"),f=e("../../options-header"),v=e("../../../../context"),h=e("pragmate-ui/components"),y=e("../use-bullet-point-settings"),g=e("../../../../save-button")}}),k.set("./forms/multiple-choice/body/list",{hash:4059176057,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MultipleChoiceList=function(){const{values:e,texts:t}=(0,l.useModuleContext)(),[,a]=n.default.useState(!1);return n.default.createElement(n.default.Fragment,null,n.default.createElement("header",{className:"flex-container flex-space-between"},n.default.createElement("h4",null,t.specs.questions.title),n.default.createElement(o.IconButton,{icon:"edit",onClick:()=>a(!0)})),n.default.createElement(r.List,{className:"specs__items-list",items:e.specs.questions,specs:{},control:c.QuestionItemList}))};var n=e("react"),l=e("../../../context"),r=e("pragmate-ui/list"),o=e("pragmate-ui/icons"),c=e("./question-item-list")}}),k.set("./forms/multiple-choice/body/question-item-list",{hash:3704646287,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.QuestionItemList=function({data:a}){var e=(0,o.useModuleContext)().texts;return r.default.createElement("li",{className:"subform__items"},r.default.createElement("h5",null,a.question),a.options.length?r.default.createElement(l.List,{items:a.options,control:({data:e,index:t})=>(t=t===a.correctAnswer?"check":"close",r.default.createElement("li",{className:"flex-container flex-vertical-center flex-05"},r.default.createElement(n.Icon,{icon:t,className:"icon-xs"}),e))}):r.default.createElement(r.default.Fragment,null,r.default.createElement("p",{className:"text-muted"},e.multipleChoice.emptyOptions)))};var n=e("pragmate-ui/icons"),l=e("pragmate-ui/list"),r=e("react"),o=e("../../../context")}}),k.set("./forms/multiple-choice/body/use-bullet-point-settings",{hash:3454183772,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.useBulletPointSettings=function(){const{activity:r,texts:e,values:t,editData:a}=(0,y.useModuleContext)(),[n,l]=f.default.useState(r.specs.questionLabels??[]),[o,c]=f.default.useState(!1),[s,i]=f.default.useState({}),[,u]=f.default.useState({}),d=((0,h.useBinder)([r.specs],()=>{l(r.specs.questions.map(e=>e.question));var e=r.specs.questions.map(e=>({items:e.options,correct:e.correctAnswer})),e=(i(e),{...t.specs});a({specs:{...e,...r.specs.getData()}}),u({})}),{answers:{icon:v.ICONS.aiStars,title:e.actions.generateAnswers,onClick:async(e,t,a)=>{const n=new p.PendingPromise;var l;if(r.specs.questions[t])return l=await r.specs.questions[t].generateAnswers(),i({...s,...l}),n.resolve(),globalThis.setTimeout(()=>{n.resolve()},2e3),n;console.error("the question is not defined",t)}},add:{icon:"add",title:e.actions.add,requireValue:!0,onClick:(e,t)=>{c(t)}}}),m={type:"questions",specs:r.specs,showAnswerFormIn:o,answers:s,clear:()=>c(!1)};return{actionsSpecs:d,specs:m,answers:s,setAnswers:i,options:n,setOptions:l}};var p=e("@beyond-js/kernel/core"),f=e("react"),v=e("@aimpact/ailearn-app/components/icons"),h=e("@beyond-js/react-18-widgets/hooks"),y=e("../../../context")}}),k.set("./forms/multiple-choice/header",{hash:125051230,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Header=function({specsEdition:e,setSpecsEdition:t}){var a=(0,o.useModuleContext)().texts,n=e?"backArrow":"edit";return l.default.createElement(l.default.Fragment,null,l.default.createElement("header",{className:"flex-container flex-space-between"},l.default.createElement("h4",null,a.specs.questions.title),l.default.createElement(r.IconButton,{icon:n,onClick:()=>t(!e)})))};var l=e("react"),r=e("pragmate-ui/icons"),o=e("../../context")}}),k.set("./forms/multiple-choice/index",{hash:2130336022,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MultipleChoiceForm=function(){const{values:e,activity:t,editData:a}=(0,i.useModuleContext)(),[n,l]=s.default.useState(!1),[r,o]=s.default.useState(!1),c=()=>{l(!1),o(!1)};return(0,u.useBinder)([t.specs],()=>{var e=t.specs.getData();a({specs:e})},"specs.generated"),n?s.default.createElement(d.ManualForm,{onCancel:c}):e.specs?.questions?.length?s.default.createElement("div",{className:"form__multiple-field"},s.default.createElement(m.Header,{specsEdition:r,setSpecsEdition:o}),r?s.default.createElement(d.ManualForm,{onCancel:c}):s.default.createElement(v.List,{className:"specs__items-list",items:e.specs.questions,specs:{},control:f.QuestionItemList})):s.default.createElement(p.EmptyActivity,{openManual:()=>l(!0)})};var s=e("react"),i=e("../../context"),u=e("@beyond-js/react-18-widgets/hooks"),d=e("./body/form/manual"),m=e("./header"),p=e("./body/empty"),f=e("./body/question-item-list"),v=e("pragmate-ui/list")}}),k.set("./forms/multiple-choice/options-header",{hash:4017858604,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.BulletPointsHeader=function({refineAction:e=!0}){var t=(0,c.useModuleContext)().texts,a=(0,l.useBulletPointsInputContext)().addBulletPoint;return n.default.createElement("div",{className:"bullet-buttons__container flex-container flex-end flex-100 mb-15"},n.default.createElement(r.Button,{icon:"add",variant:"primary",bordered:!0,onClick:a},t.bulletPoint.add),e&&n.default.createElement(o.AIButton,{variant:"primary",onClick:()=>console.log("questions")},t.actions.generate))};var n=e("react"),l=e("@aimpact/ailearn-app/components/ui/bullet-points-input"),r=e("pragmate-ui/components"),o=e("../../components/ai-button"),c=e("../../context")}}),k.set("./forms/multiple-choice/related-activity",{hash:1813646956,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.RelatedActivityField=function(){const{store:e,texts:{multipleChoice:t},values:a,activity:n,editData:l}=(0,u.useModuleContext)(),r=e.model.activities.items.filter(e=>"content-theory"===e.type).map(e=>({value:e.id,label:e.title}));let o={value:"",label:t.related.independent},c=void 0;var s;return void 0!==n.specs.related&&(s=e.model.activities.items[n.specs.related],c=s?.id),i.default.createElement(i.default.Fragment,null,i.default.createElement("label",null,t.related.label),i.default.createElement(d.ReactSelect,{value:c,options:[o,...r],onChange:e=>{n.specs.set({related:e.target.value}),l({specs:{...a.specs,related:e.target.value}})}}))};var i=e("react"),u=e("../../context"),d=e("pragmate-ui/form/react-select")}}),k.set("./forms/spoken/criteria-field-item",{hash:930064618,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CriteriaFieldItem=function({total:e,item:t,index:a,onDelete:n,onChange:l}){var r=(0,u.useModuleContext)().texts,[,,]=c.default.useState(!1),o=e=>{e=e.currentTarget,t[e.name]=e.value,l(a,t)};return c.default.createElement("div",{className:"form-repeated-container"},c.default.createElement(s.Input,{onChange:o,label:r.specs.subject.label,placeholder:r.specs.criteria.placeholder,value:t.name,name:"name",variant:"floating"}),c.default.createElement(s.Textarea,{onChange:o,label:r.specs.criteria.label,value:t.subject,placeholder:r.specs.subject.placeholder,name:"subject",variant:"floating"}),1<e&&c.default.createElement("div",{className:"flex-container flex-end"},c.default.createElement(i.Button,{variant:"link",onClick:()=>n(a)}," ",r.actions.delete)))};var c=e("react"),s=e("pragmate-ui/form"),i=e("pragmate-ui/components"),u=e("../../context")}}),k.set("./forms/spoken/criteria-field",{hash:3358725844,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CriteriaField=function({onCancel:e=void 0}){const{values:n,editData:l,texts:t}=(0,p.useModuleContext)(),[a,r]=d.default.useState(n.specs?.criteria?.length||1),[o,c]=d.default.useState(n.specs.criteria.length?n.specs.criteria:[{name:"",subject:""}]),s=[],i=e=>{e=o.slice(0,e).concat(o.slice(e+1)),r(e.length),c(e),l({specs:{...n.specs,name:e},updated:!0})},u=(e,t)=>{var a=o;a[e]=t,c(a),l({specs:{...n.specs,criteria:a},updated:!0})};for(let e=0;e<a;++e)s.push(d.default.createElement(f.CriteriaFieldItem,{onChange:u,total:a,item:o[e],onDelete:i,key:"name-"+e,index:e}));return d.default.createElement("section",{className:"form__subsection"},s,d.default.createElement("footer",{className:"actions flex-container flex-05 flex-end"},e&&d.default.createElement(m.Button,{variant:"primary",bordered:!0,onClick:e},t.actions.cancel),d.default.createElement(m.Button,{variant:"primary",onClick:()=>{r(a+1),c([...o,{name:"",subject:""}])}},t.actions.add)))};var d=e("react"),m=e("pragmate-ui/components"),p=e("../../context"),f=e("./criteria-field-item")}}),k.set("./forms/spoken/criteria-form",{hash:1190605705,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpokenCriteriaForm=function({onCancel:e}){const{values:t,texts:a}=(0,u.useModuleContext)(),[n,l]=o.default.useState(!1),r=!t.specs.task||!t.specs.assessment||!t.specs.criteria?.length;return o.default.createElement(c.Form,null,o.default.createElement(d.CriteriaField,null),o.default.createElement("footer",{className:"flex-container flex-end mt-15"},o.default.createElement(s.Button,{onClick:()=>{t.updated?l(!0):e()},variant:"primary",bordered:!0},a.actions.cancel),o.default.createElement(m.SaveButton,{callback:e,disabled:r})),n&&o.default.createElement(i.ConfirmModal,{onConfirm:()=>{l(!1),e()},onCancel:()=>l(!1)},o.default.createElement("div",null,a.manual.cancel)))};var o=e("react"),c=e("pragmate-ui/form"),s=e("pragmate-ui/components"),i=e("pragmate-ui/modal"),u=e("../../context"),d=e("./criteria-field"),m=e("../../save-button")}}),k.set("./forms/spoken/criteria-item",{hash:1299847821,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CriteriaItem=function({data:e}){return a.default.createElement("div",{className:"subform__items"},a.default.createElement("strong",{className:"capitalize"},e.name,": ")," ",a.default.createElement("span",null,e.subject))};var a=e("react")}}),k.set("./forms/spoken/form",{hash:3296238602,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpokenManualForm=function({onCancel:e}){const{values:a,editData:n,texts:t}=(0,m.useModuleContext)(),[l,r]=s.default.useState(!1),o=e=>{var e=e.currentTarget,t={...a.specs};n({specs:{...t,[e.name]:e.value},updated:!0})},c=!a.specs.task||!a.specs.assessment||!a.specs.criteria?.length;return s.default.createElement(s.default.Fragment,null,s.default.createElement(i.Form,null,s.default.createElement(i.Textarea,{onChange:o,label:t.specs.task.label,value:a.specs.task,placeholder:t.specs.task.placeholder,name:"task"}),s.default.createElement(i.Textarea,{onChange:o,label:t.specs.assessment.label,value:a.specs.assessment,placeholder:t.specs.assessment.placeholder,name:"assessment"}),s.default.createElement(p.CriteriaField,null),s.default.createElement("footer",{className:"flex-container flex-end mt-15"},s.default.createElement(u.Button,{onClick:()=>{a.updated?r(!0):e()},variant:"primary",bordered:!0},t.actions.cancel),s.default.createElement(f.SaveButton,{callback:e,disabled:c})),l&&s.default.createElement(d.ConfirmModal,{onConfirm:()=>{r(!1),e()},onCancel:()=>r(!1)},s.default.createElement("div",null,t.manual.cancel))))};var s=e("react"),i=e("pragmate-ui/form"),u=e("pragmate-ui/components"),d=e("pragmate-ui/modal"),m=e("../../context"),p=e("./criteria-field"),f=e("../../save-button")}}),k.set("./forms/spoken/index",{hash:2638025758,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpokenForm=function(){const{values:e,activity:t,editData:a,texts:n}=(0,p.useModuleContext)(),[l,r]=u.default.useState(!1),[o,c]=u.default.useState(!1),s=()=>c(!o),i=((0,f.useBinder)([t.specs],()=>a(t.getData()),"specs.generated"),()=>r(!l));return l?u.default.createElement(v.SpokenManualForm,{onCancel:i}):e.specs.criteria&&e.specs.task&&e.specs.assessment?u.default.createElement(u.default.Fragment,null,u.default.createElement(m.ActivityBaseSpec,{name:"task"}),u.default.createElement(m.ActivityBaseSpec,{name:"assessment"}),u.default.createElement("div",{className:"form__multiple-field"},u.default.createElement("header",{className:"flex-container flex-space-between"},u.default.createElement("h4",null,n.specs.criteria.title),u.default.createElement(y.IconButton,{icon:"edit",onClick:s})),o?u.default.createElement(b.SpokenCriteriaForm,{onCancel:s}):u.default.createElement(h.List,{className:"criteria__items-list",items:e.specs.criteria,specs:{},control:g.CriteriaItem}))):u.default.createElement(d.EmptySpecs,{name:"spoken",onManual:i})};var u=e("react"),d=e("../../specs/empty"),m=e("../../specs/base-spec"),p=e("../../context"),f=e("@beyond-js/react-18-widgets/hooks"),v=e("./form"),h=e("pragmate-ui/list"),y=e("pragmate-ui/icons"),g=e("./criteria-item"),b=e("./criteria-form")}}),k.set("./header",{hash:3632271496,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityHeader=function({}){const{activity:t,texts:e,editData:a}=(0,i.useModuleContext)(),[n,l]=c.default.useState(!1),[r,o]=c.default.useState(t.picture?t.picture+"?size=sm":void 0);return(0,p.useBinder)([t],()=>o(t.picture+"?size=sm&"+Date.now()),"image.generated"),c.default.createElement("section",null,c.default.createElement("header",{className:"header-module__container  flex-container flex-space-between"},c.default.createElement("section",{className:"header-container module-header-description "},c.default.createElement(m.CoverImage,{title:e.picture.title,description:e.picture.description,suggestions:t.pictureSuggestions,picture:r,onGenerate:e=>t.generatePicture(e)}),c.default.createElement("div",{className:"header__title-container"},c.default.createElement(d.BreadCrumbHeader,null),c.default.createElement(s.ContentEditable,{name:"title",as:"h3",onSave:async e=>{e={title:e.target.value},a(e),await t.save(e)}},t.title??e.form.title)))),c.default.createElement(u.ActivitySuggestionsModal,{show:n,type:t.type,onClose:()=>l(!n)}))};var c=e("react"),s=e("@aimpact/ailearn-app/components/ui"),i=e("./context"),u=e("./components/generation-modal/activity-modal"),d=e("./components/generation-modal/breadcrumb"),m=e("@aimpact/ailearn-app/components/cover-image.code"),p=e("@beyond-js/react-18-widgets/hooks")}}),k.set("./index",{hash:4058066515,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleActivityForm=function({store:e,activity:t}){globalThis.activity=t;const[a,n]=u.default.useState(t.getData()),[l,r]=(0,f.useTexts)(v.module.specifier),[o,c]=u.default.useState(0),s=t.type,i=e.activityTypes.get(s);if(i)return l?u.default.createElement(h.ModuleContext.Provider,{value:{activity:t,texts:r,store:e,values:a,clearData:()=>{t.materials.clear(),n(t.getData())},updated:a.updated,editData:e=>{e={...a,...e};n(e)},currentTab:o,setCurrentTab:c,ensureCredits:p.LayoutBroker.ensureCredits,itemsType:i}},u.default.createElement(m.PageContainer,null,u.default.createElement(b.ActivityHeader,null),u.default.createElement(y.GeneralActivityFields,null),u.default.createElement(g.ActivityBaseForm,{type:s}))):u.default.createElement(d.Spinner,{active:!0});throw new Error(`the activity type ${s} is not supported`)};var u=e("react"),d=e("pragmate-ui/components"),m=e("@aimpact/ailearn-app/components/ui"),p=e("@aimpact/ailearn-app/coins-layout.widget"),f=e("@beyond-js/react-18-widgets/hooks"),v=e("beyond_context"),h=e("./context"),y=e("./specs"),g=e("./forms"),b=e("./header")}}),k.set("./interface",{hash:792411869,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})}}),k.set("./save-button",{hash:3780228212,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SaveButton=function({disabled:e,callback:t}){const{values:a,editData:n,texts:l,store:r,activity:o}=(0,i.useModuleContext)(),c={disabled:!a.updated||e,onClick:async()=>{await r.model.activities.map.get(o.id).set(a),await o.set(a),n({updated:!1}),r.save(),t&&t()}};return s.default.createElement(u.Button,{variant:"primary",...c},l.actions.save)};var s=e("react"),i=e("./context"),u=e("pragmate-ui/components")}}),k.set("./specs/base-spec",{hash:3273638513,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityBaseSpec=function({name:e}){const{values:a,texts:t,activity:n,editData:l}=(0,c.useModuleContext)(),r=n.specs[e]??t.specs[e].placeholder;return o.default.createElement("div",{className:"specs-label"},o.default.createElement("label",{htmlFor:""},t.specs[e].label),o.default.createElement(s.ContentEditable,{name:e,onSave:async({name:e,value:t})=>{await n.save({specs:{...a.specs,[e]:t}}),l({specs:{...a.specs,[e]:t}})}},r))};var o=e("react"),c=e("../context"),s=e("../components/content-editable")}}),k.set("./specs/empty",{hash:243964913,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EmptySpecs=function({name:e,onManual:t,suggestionSpecs:a={}}){const{texts:n,activity:l}=(0,d.useModuleContext)(),[r,o]=i.default.useState(!1),c={disabled:!l.prepared},s=()=>o(!r);return i.default.createElement(i.default.Fragment,null,i.default.createElement(u.EmptyCard,{className:"activity--empty",text:n.activities.empty.title,description:n.activities.empty.description},i.default.createElement("div",{className:"flex-container flex-center"},i.default.createElement(m.Button,{variant:"primary",bordered:!0,onClick:t},n.actions.manual),i.default.createElement(f.AIButton,{...c,onClick:s,variant:"primary"},n.actions.generate)),i.default.createElement("div",{className:"flex-container flex-center"})),r&&i.default.createElement(p.SpecsSuggestionsModal,{type:e,onClose:s,suggestionSpecs:a}))};var i=e("react"),u=e("@aimpact/ailearn-app/components/ui"),d=e("../context"),m=e("pragmate-ui/components"),p=e("../components/generation-modal/specs-modal"),f=e("../components/ai-button")}}),k.set("./specs/index",{hash:1288385182,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralActivityFields=function(){const{texts:e,activity:a,editData:n,store:l}=(0,o.useModuleContext)();return r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{className:"specs-label"},r.default.createElement(s.LanguageField,null)),r.default.createElement("div",{className:"specs-label"},r.default.createElement("label",null," ",e.activities.description),r.default.createElement(c.ContentEditable,{name:"description",selector:"p",onSave:async({currentTarget:{name:e,value:t}})=>{n({[e]:t}),await a.set({[e]:t}),await l.save()}},a.description)),r.default.createElement(i.ActivityObjectiveSpecs,null))};var r=e("react"),o=e("../context"),c=e("@aimpact/ailearn-app/components/ui"),s=e("../forms/language"),i=e("./objective")}}),k.set("./specs/objective",{hash:563243364,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityObjectiveSpecs=function(){const{values:e,texts:t,activity:a,editData:n,store:l}=(0,c.useModuleContext)();var r;return a.specs.properties.includes("objective")?(r=e.specs.objective??t.specs.objective.placeholder,o.default.createElement("div",{className:"specs-label"},o.default.createElement("label",null,t.specs.objective.label),o.default.createElement(s.ContentEditable,{name:"objective",onSave:async({currentTarget:{name:e,value:t}})=>{e={specs:{...a.specs,[e]:t}},n(e),await a.set(e),await l.save()}},r))):null};var o=e("react"),c=e("../context"),s=e("@aimpact/ailearn-app/components/ui")}}),_.exports.descriptor=[{im:"./components/ai-button",from:"AIButton",name:"AIButton"},{im:"./components/ai-button",from:"AIIconButton",name:"AIIconButton"},{im:"./forms/content-theory/AudioPlayer",from:"AudioPlayer",name:"AudioPlayer"},{im:"./forms/multiple-choice/body/form/choices/answers/index",from:"OptionAnswers",name:"OptionAnswers"},{im:"./forms/multiple-choice/body/form/choices/item",from:"ItemOption",name:"ItemOption"},{im:"./header",from:"ActivityHeader",name:"ActivityHeader"},{im:"./index",from:"ModuleActivityForm",name:"ModuleActivityForm"}],_.exports.process=function({require:e,prop:t,value:a}){!e&&"AIButton"!==t||n("AIButton",e?e("./components/ai-button").AIButton:a),!e&&"AIIconButton"!==t||n("AIIconButton",e?e("./components/ai-button").AIIconButton:a),!e&&"AudioPlayer"!==t||n("AudioPlayer",e?e("./forms/content-theory/AudioPlayer").AudioPlayer:a),!e&&"OptionAnswers"!==t||n("OptionAnswers",e?e("./forms/multiple-choice/body/form/choices/answers/index").OptionAnswers:a),!e&&"ItemOption"!==t||n("ItemOption",e?e("./forms/multiple-choice/body/form/choices/item").ItemOption:a),!e&&"ActivityHeader"!==t||n("ActivityHeader",e?e("./header").ActivityHeader:a),!e&&"ModuleActivityForm"!==t||n("ModuleActivityForm",e?e("./index").ModuleActivityForm:a)},n("__beyond_pkg",_),n("hmr",new function(){this.on=(e,t)=>_.hmr.on(e,t),this.off=(e,t)=>_.hmr.off(e,t)}),_.initialise(k)}}});