System.register(["@beyond-js/kernel@0.1.9/bundle","react@18.2.0","pragmate-ui@1.0.0-beta.6/modal","@aimpact/ailearn-app@0.1.13/components/ui","@beyond-js/react-18-widgets@1.1.2/hooks","framer-motion@10.18.0","@aimpact/ailearn-app@0.1.13/main-layout.widget","pragmate-ui@1.0.0-beta.6/components","pragmate-ui@1.0.0-beta.6/form/react-select","pragmate-ui@1.0.0-beta.6/form","pragmate-ui@1.0.0-beta.6/list"],function(n,e){var t,a,l,o,r,i,s,c,u,d,m,f,p;return n({RefinementActivityModal:void 0,RefinementModal:void 0}),{setters:[function(e){t=e},function(e){a=e},function(e){l=e},function(e){o=e},function(e){r=e},function(e){i=e},function(e){s=e},function(e){c=e},function(e){u=e},function(e){d=e},function(e){m=e}],execute:function(){p=t.Bundle,(f=new p({module:{vspecifier:"@aimpact/ailearn-app@0.1.13/modules/management/refinament",multibundle:!0},type:"code"},e.meta.url).package()).dependencies.update([["react",a],["pragmate-ui/modal",l],["@aimpact/ailearn-app/components/ui",o],["@beyond-js/react-18-widgets/hooks",r],["framer-motion",i],["@aimpact/ailearn-app/main-layout.widget",s],["pragmate-ui/components",c],["pragmate-ui/form/react-select",u],["pragmate-ui/form",d],["pragmate-ui/list",m]]),(p=new Map).set("./activity/index",{hash:2506829933,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.RefinementActivityModal=function(e){let{owner:t,title:a,value:n,onConsume:l,description:o,required:r,globalTexts:i,show:s,onClose:c,onGenerate:u}=e,[d,m]=b.default.useState(!1),[f,p]=b.default.useState(n??""),[g,v]=b.default.useState(0<P.LayoutBroker.model.credits?.available?"suggestions":"credits"),[x,y]=b.default.useState(),[h,E]=((0,_.useBinder)([P.LayoutBroker.model],()=>{v(0<P.LayoutBroker.model?.credits?.available?"suggestions":"credits")},"credits.change"),(0,_.useTexts)(k.module.specifier));var C;return s&&h?(e=()=>{p(""),v("suggestions"),c()},C={view:g,owner:t,onConsume:l,error:x,onClose:c,texts:{...E,title:a,description:o},onGenerate:async()=>{try{if(!r||""!==f&&f){if(m(!0),!u)throw Error("No callback provided");var e=await u({notes:f});e?.error?y(E.errors[e.error]??E.errors.default):c()}else y("Please provide a description")}catch(e){console.error(e)}finally{m(!1)}},setView:v,globalTexts:i,notes:f,activity:activity,activities:activities,showRelated:showRelated,setNotes:p},b.default.createElement(S.ModalContext.Provider,{value:C},b.default.createElement(w.Modal,{show:!0,onClose:e,closeBackdrop:!1},b.default.createElement(R.AnimatePresence,null,b.default.createElement(T.ConditionalContainer,{condition:0<P.LayoutBroker.model?.credits?.available?g:"credits",ternary:!0,options:{credits:b.default.createElement(N.RequestCreditsContainer,null),suggestions:b.default.createElement(B.ActivitySuggestionsForm,null),examples:b.default.createElement(j.SuggestionExamples,null)}}),b.default.createElement(M.ProcessContainer,{fetching:d,key:"control-container-"+g}))))):null};var b=e("react"),w=e("pragmate-ui/modal"),M=e("@aimpact/ailearn-app/components/ui"),_=e("@beyond-js/react-18-widgets/hooks"),k=e("beyond_context"),R=e("framer-motion"),B=e("./suggestions"),S=e("../context"),j=e("../examples"),N=e("../request-credits"),P=e("@aimpact/ailearn-app/main-layout.widget"),T=e("pragmate-ui/components")}}),p.set("./activity/related-activity",{hash:4177241204,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.RelatedActivityField=function({}){let{texts:e,texts:{errors:t},activity:a,activities:n,setError:l,showRelated:o}=(0,u.useModalContext)();var r,i;return o?(r=n.items.filter(e=>"content-theory"===e.type&&e.title).map(e=>({value:e.id,label:e.title})),i={value:"",label:e.related.independent},s.default.createElement(s.default.Fragment,null,s.default.createElement("label",null,e.related.label),s.default.createElement(c.ReactSelect,{options:[i,...r],onChange:e=>{a.specs.set({related:e.target.value}),""===e.target.value||n.get(e.target.value).materials.article?(l(""),a.specs.set({related:e.target.value})):l(t.NO_RELATED_ACTIVITY)}}))):null};var s=e("react"),c=e("pragmate-ui/form/react-select"),u=e("../context")}}),p.set("./activity/suggestions",{hash:1633364475,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ActivitySuggestionsForm=function(){let{setView:e,notes:t,setNotes:a,onGenerate:n,texts:l,error:o}=(0,m.useModalContext)(),[r,,]=s.default.useState(!1),i={onChange:e=>{a(e.currentTarget.value)},onClick:n,setView:()=>e("examples"),onBack:()=>e("suggestions")};return s.default.createElement(s.default.Fragment,null,s.default.createElement(c.Form,{className:"modal__content--justified"},s.default.createElement("header",null,s.default.createElement("h3",null,l.title),s.default.createElement("p",null,l.description)),s.default.createElement(u.ErrorRenderer,{error:o}),s.default.createElement(c.Textarea,{label:l.textarea.label,name:"objective",value:t,onChange:i.onChange,placeholder:l.textarea.placeholder}),s.default.createElement(c.Textarea,{label:l.textarea.label,name:"observations",value:t,onChange:i.onChange,placeholder:l.textarea.placeholder})),s.default.createElement("footer",{className:"actions"},s.default.createElement(d.Button,{variant:"primary",onClick:i.onClick},l.actions.generate)),s.default.createElement(u.ProcessContainer,{fetching:r}))};var s=e("react"),c=e("pragmate-ui/form"),u=e("@aimpact/ailearn-app/components/ui"),d=e("pragmate-ui/components"),m=e("../context")}}),p.set("./context",{hash:3386108632,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.useModalContext=t.ModalContext=void 0;var a=e("react");let n=t.ModalContext=a.default.createContext({});t.useModalContext=()=>a.default.useContext(n)}}),p.set("./examples",{hash:986637339,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SuggestionExamples=function(){let{texts:t,setView:a,setNotes:n,examples:e}=(0,i.useModalContext)(),[,,]=l.default.useState(null);return l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:"modal__content--justified"},l.default.createElement("h3",null,t.examples.title),l.default.createElement(r.List,{className:"modal__list--options-selection",items:e.items,control:({item:e})=>l.default.createElement("li",{className:"list__item"},l.default.createElement("span",null,e),l.default.createElement("div",null,l.default.createElement(o.Button,{bordered:!0,variant:"primary",onClick:()=>{n(e),a("suggestions")}},t.actions.select)))}),l.default.createElement("div",{className:"flex-container flex-end mt-30"},l.default.createElement("div",{className:"modal__actions"},l.default.createElement(o.Button,{variant:"default",onClick:()=>a("selection")},t.actions.back)))))};var l=e("react"),o=e("pragmate-ui/components"),r=e("pragmate-ui/list"),i=e("./context")}}),p.set("./index",{hash:1953550980,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.RefinementModal=function(e){let{owner:t,title:a,value:n,onConsume:l,activities:o,activity:r,showRelated:i,description:s,required:c,show:u,onClose:d,onGenerate:m}=e,[f,p]=k.default.useState(!1),[g,v]=k.default.useState(n??""),[x,y]=k.default.useState(0<F.LayoutBroker.model.credits?.available?"suggestions":"credits"),[h,E]=k.default.useState(),C=F.LayoutBroker.globalTexts,[b,w]=((0,B.useBinder)([F.LayoutBroker.model],()=>y(0<F.LayoutBroker.model?.credits?.available?"suggestions":"credits"),"credits.change"),(0,B.useTexts)(S.module.specifier));var M,_;return u&&b?(e=()=>{v(""),y("suggestions"),d()},M={view:x,owner:t,onConsume:l,error:h,setError:E,onClose:d,activity:r,activities:o,showRelated:i,texts:{...w,title:a,description:s},onGenerate:async()=>{try{if(!c||""!==g&&g){if(p(!0),!m)throw Error("No callback provided");var e=await m({notes:g});e?.error?E(w.errors[e.error]??w.errors.default):d()}else E("Please provide a description")}catch(e){console.error(e)}finally{p(!1)}},setView:y,globalTexts:C,notes:g,fetching:f,setNotes:v},_=0<F.LayoutBroker.model?.credits?.available?x:"credits",k.default.createElement(P.ModalContext.Provider,{value:M},k.default.createElement(R.Modal,{show:!0,onClose:e,closeBackdrop:!1},k.default.createElement(j.AnimatePresence,null,k.default.createElement(q.ConditionalContainer,{condition:_,options:{credits:k.default.createElement(A.RequestCreditsContainer,null),suggestions:k.default.createElement(N.SuggestionsForm,null),examples:k.default.createElement(T.SuggestionExamples,null)},placeholder:k.default.createElement(A.RequestCreditsContainer,null)}))))):null};var k=e("react"),R=e("pragmate-ui/modal"),B=e("@beyond-js/react-18-widgets/hooks"),S=e("beyond_context"),j=e("framer-motion"),N=e("./suggestions"),P=e("./context"),T=e("./examples"),A=e("./request-credits"),F=e("@aimpact/ailearn-app/main-layout.widget"),q=e("pragmate-ui/components")}}),p.set("./request-credits",{hash:3994175140,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.RequestCreditsContainer=function(){var{onClose:e,owner:t,onConsume:a,globalTexts:n}=(0,r.useModalContext)();return l.default.createElement(l.default.Fragment,null,l.default.createElement(o.RequestCreditsForm,{onConsume:a,owner:t,onClose:e,onCancel:e,globalTexts:n,onSuccess:()=>""}))};var l=e("react"),o=e("@aimpact/ailearn-app/components/ui"),r=e("./context")}}),p.set("./suggestions",{hash:1103044051,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SuggestionsForm=function(){let{fetching:e,setView:t,notes:a,setNotes:n,onGenerate:l,texts:o,error:r}=(0,m.useModalContext)(),i={onChange:e=>{n(e.currentTarget.value)},onClick:l,setView:()=>t("examples"),onBack:()=>t("suggestions")};return s.default.createElement(s.default.Fragment,null,s.default.createElement(c.Form,{className:"modal__content--justified"},s.default.createElement("header",null,s.default.createElement("h3",null,o.title),s.default.createElement("p",null,o.description)),s.default.createElement(u.ErrorRenderer,{error:r}),s.default.createElement(f.RelatedActivityField,null),s.default.createElement(c.Textarea,{label:o.textarea.label,name:"observations",value:a,onChange:i.onChange,placeholder:o.textarea.placeholder})),s.default.createElement("footer",{className:"actions"},s.default.createElement(d.Button,{variant:"primary",onClick:i.onClick,disabled:e},o.actions.generate)),s.default.createElement(u.ProcessContainer,{fetching:e}))};var s=e("react"),c=e("pragmate-ui/form"),u=e("@aimpact/ailearn-app/components/ui"),d=e("pragmate-ui/components"),m=e("./context"),f=e("./activity/related-activity")}}),f.exports.descriptor=[{im:"./activity/index",from:"RefinementActivityModal",name:"RefinementActivityModal"},{im:"./index",from:"RefinementModal",name:"RefinementModal"}],f.exports.process=function({require:e,prop:t,value:a}){!e&&"RefinementActivityModal"!==t||n("RefinementActivityModal",e?e("./activity/index").RefinementActivityModal:a),!e&&"RefinementModal"!==t||n("RefinementModal",e?e("./index").RefinementModal:a)},n("__beyond_pkg",f),n("hmr",new function(){this.on=(e,t)=>f.hmr.on(e,t),this.off=(e,t)=>f.hmr.off(e,t)}),f.initialise(p)}}});