System.register(["@beyond-js/kernel@0.1.9/bundle","zod@3.23.8","@beyond-js/events@0.0.7/events"],function(i,e){"use strict";var t,r,s,o,n;return i({ReactiveModel:void 0,ModelProperties:void 0,ReactiveProps:void 0,SetPropertiesResult:void 0}),{setters:[function(e){t=e},function(e){r=e},function(e){s=e}],execute:function(){n=t.Bundle,(o=new n({module:{vspecifier:"@aimpact/ailearn-sdk@1.0.0/model"},type:"ts"},e.meta.url).package()).dependencies.update([["zod",r],["@beyond-js/events/events",s]]),(n=new Map).set("./index",{hash:792066241,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ReactiveModel=void 0;var r=e("zod");class i extends e("./proxy").ProxyBase{_reactiveProps={};get reactiveProps(){return this._reactiveProps}properties=[];debounceTimeout;fetching=!1;fetched=!1;processing=!1;processed=!1;loaded=!1;ready=!1;schema;#initialValues={};get initialValues(){return this.#initialValues}get unpublished(){const t=this.getProperties()??{};return Object.keys(t).some(e=>"id"!==e&&"object"!=typeof t[e]&&t[e]!==this.#initialValues[e])}get isUnpublished(){return this.unpublished}constructor({properties:e,...t}={properties:[]}){super(),this.defineReactiveProps(["fetching","fetched","processing","processed","loaded"],!1),e&&(this.properties=e,this.defineReactiveProps(e,{...t}))}setInitialValues(t){if(console.log("initial values",t),t){const r={};this.properties.forEach(e=>{t.hasOwnProperty(e)?r[e]=t[e]:r[e]=void 0}),this.set(t),this.#initialValues=r}return this.#initialValues}defineReactiveProp(r,e){this._reactiveProps[r]=e,Object.defineProperty(this,r,{get:()=>this._reactiveProps[r],set:e=>{var t;void 0!==e&&e===this._reactiveProps[r]||(t=this._reactiveProps[r],this._reactiveProps[r]=e,this.trigger(r+".changed",{value:e,previous:t}))},enumerable:!0,configurable:!0})}defineReactiveProps(e,t){for(const i of e){var r=Object.getOwnPropertyDescriptor(this,i),r=t?.[i]??r?.value;this.defineReactiveProp(i,r)}}getProperty(e){return this._reactiveProps[e]}setProperty(e,t){this._reactiveProps[e]=t}validateProperty(e,t){return this.schema?this.schema.shape[e]?(t=this.schema.shape[e].safeParse(t)).success?{valid:!0,error:null}:{valid:!1,error:t.error}:{valid:!1,error:new r.ZodError([{path:[e],message:`Property ${e} is not defined in the schema`,code:"custom"}])}:{valid:!0,error:null}}isSameObject=(e,t)=>JSON.stringify(e)===JSON.stringify(t);validate(r){var e=Object.keys(r);const i={};return e.forEach(e=>{var t;this.properties&&this.properties.includes(e)?(t=this.validateProperty(e,r[e])).valid||(i[e]=t.error):console.trace("is not a property",e)}),{valid:!!Object.keys(i).length,errors:i}}set(i){var e=Object.keys(i);let s=!1;const o={};return e.forEach(e=>{var t,r;this.properties&&this.properties.includes(e)?(t=this.validateProperty(e,i[e])).valid?(r="object"==typeof i[e]&&this.isSameObject(i[e],this[e]),this[e]===i[e]||r||Object.getOwnPropertyDescriptor(this,e)?.set&&(this[e]=i[e],s=!0)):o[e]=t:console.trace("is not a property",e,this.constructor.name)}),s&&this.triggerEvent(),{updated:s,errors:o}}getProperties(){const t={};return this.properties,this.properties.forEach(e=>{t[String(e)]=this[e]}),t}triggerEvent=(e="change",t={})=>{let{delay:r,...i}=t;r=r??100,null!==this.debounceTimeout&&clearTimeout(this.debounceTimeout),this.debounceTimeout=globalThis.setTimeout(()=>{this.trigger(e,i),this.debounceTimeout=null},r)}}t.ReactiveModel=i}}),n.set("./proxy",{hash:3546518589,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyBase=void 0;class r extends e("@beyond-js/events/events").Events{constructor(){super();var e=new Proxy(this,{get:(e,t,r)=>{var i;if(t in e)return"function"==typeof(i=e[t])?i.bind(e):i;if(t in e)return Reflect.get(e,t,r);throw new Error(`Property ${String(t)} does not exist`)},set:(e,t,r)=>(e[t]=r,!0)});return Object.assign(this,e)}}t.ProxyBase=r}}),n.set("./types/index",{hash:2839167194,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})}}),o.exports.descriptor=[{im:"./index",from:"ReactiveModel",name:"ReactiveModel"},{im:"./types/index",from:"ModelProperties",name:"ModelProperties"},{im:"./types/index",from:"ReactiveProps",name:"ReactiveProps"},{im:"./types/index",from:"SetPropertiesResult",name:"SetPropertiesResult"}],o.exports.process=function({require:e,prop:t,value:r}){!e&&"ReactiveModel"!==t||i("ReactiveModel",e?e("./index").ReactiveModel:r),!e&&"ModelProperties"!==t||i("ModelProperties",e?e("./types/index").ModelProperties:r),!e&&"ReactiveProps"!==t||i("ReactiveProps",e?e("./types/index").ReactiveProps:r),!e&&"SetPropertiesResult"!==t||i("SetPropertiesResult",e?e("./types/index").SetPropertiesResult:r)},i("__beyond_pkg",o),i("hmr",new function(){this.on=(e,t)=>o.hmr.on(e,t),this.off=(e,t)=>o.hmr.off(e,t)}),o.initialise(n)}}});