System.register(["@beyond-js/kernel@0.1.9/bundle","@beyond-js/reactive@1.2.0/model","uuid@10.0.0","@aimpact/ailearn-sdk@1.0.0/model"],function(r,e){"use strict";var t,s,i,o,n,a;return r({Item:void 0,RegistryFactory:void 0,StoreRecords:void 0,IItemProps:void 0}),{setters:[function(e){t=e},function(e){s=e},function(e){i=e},function(e){o=e}],execute:function(){a=t.Bundle,(n=new a({module:{vspecifier:"@aimpact/ailearn-sdk@1.0.0/entities/item"},type:"ts"},e.meta.url).package()).dependencies.update([["@beyond-js/reactive/model",s],["uuid",i],["@aimpact/ailearn-sdk/model",o]]),(a=new Map).set("./index",{hash:2870997763,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Item=void 0;var s=e("@beyond-js/reactive/model"),r=e("./registry/factory");class i extends s.ReactiveModel{#factory;static entity;#registry;get registry(){return this.#registry}constructor({entity:e,properties:t,...s}){if(super({...s,properties:t}),!e)throw new Error("Entity is required");this.#factory=r.RegistryFactory.getInstance(e),t=this.#factory.get(this.id,s),e=(this.#registry=t).getValues(),this.setInitialValues(e),this.#registry.on("change",this.registryListener.bind(this)),this.properties.forEach(e=>{"string"==typeof e&&this.on(e+".changed",()=>{this.#registry.setValues({[e]:this.getProperty(e)})})})}registryListener(e){super.set(this.#registry.getValues())}set(e){var t=super.set(e);return t.updated&&this.#registry.setValues(e),t}load(){console.warn(this.constructor.name+": 'load' method is not implemented.")}save(){console.warn(this.constructor.name+": 'save' method is not implemented.")}publish(){console.warn(this.constructor.name+": 'publish' method is not implemented.")}delete(){console.warn(this.constructor.name+": 'delete' method is not implemented.")}}t.Item=i}}),a.set("./registry/factory",{hash:2068299379,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.RegistryFactory=void 0;var s=e("@beyond-js/reactive/model"),r=e("./");class i extends s.ReactiveModel{static#instances=new Map;items=new Map;#name;constructor(e,t){super({properties:t}),this.#name=e,this.ready=!0}get(e,t){console.log(99,this,e,t,this.items),e&&this.items.has(e)||(console.log("new registry for",this.#name,e,this.constructor.name,this.properties),s=t?{...t}:{id:e,properties:this.properties,...t},e=(s=new r.Registry(s)).id,this.items.set(e,s));var s=this.items.get(e);return t&&s.setValues(t),s}static getInstance(e,t){return this.#instances.has(e)||this.#instances.set(e,new i(e,t)),this.#instances.get(e)}}t.RegistryFactory=i}}),a.set("./registry/index",{hash:1816085515,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Registry=void 0;var s=e("@beyond-js/reactive/model"),r=e("uuid");class i extends s.ReactiveModel{#id;#instanceId;#isDeleted=!1;get id(){return this.#id}get instanceId(){return this.#instanceId}#values;get values(){return this.#values}get deleted(){return this.#isDeleted}#propertyNames=[];set deleted(e){e!==this.#isDeleted&&(this.#isDeleted=e,this.triggerEvent())}constructor({properties:e,...t}={id:void 0}){super({properties:e||[]}),e=t.id,this.#instanceId=(0,r.v4)(),this.#id=e??this.#instanceId,this.#values={...t,id:this.#id},this.setValues(t)}updateValue(e,t){this.#values[e]=t}setValues(e){if(!e)return!1;let t=!1;for(const i in e){var s,r;Object.prototype.hasOwnProperty.call(e,i)&&(r=e[s=i])!==this.#values[s]&&(this.updateValue(s,r),t=!0)}return t&&this.trigger("change",{values:this.#values}),t}getValues(){return console.log(111,this.#values),{...this.#values}}}t.Registry=i}}),a.set("./registry/store",{hash:51750468,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StoreRecords=void 0;class s extends e("@beyond-js/reactive/model").ReactiveModel{}new(t.StoreRecords=s)}}),a.set("./registry/types/index",{hash:3079489239,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})}}),a.set("./types",{hash:4273266293,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})}}),n.exports.descriptor=[{im:"./index",from:"Item",name:"Item"},{im:"./registry/factory",from:"RegistryFactory",name:"RegistryFactory"},{im:"./registry/store",from:"StoreRecords",name:"StoreRecords"},{im:"./types",from:"IItemProps",name:"IItemProps"}],n.exports.process=function({require:e,prop:t,value:s}){!e&&"Item"!==t||r("Item",e?e("./index").Item:s),!e&&"RegistryFactory"!==t||r("RegistryFactory",e?e("./registry/factory").RegistryFactory:s),!e&&"StoreRecords"!==t||r("StoreRecords",e?e("./registry/store").StoreRecords:s),!e&&"IItemProps"!==t||r("IItemProps",e?e("./types").IItemProps:s)},r("__beyond_pkg",n),r("hmr",new function(){this.on=(e,t)=>n.hmr.on(e,t),this.off=(e,t)=>n.hmr.off(e,t)}),n.initialise(a)}}});