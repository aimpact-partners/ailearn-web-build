System.register(["@beyond-js/kernel@0.1.9/bundle","@aimpact/chat-sdk@1.0.0/core","@aimpact/chat-sdk@1.0.0/session","@beyond-js/reactive@1.1.12/model","@beyond-js/kernel@0.1.9/core"],function(i,e){"use strict";var t,a,s,r,n,o,c;return i({Wrapper:void 0,AppWrapper:void 0}),{setters:[function(e){t=e},function(e){a=e},function(e){s=e},function(e){r=e},function(e){n=e}],execute:function(){c=t.Bundle,(o=new c({module:{vspecifier:"@aimpact/chat@1.0.1/wrapper"},type:"ts"},e.meta.url).package()).dependencies.update([["@aimpact/chat-sdk/core",a],["@aimpact/chat-sdk/session",s],["@beyond-js/reactive/model",r],["@beyond-js/kernel/core",n]]),(c=new Map).set("./index",{hash:3014365327,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Wrapper=t.AppWrapper=void 0;var a=e("@aimpact/chat-sdk/core"),i=e("@aimpact/chat-sdk/session"),s=e("@beyond-js/reactive/model"),r=e("@beyond-js/kernel/core");class n extends s.ReactiveModel{#chats;get chats(){return this.#chats}#knowledgeBoxes;get knowledgeBoxes(){return this.#knowledgeBoxes}#language=r.languages.current;get language(){return this.#language}set language(e){this.#language=e,this.triggerEvent("app.settings.change")}#audioSpeed=localStorage.getItem("aimpact.audio.speed")?parseInt(localStorage.getItem("aimpact.audio.speed")):1;get audioSpeed(){return this.#audioSpeed}set audioSpeed(e){e&&(this.#audioSpeed=e,localStorage.setItem("aimpact.audio.speed",e.toString()),this.triggerEvent("app.settings.change"))}#accessibility=localStorage.getItem("aimpact.chat.accessibility")?localStorage.getItem("aimpact.chat.accessibility"):"normal";get accesiibility(){return this.#accessibility}set accesiibility(e){this.#accessibility=e,localStorage.setItem("aimpact.chat.accessibility",e),this.triggerEvent("app.settings.change")}set accessibility(e){this.#accessibility=e,localStorage.setItem("aimpact.chat.accessibility",e),this.triggerEvent()}#sharedKnowledgeBoxes;get sharedKnowledgeBoxes(){return this.#sharedKnowledgeBoxes}#currentChat;get currentChat(){return this.#currentChat}set currentChat(e){if(!e?.id)throw new Error("invalid chat");this.#currentChat?.id!==e?.id&&(this.#currentChat=e,this.triggerEvent())}#ready;get isReady(){return this.#ready}constructor(){super(),this.reactiveProps(["isUpdating","selectedKnowledgeBoxId"]),i.sessionWrapper.on("change",this.validateSession.bind(this)),this.load()}validateSession(){i.sessionWrapper.logged&&(this.ready=!1,this.#ready=void 0,this.load())}async load(){if(this.#ready)return this.#ready;var e;this.#ready=new r.PendingPromise,await i.sessionWrapper.isReady,i.sessionWrapper.logged&&(e=new a.KnowledgeBoxes,this.#knowledgeBoxes=e,this.#sharedKnowledgeBoxes=JSON.parse(localStorage.getItem("sharedFolders"))||[],e=new a.Chats,this.#chats=e),this.ready=!0,this.#ready.resolve(!0)}setSettings(t){Object.keys(t).forEach(e=>this[e]=t[e]),this.triggerEvent()}}e=new(t.Wrapper=n),s=t.AppWrapper=e;globalThis.app=s}}),o.exports.descriptor=[{im:"./index",from:"Wrapper",name:"Wrapper"},{im:"./index",from:"AppWrapper",name:"AppWrapper"}],o.exports.process=function({require:e,prop:t,value:a}){!e&&"Wrapper"!==t||i("Wrapper",e?e("./index").Wrapper:a),!e&&"AppWrapper"!==t||i("AppWrapper",e?e("./index").AppWrapper:a)},i("__beyond_pkg",o),i("hmr",new function(){this.on=(e,t)=>o.hmr.on(e,t),this.off=(e,t)=>o.hmr.off(e,t)}),o.initialise(c)}}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9pbmRleC50cyJdLCJuYW1lcyI6WyJfY29yZSIsInJlcXVpcmUiLCJfc2Vzc2lvbiIsIl9tb2RlbCIsIl9jb3JlMiIsIldyYXBwZXIiLCJSZWFjdGl2ZU1vZGVsIiwiI2NoYXRzIiwiY2hhdHMiLCJ0aGlzIiwiI2tub3dsZWRnZUJveGVzIiwia25vd2xlZGdlQm94ZXMiLCIjbGFuZ3VhZ2UiLCJsYW5ndWFnZXMiLCJjdXJyZW50IiwibGFuZ3VhZ2UiLCJ2YWx1ZSIsInRyaWdnZXJFdmVudCIsIiNhdWRpb1NwZWVkIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInBhcnNlSW50IiwiYXVkaW9TcGVlZCIsInNldEl0ZW0iLCJ0b1N0cmluZyIsIiNhY2Nlc3NpYmlsaXR5IiwiYWNjZXNpaWJpbGl0eSIsImFjY2Vzc2liaWxpdHkiLCIjc2hhcmVkS25vd2xlZGdlQm94ZXMiLCJzaGFyZWRLbm93bGVkZ2VCb3hlcyIsIiNjdXJyZW50Q2hhdCIsImN1cnJlbnRDaGF0IiwiY2hhdCIsImlkIiwiRXJyb3IiLCIjcmVhZHkiLCJpc1JlYWR5IiwiY29uc3RydWN0b3IiLCJzdXBlciIsInJlYWN0aXZlUHJvcHMiLCJzZXNzaW9uV3JhcHBlciIsIm9uIiwidmFsaWRhdGVTZXNzaW9uIiwiYmluZCIsImxvYWQiLCJsb2dnZWQiLCJyZWFkeSIsInVuZGVmaW5lZCIsIlBlbmRpbmdQcm9taXNlIiwiYXdhaXQiLCJLbm93bGVkZ2VCb3hlcyIsIkpTT04iLCJwYXJzZSIsIkNoYXRzIiwicmVzb2x2ZSIsInNldFNldHRpbmdzIiwic2V0dGluZ3MiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsImtleSIsIl93cmFwcGVyIiwiZXhwb3J0cyIsIkFwcFdyYXBwZXIiLCJnbG9iYWxUaGlzIiwiYXBwIl0sIm1hcHBpbmdzIjoiNndCQUFBLElBQUFBLEVBQUFDLEVBQUEsd0JBQUEsRUFDQUMsRUFBQUQsRUFBQSwyQkFBQSxFQUNBRSxFQUFBRixFQUFBLDJCQUFBLEVBQ0FHLEVBQUFI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