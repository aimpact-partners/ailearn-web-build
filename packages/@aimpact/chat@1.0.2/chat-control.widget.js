System.register(["@beyond-js/widgets@1.1.0/render","@beyond-js/kernel@0.1.9/bundle","@beyond-js/kernel@0.1.9/styles","@beyond-js/react-18-widgets@1.1.2/base","@aimpact/chat-sdk@1.0.1/startup","@beyond-js/reactive@1.2.0/model","@aimpact/chat-sdk@1.0.1/voice","@aimpact/chat@1.0.2/wrapper","@aimpact/media-manager@0.0.1-beta.1/recorder","@aimpact/chat-sdk@1.0.1/core","@aimpact/chat@1.0.2/extensions","@aimpact/chat-sdk@1.0.1/session","react@18.2.0","pragmate-ui@1.0.0-beta.1/icons","@beyond-js/react-18-widgets@1.1.2/hooks","@aimpact/chat@1.0.2/messages.code","pragmate-ui@1.0.0-beta.1/perfect-scrollbar","@aimpact/chat@1.0.2/shared/components","pragmate-ui@1.0.0-beta.1/preload","@aimpact/chat@1.0.2/shared/hooks","pragmate-ui@1.0.0-beta.1/form","pragmate-ui@1.0.0-beta.1/components","@aimpact/chat@1.0.2/config","pragmate-ui@1.0.0-beta.1/modal","pragmate-ui@1.0.0-beta.1/toast","@aimpact/chat@1.0.2/ui/manager","@aimpact/chat@1.0.2/shared/icons"],function(n,e){var t,a,r,s,o,i,c,l,d,u,m,h,p,f,g,v,y,b,w,E,x,_,C,M,P,S,k,j,N;return n({Controller:void 0,AudioManager:void 0,Chat:void 0,ChatInput:void 0,PermissionsErrorModal:void 0,RecordingButton:void 0,PermissionsModal:void 0,SystemModal:void 0}),{setters:[function(e){t=e},function(e){a=e},function(e){r=e},function(e){s=e},function(e){o=e},function(e){i=e},function(e){c=e},function(e){l=e},function(e){d=e},function(e){u=e},function(e){m=e},function(e){h=e},function(e){p=e},function(e){f=e},function(e){g=e},function(e){v=e},function(e){y=e},function(e){b=e},function(e){w=e},function(e){E=e},function(e){x=e},function(e){_=e},function(e){C=e},function(e){M=e},function(e){P=e},function(e){S=e},function(e){k=e}],execute:function(){N=a.Bundle,(j=new N({module:{vspecifier:"@aimpact/chat@1.0.2/chat-control",multibundle:!0},type:"widget"},e.meta.url).package()).dependencies.update([["@beyond-js/widgets/render",t],["@beyond-js/kernel/styles",r],["@beyond-js/react-18-widgets/base",s],["@aimpact/chat-sdk/startup",o],["@beyond-js/reactive/model",i],["@aimpact/chat-sdk/voice",c],["@aimpact/chat/wrapper",l],["@aimpact/media-manager/recorder",d],["@aimpact/chat-sdk/core",u],["@aimpact/chat/extensions",m],["@aimpact/chat-sdk/session",h],["react",p],["pragmate-ui/icons",f],["@beyond-js/react-18-widgets/hooks",g],["@aimpact/chat/messages.code",v],["pragmate-ui/perfect-scrollbar",y],["@aimpact/chat/shared/components",b],["pragmate-ui/preload",w],["@aimpact/chat/shared/hooks",E],["pragmate-ui/form",x],["pragmate-ui/components",_],["@aimpact/chat/config",C],["pragmate-ui/modal",M],["pragmate-ui/toast",P],["@aimpact/chat/ui/manager",S],["@aimpact/chat/shared/icons",k]]),brequire("@beyond-js/widgets/render").widgets.register([{name:"aimpact-chat-control",attrs:["id","container","disabled","playable"],vspecifier:"@aimpact/chat@1.0.2/chat-control.widget"}]),brequire("@beyond-js/kernel/styles").styles.register("@aimpact/chat@1.0.2/chat-control.widget"),(N=new Map).set("./controller",{hash:4277554695,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Controller=void 0;var a=e("@beyond-js/react-18-widgets/base"),n=e("./views"),r=e("./store");class s extends a.ReactWidgetController{#store;createStore(){return this.#store=new r.StoreManager(this.attributes),globalThis.store=this.#store,this.#store}get Widget(){return n.View}unmount(){super.unmount(),this.#store?.unmount()}}t.Controller=s}}),N.set("./interfaces/messages",{hash:775952468,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})}}),N.set("./store/audio",{hash:1723743756,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AudioManager=void 0;var a=e("@beyond-js/reactive/model"),n=e("@aimpact/chat-sdk/voice"),r=e("@aimpact/chat/wrapper"),s=e("@aimpact/media-manager/recorder");class o extends a.ReactiveModel{#parent;#recorder;get recorder(){return this.#recorder}#players={web:n.Voice,lab:n.VoiceLab};#player="web";get player(){return this.#currentPlayer}#currentPlayer;constructor(e){super({}),this.#recorder=new s.Recorder,this.#parent=e,this.reactiveProps(["autoplay"]),this.#currentPlayer=new this.#players[this.#player]({language:r.AppWrapper.language,rate:r.AppWrapper.audioSpeed}),r.AppWrapper.on("app.settings.change",this.listenAppChanges)}listenAppChanges=()=>{this.#currentPlayer.set({rate:r.AppWrapper.audioSpeed,languuage:r.AppWrapper.language})};selectPlayer(e){if(!this.#players[e])throw new Error(`Player ${e} not found`);this.#player=e,this.trigger("change")}}t.AudioManager=o}}),N.set("./store/index",{hash:1926009055,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StoreManager=void 0;var a=e("@beyond-js/reactive/model"),n=e("@aimpact/chat-sdk/core"),r=e("@aimpact/chat/wrapper"),s=e("./audio"),o=e("@aimpact/chat/extensions"),i=e("@aimpact/chat-sdk/session");class c extends a.ReactiveModel{#messages;#EXTENSIONS=["chat-intro"];get messages(){return this.#messages}#name;get name(){return this.#name}#category;get category(){return this.#category}#chat;get chat(){return this.#chat}#chats=r.AppWrapper.chats;get chats(){return this.#chats.items??[]}#audio=new s.AudioManager(this);get audioManager(){return this.#audio}#kbs=r.AppWrapper.knowledgeBoxes;get kbs(){return this.#kbs.items??[]}#selectedKb;get selectedKb(){return this.#selectedKb}set selectedKb(e){this.#selectedKb=e}#selectedModel="GPT 4";get selectedModel(){return this.#selectedModel}set selectedModel(e){this.#selectedModel=e}#notFound;get notFound(){return this.#notFound}set notFound(e){this.#notFound=e}get selectedKbPath(){return this.#kbs.items.find(e=>e.id===this.#selectedKb)?.path??"No Knowledge Box"}#currentMessage;get currentMessage(){return this.#currentMessage}set currentMessage(e){e?.id!==this.#currentMessage?.id&&(this.#currentMessage=e)}#disabled;get disabled(){return this.#disabled}set disabled(e){this.#disabled!==e&&(this.#disabled=e,this.triggerEvent("change"))}#extensions=new Map;get extensions(){return this.#extensions}#id;constructor(e){super(e.get("id")),this.#id=e.get("id"),this.reactiveProps(["waitingResponse","autoplay"]),this.autoplay=!0,e.on("change",()=>this.checkAttributes(e)),this.load(this.#id)}clean(){this.fetching=!1,this.ready=!1}load=async e=>{if(e)if(i.sessionWrapper.user?.logged){this.fetching=!0;let t=new n.Chat({id:e});if(await t.loadAll({id:e}),globalThis.chat=t,(r.AppWrapper.currentChat=t).found){e=this.#kbs.items.find(e=>e.id===t.knowledgeBoxId),this.#selectedKb=e?e.id:"default",this.audioManager.player.set({language:t.language?.default??r.AppWrapper.language}),t.on("change",()=>{this.#messages=t.messages?.items,this.triggerEvent("new.message")}),this.#chat=t;let a=await o.extensions.load(this.#EXTENSIONS,t.metadata);this.#EXTENSIONS.forEach((e,t)=>{this.#extensions.set(e,a[t])}),this.#messages=t.messages.items,this.fetching=!1,this.ready=!0,this.notFound=!1}else this.fetching=!1,this.ready=!0,this.notFound=!0}else i.sessionWrapper.on("login",this.load);else this.ready=!0,this.notFound=!0};async sendMessage(r){try{if(performance.mark("start"),this.#currentMessage=void 0,"string"!=typeof r||![void 0,"",null].includes(r)){this.fetching=!0,this.waitingResponse=!0;let{message:e,response:t}=await this.#chat.sendMessage(r),a=(this.response=t,this.#currentMessage=e,()=>{this.triggerEvent(`message.${t.id}.updated`)}),n=()=>{e.off("content.updated",a),this.triggerEvent("chat.available"),this.triggerEvent(`message.${t.id}.received`),e.off("response.finished",n)};e.on("content.updated",a),e.on("response.finished",n),this.waitingResponse=!1,this.triggerEvent("new.message")}}catch(e){console.error(e)}finally{this.waitingResponse=!1,this.fetching=!1}}checkAttributes(e){this.disabled="true"===e.get("disabled"),this.playable="true"===e.get("disabled")||void 0===e.get("playable"),this.playable||this.#audio.player?.stop()}unmount(){this.#audio.player?.stop()}}t.StoreManager=c}}),N.set("./views/chat/back-arrow",{hash:3094757389,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.BackArrow=function({store:e,separator:t}){let a=i.default.useRef(null),n=(0,d.useChatContext)().attributes,r=i.default.useRef(null),s=((0,l.useBinder)([e],()=>globalThis.setTimeout(()=>{var e=r.current?.closest(".chat-control__container")?.querySelector(".chat__content");e&&(e.scrollHeight-e.clientHeight-e.scrollTop<=100?(r.current.classList.remove("show"),s()):r.current.classList.add("show"))},100),"new.message"),()=>{t.current?.scrollIntoView({block:"end",behavior:"smooth"})}),o=(i.default.useEffect(()=>{let e=r.current.closest(".chat-control__container").querySelector(".chat__content"),t=()=>{e&&(e.scrollHeight-e.clientHeight-e.scrollTop<=100?r.current.classList.remove("show"):r.current.classList.add("show"))};return e.addEventListener("scroll",t),()=>{e?.removeEventListener("scroll",t)}},[]),"scroll-bottom show circle");return n.has("container")&&(o+="scroll-bottom--"+n.get("container")),e="container__icon "+(n.has("container")?" container--"+n.get("container"):""),i.default.createElement("div",{className:e,ref:r},i.default.createElement(c.IconButton,{ref:a,icon:"backArrow",variant:"tertiary",className:o,onClick:s}))};var i=e("react"),c=e("pragmate-ui/icons"),l=e("@beyond-js/react-18-widgets/hooks"),d=e("../context")}}),N.set("./views/chat/content",{hash:2733643470,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Content=function({separator:e}){let{store:t,texts:a,attributes:n}=(0,h.useChatContext)(),r=t.messages,[,s]=d.default.useState(r.length??[].length),[o,i,c]=(0,u.useExtension)("chat-intro"),l=((0,p.useBinder)([t],()=>{s(t.messages.length)},"new.message"),"chat__content");return n.has("container")&&(l+=" container--"+n.get("container")),d.default.createElement("div",{className:l},d.default.createElement(f.ExtensionRenderer,{component:c,reference:o}),i&&d.default.createElement(d.default.Fragment,null,d.default.createElement(m.Messages,{chat:t.chat,player:t.audioManager.player,current:t.currentMessage,store:t,messages:t.messages,texts:a}),d.default.createElement("div",{ref:e,className:"separator"})))};var d=e("react"),u=e("./use-extension"),m=e("@aimpact/chat/messages.code"),h=e("../context"),p=e("@beyond-js/react-18-widgets/hooks"),f=e("./extension-renderer")}}),N.set("./views/chat/extension-renderer",{hash:1172650975,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionRenderer=function({component:e,reference:t}){var a=(0,r.useChatContext)().store["chat"];return e?n.default.createElement(n.default.Fragment,null,n.default.createElement(e,{ref:t,metadata:JSON.stringify(a.metadata)})):null};var n=e("react"),r=e("../context")}}),N.set("./views/chat/index",{hash:1679945563,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Chat=function(e){var t=(0,o.useChatContext)().store,a=t.extensions.get("chat-intro"),[n]=s.default.useState(!1),r=s.default.useRef(null);return s.default.createElement("div",{className:"chat-control__container"+(n?" reader__container":"")},s.default.createElement(l.Content,{separator:r}),s.default.createElement("div",{className:"footer-container"},s.default.createElement(c.BackArrow,{store:t,separator:r}),!a?.metadata?.avoidChat&&s.default.createElement(i.ChatInput,{store:t,isWaiting:!1})))};var s=e("react"),o=e("../context"),i=e("../input"),c=e("./back-arrow"),l=e("./content")}}),N.set("./views/chat/skeleton",{hash:975554159,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ChatSkeleton=function(){var{}=(0,n.useChatContext)();return a.default.createElement("div",{className:"chat-container"},a.default.createElement(r.CollapsibleHeader,{title:a.default.createElement(s.Preload,{width:"400px",height:"30px"})}),a.default.createElement("div",{className:"send"}))};var a=e("react"),n=e("../context"),r=e("@aimpact/chat/shared/components"),s=e("pragmate-ui/preload")}}),N.set("./views/chat/use-extension",{hash:2889823330,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.useExtension=function(e){let[t,a]=o.default.useState(!1),n=o.default.useRef(null),r=(0,i.useChatContext)().store["extensions"],s=r.get(e)?.control;return o.default.useEffect(()=>{let e=e=>a(!0);if(n?.current)return n.current.addEventListener("ready",e),()=>n.current?.removeEventListener("ready",e)},[n?.current]),[n,t||!s,s]};var o=e("react"),i=e("../context")}}),N.set("./views/context",{hash:2340798180,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.useChatContext=t.ChatContext=void 0;var a=e("react");let n=t.ChatContext=a.default.createContext({});t.useChatContext=()=>a.default.useContext(n)}}),N.set("./views/index",{hash:4081883635,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.View=function({store:e,...t}){let[,a]=f.default.useState(e.fetching),[n,r]=f.default.useState(e.ready),[s,o]=(0,E.useTexts)(x.module.specifier),[i,c]=f.default.useState("top"),{autoplay:l,messages:d,audioManager:{player:u}}=e,m=((0,g.useBinder)([e],()=>{a(e.fetching),r(e.ready)}),{setScrollPosition:e=>{e||console.trace("setScrollPosition called with no value"),c(e)},scrollPosition:i,store:e,texts:o,autoplay:l,messages:d,player:u,attributes:t.attributes}),h=e.notFound?w.ChatNotFound:v.Chat,p=n&&s?h:b.ChatSkeleton;return f.default.createElement(y.ChatContext.Provider,{value:m},f.default.createElement(p,null))};var f=e("react"),g=e("@beyond-js/react-18-widgets/hooks"),v=e("./chat"),y=e("./context"),b=e("./chat/skeleton"),w=e("./not-found"),E=e("@aimpact/chat/shared/hooks"),x=e("beyond_context")}}),N.set("./views/input/context",{hash:3186216388,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.useInputContext=t.InputContext=void 0;var a=e("react");let n=t.InputContext=a.default.createContext(null);t.useInputContext=()=>a.default.useContext(n)}}),N.set("./views/input/index",{hash:4119802086,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ChatInput=void 0;var g=e("react"),v=e("pragmate-ui/form"),y=e("pragmate-ui/components"),b=e("@aimpact/chat/config"),w=e("@beyond-js/react-18-widgets/hooks"),E=e("./context"),x=e("./recording"),_=e("./system/index"),C=e("./text-input");t.ChatInput=({store:t,isWaiting:e=!1})=>{let[a,n]=g.default.useState(!1),[r,s]=g.default.useState(!1),[o,i]=g.default.useState(!1),[c,l]=g.default.useState(""),d=t.audioManager["recorder"];(0,w.useBinder)([t],()=>i(t.waitingResponse));var u={disabled:!1},m=async()=>{l(""),s(!0),t.sendMessage(c)},h=c.length?m:async e=>{s(!0),e.preventDefault(),e.stopPropagation(),e=await d.stop(),t.sendMessage(e),n(!a),s(!1)};!["",void 0,null].includes(c.replaceAll("\n",""))&&c.trim().length||(u.disabled=!0);let p="input-container "+(o||e||r?"is-fetching":"");t.disabled&&(p+="is-disabled");var f=b.default.params.config.system;return g.default.createElement("div",{className:p},g.default.createElement(E.InputContext.Provider,{value:{store:t,onSubmit:h,recorder:d,setRecording:n,recording:a,disabled:t.disabled}},f&&g.default.createElement(_.SystemModal,{chat:t.chat}),g.default.createElement(v.Form,{onSubmit:h,className:"chat-input-form"},g.default.createElement(C.TextInput,{store:t,text:c,disabled:t.disabled,setFetching:s,fetching:r||a||o||e,setText:l,handleSend:m}),g.default.createElement("span",{className:"input__icon  input__icon--right"},c.length?g.default.createElement(y.Button,{icon:"send-arrow",onClick:m,disabled:u.disabled||t.waitingResponse}):g.default.createElement(x.RecordingButton,{store:t,disabled:a||t.waitingResponse})))))}}}),N.set("./views/input/player",{hash:964401253,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0;var n=e("react"),r=e("pragmate-ui/icons"),s=e("./timer"),o=e("./context");t.Player=()=>{let{onSubmit:e,recorder:t,setRecording:a}=(0,o.useInputContext)();return n.default.createElement("div",{className:"recording-player__container"},n.default.createElement(r.IconButton,{className:"circle",icon:"delete",onClick:async e=>{e.preventDefault(),await t.stop(),a(!1)}}),n.default.createElement(s.Timer,{action:"start"}),n.default.createElement(r.IconButton,{icon:"send",className:"circle",variant:"primary",onClick:e}))}}}),N.set("./views/input/recording/error-modal",{hash:724562986,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PermissionsErrorModal=void 0;var n=e("react"),r=e("pragmate-ui/icons"),s=e("pragmate-ui/modal"),o=e("../../context");t.PermissionsErrorModal=({show:e,onClose:t})=>{var a;return e?(e=(0,o.useChatContext)().texts,{title:e,description:a}=e.permissions.error,n.default.createElement(n.default.Fragment,null,n.default.createElement(s.AlertModal,{className:"modal--centered",open:!0,show:!0,onClose:t,centered:!0},n.default.createElement("div",{className:"permissions__modal-container"},n.default.createElement("div",{className:"title-intro__modal-container"},n.default.createElement("h3",null,e)),n.default.createElement(r.Icon,{className:"mic__modal-icon lg my-10",icon:"mic"}),n.default.createElement("p",{className:"description__modal-text"},a))))):null}}}),N.set("./views/input/recording/index",{hash:2933233769,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.RecordingButton=void 0;var m=e("react"),h=e("pragmate-ui/components"),p=e("../player"),f=e("../../context"),g=e("../context"),v=e("./modal"),y=e("./error-modal");t.RecordingButton=({store:{},disabled:e})=>{let{recorder:t,recording:a,setRecording:n}=(0,g.useInputContext)(),[r,s]=(0,m.useState)(!1),[o,i]=(0,m.useState)(!1),[c,l]=(0,m.useState)(!1),[d,u]=(0,m.useState)(globalThis?.localStorage.getItem("aimpact.recording.permission")),{}=(0,f.useChatContext)();return a?m.default.createElement(p.Player,null):m.default.createElement(m.default.Fragment,null,m.default.createElement(h.Button,{icon:"mic",fetching:r,onClick:async e=>{try{e.preventDefault(),s(!0),d&&"true"===d?(async()=>{try{await t.record(),n(!a)}catch(e){l(!0)}})():i(!0)}catch(e){console.log(30),l(!0)}finally{s(!1)}},disabled:e||r}),m.default.createElement(v.PermissionsModal,{show:o,onClose:e=>{s(!1),i(!1)},onConfirm:()=>{t.hasPermissions().then(()=>{globalThis?.localStorage.setItem("aimpact.recording.permission","true"),u("true")}).catch(e=>{console.log("permisos no concedidos"),l(!0)})}}),m.default.createElement(y.PermissionsErrorModal,{show:c,onClose:()=>l(!1)}))}}}),N.set("./views/input/recording/modal",{hash:452957598,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PermissionsModal=void 0;var s=e("react"),o=e("pragmate-ui/icons"),i=e("pragmate-ui/modal"),c=e("../../context");t.PermissionsModal=({show:e,onClose:t,onConfirm:a})=>{var n,r;return e?(n=(e=(0,c.useChatContext)().texts).permissions.title,r=e.permissions.description,s.default.createElement(s.default.Fragment,null,s.default.createElement(i.AlertModal,{show:!0,onClose:t,centered:!0,onConfirm:a},s.default.createElement("div",{className:"permissions__modal-container"},s.default.createElement("div",{className:"title-intro__modal-container"},s.default.createElement("span",{className:"intro__modal-text p2"},e.permissions.intro),s.default.createElement("h3",null,n)),s.default.createElement(o.Icon,{className:"mic__modal-icon lg my-10",icon:"mic"}),s.default.createElement("p",{className:"description__modal-text"},r))))):null}}}),N.set("./views/input/system/form",{hash:42578936,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.UIForm=void 0;var u=e("react"),m=e("pragmate-ui/form"),h=e("pragmate-ui/components"),p=e("pragmate-ui/toast"),f=e("../../context");t.UIForm=({chat:t,closeModal:e})=>{let[a,n]=u.default.useState(t?.system),[r,s]=u.default.useState(!1),[o,i]=u.default.useState(!1),c=(0,f.useChatContext)().texts;function l(){s(!1),i(!1),n(t?.system),e()}var d=async e=>{e.preventDefault(),i(!0),(e=await t.publish({system:a})).status||s(e.error),p.toast.success(c.system.success),l()};return u.default.createElement(m.Form,{onSubmit:d,className:"system-form"},r&&u.default.createElement("div",{className:"error error-container"},r),u.default.createElement(m.Textarea,{rows:5,value:a,placeholder:"Agrega tu contenido...",onChange:function(e){e=e.target.value,n(e)}}),u.default.createElement("footer",null,u.default.createElement(h.Button,{icon:"close-circle",label:"Cancel",variant:"link outline",onClick:l}),u.default.createElement(h.Button,{type:"submit",icon:"save",onClick:d,label:"Submit",loading:o})))}}}),N.set("./views/input/system/index",{hash:4053747498,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SystemModal=void 0;var r=e("react"),s=e("./form"),o=e("pragmate-ui/components"),i=e("pragmate-ui/icons"),c=e("../../context");t.SystemModal=({chat:e})=>{let t=r.default.useRef(null),a=(0,c.useChatContext)().texts["assistant"],n=()=>t.current.close();return r.default.createElement("div",{className:"input__icon  input__icon--left"},r.default.createElement(o.Button,{icon:"code",onClick:()=>t.current.showModal(),mode:"primary"}),r.default.createElement("dialog",{ref:t,onClose:n},r.default.createElement(i.IconButton,{icon:"close",className:"close",onClick:n}),r.default.createElement("header",null,r.default.createElement("h1",null,a.assistant)),r.default.createElement("div",null,r.default.createElement("p",null,a.message)),r.default.createElement(s.UIForm,{chat:e,closeModal:n})))}}}),N.set("./views/input/text-input",{hash:1981085893,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TextInput=function({setFetching:e,store:t,setText:a,handleSend:n,fetching:r,text:s,disabled:o}){let i=l.default.useRef(null),c=(l.default.useEffect(()=>{var e=i.current;e.style.height="auto",e.style.height=1==s.length?"auto":e.scrollHeight+"px",["undefined",void 0].includes(s.replaceAll("\n",""))},[s]),(0,d.useBinder)([t],()=>{globalThis.setTimeout(()=>i.current.focus(),300),e(!1)},"chat.available"),{disabled:r||o});return l.default.createElement("textarea",{...c,rows:1,value:s,onChange:e=>{e=e.target.value,["undefined",void 0].includes(e.replaceAll("\n"))||a(e)},onKeyDown:e=>{var t;"Enter"!==e.key||(t=e.target.value.replaceAll("\n"),["",void 0,null].includes(t))||(e.shiftKey?a(e=>e+"\n"):n())},autoFocus:!0,className:"input__textarea",ref:i})};var l=e("react"),d=e("@beyond-js/react-18-widgets/hooks")}}),N.set("./views/input/timer/index",{hash:1478628646,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=function({action:e}){var t=["restart","start"].includes(e),e="restart"===e,[,t,e,,]=(0,n.useTimer)(t,e),e=e.toString().padStart(2,"0"),t=t.toString().padStart(2,"0");return a.default.createElement("div",{className:"timer-message__container"},a.default.createElement("span",null,""+t,":"),a.default.createElement("span",null,""+e))};var a=e("react"),n=e("./use-timer")}}),N.set("./views/input/timer/use-timer",{hash:1623060353,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.useTimer=function(t,e){let[a,n]=c(0),r=(l(()=>{let e;return t&&(e=setInterval(()=>{n(e=>e+1)},10)),()=>{clearInterval(e)}},[t]),l(()=>{e&&n(0)},[e]),a%100),s=Math.floor(a/100%60),o=Math.floor(a/6e3%60),i=Math.floor(a/36e4);return[i,o,s,r]};let a=e("react"),{useState:c,useEffect:l}=a.default}}),N.set("./views/not-found",{hash:4064363242,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ChatNotFound=function(){return o.AppWrapper.ready?a.default.createElement("div",{className:"not__found_chat "},a.default.createElement("img",{src:"/assets/not-found.png",alt:"Chat not found"}),a.default.createElement("span",{className:"not__found__details"},a.default.createElement(s.Icon,{icon:c.ICONS["aip-chat-logo"],className:"not-found__ailogo"}),a.default.createElement("h2",null,"Chat not found"),a.default.createElement("p",null,a.default.createElement("strong",null,"We couldn't find a chat associated with that ID.")," ",a.default.createElement("br",null),"Please enter URL correctly or create a new chat."),a.default.createElement(r.Button,{icon:"chat",onClick:function(){n.UIManager.modalOpened=!0},label:"Start New Chat"}))):a.default.createElement(i.PreloadScreen,null)};var a=e("react"),n=e("@aimpact/chat/ui/manager"),r=e("pragmate-ui/components"),s=e("pragmate-ui/icons"),o=e("@aimpact/chat/wrapper"),i=e("@aimpact/chat/shared/components"),c=e("@aimpact/chat/shared/icons")}}),j.exports.descriptor=[{im:"./controller",from:"Controller",name:"Controller"},{im:"./store/audio",from:"AudioManager",name:"AudioManager"},{im:"./views/chat/index",from:"Chat",name:"Chat"},{im:"./views/input/index",from:"ChatInput",name:"ChatInput"},{im:"./views/input/recording/error-modal",from:"PermissionsErrorModal",name:"PermissionsErrorModal"},{im:"./views/input/recording/index",from:"RecordingButton",name:"RecordingButton"},{im:"./views/input/recording/modal",from:"PermissionsModal",name:"PermissionsModal"},{im:"./views/input/system/index",from:"SystemModal",name:"SystemModal"}],j.exports.process=function({require:e,prop:t,value:a}){!e&&"Controller"!==t||n("Controller",e?e("./controller").Controller:a),!e&&"AudioManager"!==t||n("AudioManager",e?e("./store/audio").AudioManager:a),!e&&"Chat"!==t||n("Chat",e?e("./views/chat/index").Chat:a),!e&&"ChatInput"!==t||n("ChatInput",e?e("./views/input/index").ChatInput:a),!e&&"PermissionsErrorModal"!==t||n("PermissionsErrorModal",e?e("./views/input/recording/error-modal").PermissionsErrorModal:a),!e&&"RecordingButton"!==t||n("RecordingButton",e?e("./views/input/recording/index").RecordingButton:a),!e&&"PermissionsModal"!==t||n("PermissionsModal",e?e("./views/input/recording/modal").PermissionsModal:a),!e&&"SystemModal"!==t||n("SystemModal",e?e("./views/input/system/index").SystemModal:a)},n("__beyond_pkg",j),n("hmr",new function(){this.on=(e,t)=>j.hmr.on(e,t),this.off=(e,t)=>j.hmr.off(e,t)}),j.initialise(N)}}});