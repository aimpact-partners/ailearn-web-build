System.register(["@beyond-js/widgets@1.1.0/render","@beyond-js/kernel@0.1.9/bundle","@beyond-js/kernel@0.1.9/styles","@beyond-js/react-18-widgets@1.1.2/page","@beyond-js/reactive@1.2.0/model","react@18.2.0","pragmate-ui@1.0.0-beta.6/components","@aimpact/auth@0.0.1/components","pragmate-ui@1.0.0-beta.6/image","pragmate-ui@1.0.0-beta.6/form","@beyond-js/react-18-widgets@1.1.2/hooks"],function(r,e){var t,a,s,o,n,i,l,c,d,m,u,p,f;return r({Controller:void 0,View:void 0}),{setters:[function(e){t=e},function(e){a=e},function(e){s=e},function(e){o=e},function(e){n=e},function(e){i=e},function(e){l=e},function(e){c=e},function(e){d=e},function(e){m=e},function(e){u=e}],execute:function(){f=a.Bundle,(p=new f({module:{vspecifier:"@aimpact/auth@0.0.1/auth-recover-password",multibundle:!0},type:"widget"},e.meta.url).package()).dependencies.update([["@beyond-js/widgets/render",t],["@beyond-js/kernel/styles",s],["@beyond-js/react-18-widgets/page",o],["@beyond-js/reactive/model",n],["react",i],["pragmate-ui/components",l],["@aimpact/auth/components",c],["pragmate-ui/image",d],["pragmate-ui/form",m],["@beyond-js/react-18-widgets/hooks",u]]),brequire("@beyond-js/widgets/render").widgets.register([{name:"auth-recover-password-page",vspecifier:"@aimpact/auth@0.0.1/auth-recover-password.widget",is:"page",route:"/auth/recover-password",layout:"auth-layout"}]),brequire("@beyond-js/kernel/styles").styles.register("@aimpact/auth@0.0.1/auth-recover-password.widget"),(f=new Map).set("./controller",{hash:111210419,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Controller=void 0;var a=e("@beyond-js/react-18-widgets/page"),r=e("./store"),s=e("./views");class o extends a.PageReactWidgetController{#store;createStore(){return this.#store=new r.StoreManager,this.#store}get Widget(){return s.View}show(){this.#store.load(this.uri.qs.get("token"))}}t.Controller=o}}),f.set("./store",{hash:69408933,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StoreManager=void 0;var a=e("@beyond-js/reactive/model"),r=e("./temp-hardcoded/functions");class s extends a.ReactiveModel{token;#user;get user(){return this.#user}async load(e){try{var t;if(this.token!==e)return this.token=e,(t=await(0,r.getUserByToken)({token:e})).status&&(this.#user=t.data.user),t}catch(e){console.error(e)}finally{this.ready=!0}}async save(e){try{var t=await(this.ready=!1,r.updatePassword)(e);return t.status,t}catch(e){console.error(e)}finally{this.ready=!0}}}t.StoreManager=s}}),f.set("./temp-hardcoded/constants",{hash:2913013158,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.userData=void 0,t.userData=[{token:"token1",user:{email:"example@gmail.com",id:"randomId",name:"exampleName"}},{token:"token3",user:{email:"example2@gmail.com",id:"randomId2",name:"exampleName2"}},{token:"token5",user:{email:"example3@gmail.com",id:"randomId3",name:"exampleName3"}}]}}),f.set("./temp-hardcoded/functions",{hash:2135906246,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.updatePassword=t.getUserByToken=void 0;var r=e("./constants");t.getUserByToken=({token:a})=>new Promise(t=>{setTimeout(()=>{var e=(e=r.userData.find(e=>e.token===a))?{status:!0,data:{user:e.user}}:{status:!1,data:{error:"Token doesn't exist"}};t(e)},1e3)}),t.updatePassword=({data:a})=>new Promise(t=>{setTimeout(()=>{let e=!0;a.password||(e=!1),t({status:e,data:e?{}:{error:"Token doesn't exist"}})},1e3)})}}),f.set("./temp-hardcoded/interfaces",{hash:3173443516,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})}}),f.set("./views/empty-redirect",{hash:2251813909,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyRedirect=function({texts:e}){return a.default.createElement(s.EmptyCard,{text:e.empty.title,description:e.empty.description},a.default.createElement(r.Link,{href:"/",className:"redirect_btn btn btn-primary"},e.empty.back),a.default.createElement(o.Image,{src:"https://res.cloudinary.com/versus/image/upload/f_auto,q_auto,w_200/v1/AImpact/fujhhbk2li36uxgyaipn",className:"sad-explorer__img",alt:"Sad Explorer"}))};var a=e("react"),r=e("pragmate-ui/components"),s=e("@aimpact/auth/components"),o=e("pragmate-ui/image")}}),f.set("./views/form",{hash:180851491,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.RecoveryByTokenForm=function({store:a,texts:r,setSuccess:s}){let[o,n]=(0,k.useState)({password:"",confirmPassword:""}),[,i]=(0,k.useState)(!1),[e,l]=(0,k.useState)(""),[t,c]=(0,k.useState)(0),[d,m]=(0,k.useState)(0),{password:u,confirmPassword:p}=o,f=({currentTarget:e})=>{var t={...o};t[e.name]=e.value,v(e.value,e.id),n(t),l("")},h=e=>{l(e)},w=e=>"password"!==e,g=(t,e)=>{let a=0;8<=t.length&&t.length<=32&&(a+=1),[/[A-Za-z]/,/\d/,/[A-Z]/,/[a-z]/,/[!@#$%^&*()_+{}\[\]:;<>,.?~\\/-]/].forEach(e=>{e.test(t)&&(a+=1)}),"password"===e&&c(a),"confirmPassword"===e&&m(a)},v=(e,t)=>{w(t)&&(o.password!==o.confirmPassword?h(r.errorMessages.match):/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[!@#$%^&*(),.?":{}|<>])(?=.*[A-Z])(?=.*[a-z]).{8,32}$/.test(o.password)||(o.password.length<8||32<o.password.length?h(r.errorMessages.minimumCharacters):/[A-Za-z]/.test(o.password)?/[0-9!@#$%^&*()-_=+{};:,<.>/?]/.test(o.password)?/(?=.*[A-Z])/.test(o.password)?/(?=.*[a-z])/.test(o.password)?/(?=.*[!@#$%^&*(),.?":{}|<>])/.test(o.password)||h(r.errorMessages.minimumSpecial):h(r.errorMessages.minimumLower):h(r.errorMessages.minimumUpper):h(r.errorMessages.minimumNumbers):h(r.errorMessages.minimumLetters))),g(e,t)},y=!!u&&!!p&&!e,_=`password-input__status-${t} `+(e?" error":""),b=`confirm-password-input__status-${d} `+(e?" error":""),E=`error-message${e?" visible":""} type-${t}  p2`;return k.default.createElement(k.default.Fragment,null,k.default.createElement("h3",{className:"restore-title__text h2"},r.title),k.default.createElement("span",{className:"restore-subtitle__text p2"},r.subTitle),k.default.createElement(x.Form,{onSubmit:async e=>{try{i(!0),e.preventDefault();var t=await a.save(o);if(!t.status)return"Firebase: Error (auth/network-request-failed)."===t.error?l(r.errorMessages.lostConnection):l(r.errorMessages.internalFail);s(!0),n({password:"",confirmPassword:""})}catch(e){l(r.errorMessages.internalFail)}finally{i(!1)}}},k.default.createElement("div",{className:"restore-form__container"},k.default.createElement(x.Input,{className:_,placeholder:r.labelPassword,type:"password",name:"password",value:u,onChange:f,required:!0}),k.default.createElement("div",{className:"inputs-form__container"},k.default.createElement(x.Input,{className:b,placeholder:r.labelConfirmPassword,type:"password",name:"confirmPassword",value:p,onChange:f,onBlur:v,required:!0}),k.default.createElement("p",{className:E},e),k.default.createElement("div",{className:"term__container"},k.default.createElement("span",{className:"conditions-title__text h6"},r.passwordConditions?.title),k.default.createElement("ul",{className:"conditions-pass__container"},k.default.createElement("li",{className:"p2"},r.passwordConditions?.minimumCharacters),k.default.createElement("li",{className:"p2"},r.passwordConditions?.minimumLetters),k.default.createElement("li",{className:"p2"},r.passwordConditions?.minimumSpecial)))),k.default.createElement(N.Button,{type:"submit",disabled:!y,variant:"primary",label:r.recoveryButton}))))};var k=e("react"),x=e("pragmate-ui/form"),N=e("pragmate-ui/components")}}),f.set("./views/index",{hash:3985160010,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.View=function({store:e}){let[t,a]=(0,l.useState)(!1),[r,s]=(0,m.useTexts)(u.module.specifier),[o,n]=(0,l.useState)(e.ready);var i;return(0,m.useBinder)([e],()=>{n(e.ready)}),r&&o?(i=t?f.PasswordChanged:p.RecoveryByTokenForm,i=e.user&&e.token?i:h.EmptyRedirect,l.default.createElement("div",{className:"auth-page-container"},l.default.createElement("div",{className:"first-panel"},l.default.createElement("aimpact-login-presentation",{"dynamic-children":!0})),l.default.createElement("div",{className:"second-panel"},l.default.createElement("div",{className:"recovery-container"},l.default.createElement("div",{className:"recovery__header"},l.default.createElement(d.ThemeSwitch,{text:s.theme})),l.default.createElement("div",{className:"recovery__content"},l.default.createElement("div",{className:"recovery-form__container"},l.default.createElement(i,{texts:s,store:e,setSuccess:a}))))))):l.default.createElement(c.Spinner,{active:!0,type:"primary"})};var l=e("react"),c=e("pragmate-ui/components"),d=e("@aimpact/auth/components"),m=e("@beyond-js/react-18-widgets/hooks"),u=e("beyond_context"),p=e("./form"),f=e("./password-changed"),h=e("./empty-redirect")}}),f.set("./views/password-changed",{hash:274144720,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordChanged=function({texts:e}){return a.default.createElement("div",{className:"well-recover__container"},a.default.createElement("div",{className:"well-recover-text__container visible"},a.default.createElement("h3",{className:"restore-title__text h4"},e.wellDone.title),a.default.createElement("span",{className:"p2"},e.wellDone.subtitle),a.default.createElement("span",{className:"p2"},e.wellDone.message)),a.default.createElement(r.Image,{src:"https://res.cloudinary.com/versus/image/upload/f_auto,q_auto,w_220/v1/AImpact/etq89fualhdkhkpeofat",alt:"Happy Explorer",className:"well-done__image"}))};var a=e("react"),r=e("pragmate-ui/image")}}),p.exports.descriptor=[{im:"./controller",from:"Controller",name:"Controller"},{im:"./views/index",from:"View",name:"View"}],p.exports.process=function({require:e,prop:t,value:a}){!e&&"Controller"!==t||r("Controller",e?e("./controller").Controller:a),!e&&"View"!==t||r("View",e?e("./views/index").View:a)},r("__beyond_pkg",p),r("hmr",new function(){this.on=(e,t)=>p.hmr.on(e,t),this.off=(e,t)=>p.hmr.off(e,t)}),p.initialise(f)}}});