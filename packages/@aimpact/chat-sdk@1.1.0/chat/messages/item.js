System.register(["@beyond-js/kernel@0.1.9/bundle","@beyond-js/kernel@0.1.9/styles","react@18.2.0","@beyond-js/react-18-widgets@1.1.2/hooks","dompurify@3.1.6","markdown-it@14.1.0","highlight.js@11.10.0","markdown-it-katex@2.0.3","react-syntax-highlighter@15.5.0","react-katex@3.0.1"],function(r,e){var t,n,o,a,l,c,i,s,d,u,f,p;return r("Message",void 0),{setters:[function(e){t=e},function(e){n=e},function(e){o=e},function(e){a=e},function(e){l=e},function(e){c=e},function(e){i=e},function(e){s=e},function(e){d=e},function(e){u=e}],execute:function(){p=t.Bundle,(f=new p({module:{vspecifier:"@aimpact/chat-sdk@1.1.0/chat/messages/item"},type:"code"},e.meta.url).package()).dependencies.update([["@beyond-js/kernel/styles",n],["react",o],["@beyond-js/react-18-widgets/hooks",a],["dompurify",l],["markdown-it",c],["highlight.js",i],["markdown-it-katex",s],["react-syntax-highlighter",d],["react-katex",u]]),brequire("@beyond-js/kernel/styles").styles.register("@aimpact/chat-sdk@1.1.0/chat/messages/item"),(p=new Map).set("./index",{hash:630238096,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Message=function({message:e}){let[,t]=r.useState(e.content??""),n=a.render(e.content??"");return(0,o.useBinder)([e],()=>{t(e.content??"")}),r.createElement(r.Fragment,null,r.createElement("div",{dangerouslySetInnerHTML:{__html:n}}))};var r=e("react"),o=e("@beyond-js/react-18-widgets/hooks"),t=e("markdown-it"),n=e("highlight.js"),e=e("markdown-it-katex");let a=new t.default({html:!0,linkify:!0,typographer:!0,highlight:(e,t)=>{if(t&&n.default.getLanguage(t))try{return'<hr><pre class="hljs"><code>'+n.default.highlight(e,{language:t}).value+"</code></pre><hr>"}catch(e){}return'<hr><pre class="hljs"><code>'+a.utils.escapeHtml(e)+"</code></pre><hr>"}}).use(e.default)}}),p.set("./parser",{hash:3449808258,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;class c{static types=[{type:"math-inline",regex:/\\\(.+?\\\)/g},{type:"text-inline",regex:/([^\\\(.+?\\\)]|[^`[^`]+`])+/g},{type:"code-inline",regex:/(?<!`)`[^`]+`(?!`)/g}];static blockTypes=[{type:"math-block",regex:/\\\[.+?\\\]/g},{type:"code-block",regex:/```[\s\S]+?```/g},{type:"text-block",regex:/(.+?)(?=(\\\(.+?\\\)|\\\[.+?\\\]|`[^`]+`|```[\s\S]+?```|\n\n|$))/gs}];static parse(e){if(!e)return[];var t,n,r=[];for(t of this.getBlocks(e))"text-block"!==t.type?r.push(t):(n=this.getTextBlock(t.content),r.push(n));return r}static getBlocks(e){let t,n=[],r=e;for(;0<r.length;){let e=!1;for(var{type:o,regex:a}of c.blockTypes)if(a.lastIndex=0,(a=a.exec(r))&&0===a.index){n.push({type:o,content:a[0]}),r=r.slice(a[0].length),e=!0;break}e||(t=this.findNextMatchIndex(r),t=r.slice(0,t),n.push({type:"text-inline",content:t}),r=r.slice(t.length))}return n}static findNextMatchIndex(e){let t=e.length;for(var{regex:n}of c.types.filter(e=>"text-block"!==e.type))n.lastIndex=0,(n=n.exec(e))&&n.index<t&&(t=n.index);return t}static getTextBlock(e){let r=[],o=e;for(;0<o.length;){let n=!1;for(var{type:a,regex:l}of c.types)if(l=l.exec(o)){let e=l[0],t=l[0].length;0!==l.index&&(e=o.slice(0,l.index),t=l.index),n=!0,o=o.slice(t),r.push({type:a,content:e})}if(!n){r.push({type:"text-inline",content:o});break}}return{type:"text-block",content:r}}static add(e,t){c.types.push({type:e,regex:t})}}t.Parser=c}}),p.set("./renderer",{hash:1725444284,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ContentRenderer=function({content:e}){var t=(t=(0,o.useMemo)(()=>n.Parser.parse(e),[e])).map((e,t)=>{var n="text-block"===e.type||e.type.includes("-inline"),r=n&&0<t?" ":"";return"text-block"===e.type?o.default.createElement(l.TextBlockRenderer,{items:e.content,key:t}):n?o.default.createElement(a.InlineRenderer,{type:e.type,content:e.content,key:t}):(n=o.default.createElement(l.BlockRenderer,{type:e.type,content:e.content}),o.default.createElement(o.default.Fragment,{key:t},r,n))});return o.default.createElement(o.default.Fragment,null,t)};var o=e("react"),n=e("./parser"),a=e("./renderers/inline"),l=e("./renderers/block")}}),p.set("./renderers/block",{hash:1156784899,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.BlockRenderer=function({type:e,content:t}){return{"math-block":e=>{var t;return r.default.createElement("div",{className:"mathjax-container"},r.default.createElement(l.BlockMath,{math:(t=e.trim()).startsWith("\\[")&&t.endsWith("\\]")?t.slice(2,-2):e}))},"code-block":e=>r.default.createElement("div",{className:"code-block__container"},r.default.createElement(a.Prism,{language:"typescript",style:n.default,className:"syntax-highlighter dark"},e.slice(3,-3))," ","// Eliminar los tres backticks (```) del inicio y fin")}[e](t)},t.TextBlockRenderer=function({items:e=[]}){return r.default.createElement("p",null,e.map(({type:e,content:t},n)=>r.default.createElement(o.InlineRenderer,{type:e,content:t,key:n})))};var r=e("react"),o=e("./inline"),n=e("./okaidia"),a=e("react-syntax-highlighter"),l=e("react-katex")}}),p.set("./renderers/inline",{hash:3244605796,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.InlineRenderer=function({type:e,content:t}){t=t.replace("\\n\\n","");var n={"math-inline":e=>r.default.createElement(a.InlineMath,{math:e.replaceAll("\\","")}),"code-inline":e=>r.default.createElement("code",null,e.slice(1,-1)),"text-inline":e=>r.default.createElement(o.TextRenderer,{content:e})};return console.log(.4,e,t),n[e](t)};var r=e("react"),o=e("./text"),a=e("react-katex")}}),p.set("./renderers/okaidia",{hash:1926034783,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={'code[class*="language-"]':{color:"#f8f8f2",background:"none",textShadow:"0 1px rgba(0, 0, 0, 0.3)",fontFamily:"Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace",fontSize:"1em",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",wordWrap:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]':{color:"#f8f8f2",background:"#272822",textShadow:"0 1px rgba(0, 0, 0, 0.3)",fontFamily:"Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace",fontSize:"1em",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",wordWrap:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",padding:"1em",margin:".5em 0",overflow:"auto",borderRadius:"0.3em"},':not(pre) > code[class*="language-"]':{background:"#272822",padding:".1em",borderRadius:".3em",whiteSpace:"normal"},comment:{color:"#8292a2"},prolog:{color:"#8292a2"},doctype:{color:"#8292a2"},cdata:{color:"#8292a2"},punctuation:{color:"#f8f8f2"},namespace:{Opacity:".7"},property:{color:"#f92672"},tag:{color:"#f92672"},constant:{color:"#f92672"},symbol:{color:"#f92672"},deleted:{color:"#f92672"},boolean:{color:"#ae81ff"},number:{color:"#ae81ff"},selector:{color:"#a6e22e"},"attr-name":{color:"#a6e22e"},string:{color:"#a6e22e"},char:{color:"#a6e22e"},builtin:{color:"#a6e22e"},inserted:{color:"#a6e22e"},operator:{color:"#f8f8f2"},entity:{color:"#f8f8f2",cursor:"help"},url:{color:"#f8f8f2"},".language-css .token.string":{color:"#f8f8f2"},".style .token.string":{color:"#f8f8f2"},variable:{color:"#f8f8f2"},atrule:{color:"#e6db74"},"attr-value":{color:"#e6db74"},function:{color:"#e6db74"},"class-name":{color:"#e6db74"},keyword:{color:"#66d9ef"},regex:{color:"#fd971f"},important:{color:"#fd971f",fontWeight:"bold"},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"}}}}),p.set("./renderers/text",{hash:3723538662,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TextRenderer=function({content:e}){return console.log(.5,e),e=r.default.sanitize(o.renderInline(e)),n.default.createElement("span",{dangerouslySetInnerHTML:{__html:e}})};var n=e("react"),t=e("markdown-it"),r=e("dompurify");let o=new t.default}}),p.set("./types",{hash:3592763005,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})}}),f.exports.descriptor=[{im:"./index",from:"Message",name:"Message"}],f.exports.process=function({require:e,prop:t,value:n}){!e&&"Message"!==t||r("Message",e?e("./index").Message:n)},r("__beyond_pkg",f),r("hmr",new function(){this.on=(e,t)=>f.hmr.on(e,t),this.off=(e,t)=>f.hmr.off(e,t)}),f.initialise(p)}}});