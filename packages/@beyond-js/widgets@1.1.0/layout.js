System.register(["@beyond-js/kernel@0.1.9/bundle","@beyond-js/widgets@1.1.0/render"],function(n,e){"use strict";var t,r,i,s,o;return n("ssr",void 0),{setters:[function(e){t=e},function(e){r=e}],execute:function(){i=e=>{var t=new Map([["@beyond-js/kernel","0.1.9"],["@beyond-js/events","0.0.7"],["@beyond-js/widgets","1.1.0"],["@aimpact/ailearn-app","0.0.40"]]);return globalThis.bimport(globalThis.bimport.resolve(e,t))},o=t.Bundle,(s=new o({module:{vspecifier:"@beyond-js/widgets@1.1.0/layout"},type:"ts"},e.meta.url).package()).dependencies.update([["@beyond-js/widgets/render",r]]),(o=new Map).set("./children",{hash:3435386799,creator:function(e,t){var r=e("@beyond-js/widgets/render"),s=e("./ssr");let n;customElements.define("beyond-layout-children",class extends HTMLElement{#layout;#active;connectedCallback(){this.attachShadow({mode:"open"});const t=()=>{var e=()=>this.#start().catch(e=>console.error(e.stack));n.initialised?e():n.ready.then(e)};if(n)return t();s.ssr.page?this.#onssr():s.ssr.addEventListener("received",this.#onssr);var e=[],r=(e.push(i("@beyond-js/widgets/routing")),e.push(i("@beyond-js/kernel/core")),globalThis.__app_package)["specifier"];e.push(i(r+"/start")),Promise.all(e).then(([e])=>{({manager:n}=e),t()}).catch(e=>console.log(e.stack))}#container;get container(){var e;return void 0!==this.#container?this.#container:(e=(()=>{let e=this;for(;;){var t=e.getRootNode();if(t===document)return t;if(e=t.host,r.widgets.instances.has(e))return e}})())?this.#container=e:(console.error("Widget container of beyond-layout-children not found"),this.#container=null)}#onssr=()=>{s.ssr.removeEventListener("received",this.#onssr);const e=this["container"];var t,r,n;null!==e&&({element:t,error:n}=(n=s.ssr.hierarchy,e===document?{element:n[0]}:(t=e["localName"],-1===(r=n.indexOf(t))?{error:`Container widget of beyond-layout-children "${t}" not found in ssr hierarchy`}:r===n.length-1?{error:`Container widget of beyond-layout-children "${t}" is the page, not a layout`}:{element:n[r+1]})),n?console.error(n,this):this.shadowRoot.appendChild(document.createElement(t)))};#render=()=>{let i;this.#layout.children.forEach(t=>{var e=this.shadowRoot["children"];let r=[...e].find(e=>e.getAttribute("data-child-id")===t.id);r||((r=document.createElement(t.element)).setAttribute("data-child-id",t.id),this.shadowRoot.append(r));var e=this.#layout.active===t,n=r.controller;if(e&&(i=r),e&&r!==this.#active){const s=()=>{if(r.removeEventListener("controller.initialised",s),r===this.#active){var e=r.controller;if(!e)throw new Error(`Controller of element widget "${t.element}" is undefined`);this.#active===r&&e.show?.()}};n?n.show?.():r.addEventListener("controller.initialised",s)}else r.hidden||e||n?.hide?.();r.hidden=!e}),this.#active=i};#hydrate(){var e=this.shadowRoot["children"],t=this.#layout;e.length&&(1<e.length?console.error("Only one child was expected on beyond-layout-children start",this):e[0].setAttribute("data-child-id",[...t.children.keys()][0]))}async#start(){var e,t;if(s.ssr.removeEventListener("received",this.#onssr),null!==this.container)return e=e=>{this.#layout=e,this.#hydrate(),this.#layout.on("change",this.#render),this.#render()},this.container===document||(t=this.container["localName"],t===n.main.element)?e(n.main):void(n.layouts.has(t)?e(n.layouts.get(t)):console.error(`Layout "${t}" not found`,[...n.layouts],n))}})}}),o.set("./ssr",{hash:3616680628,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ssr=void 0;t.ssr=new class extends EventTarget{#main;get main(){return this.#main}#page;get page(){return this.#page}#layouts;get layouts(){return this.#layouts}#hierarchy=[];get hierarchy(){return this.#hierarchy}data(e,t){this.#main=e,this.#page=t.element,this.#layouts=t.parents,e&&this.#hierarchy.push(e),t.parents&&(this.#hierarchy=this.#hierarchy.concat(t.parents)),this.#hierarchy.push(t.element);e=new Event("received");this.dispatchEvent(e)}}}}),s.exports.descriptor=[{im:"./ssr",from:"ssr",name:"ssr"}],s.exports.process=function({require:e,prop:t,value:r}){!e&&"ssr"!==t||n("ssr",e?e("./ssr").ssr:r)},n("__beyond_pkg",s),n("hmr",new function(){this.on=(e,t)=>s.hmr.on(e,t),this.off=(e,t)=>s.hmr.off(e,t)}),s.initialise(o)}}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9jaGlsZHJlbi50cyIsIi9zc3IudHMiXSwibmFtZXMiOlsiX3JlbmRlciIsInJlcXVpcmUiLCJfc3NyIiwibGV0IiwibWFuYWdlciIsImN1c3RvbUVsZW1lbnRzIiwiZGVmaW5lIiwiSFRNTEVsZW1lbnQiLCIjbGF5b3V0IiwiI2FjdGl2ZSIsImNvbm5lY3RlZENhbGxiYWNrIiwidGhpcyIsImF0dGFjaFNoYWRvdyIsIm1vZGUiLCJtYW5hZ2VkIiwic3RhcnQiLCIjc3RhcnQiLCJjYXRjaCIsImV4YyIsImNvbnNvbGUiLCJlcnJvciIsInN0YWNrIiwiaW5pdGlhbGlzZWQiLCJyZWFkeSIsInRoZW4iLCJzc3IiLCJwYWdlIiwiI29uc3NyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInByb21pc2VzIiwic3BlY2lmaWVyIiwicHVzaCIsImJpbXBvcnQiLCJnbG9iYWxUaGlzIiwiX19hcHBfcGFja2FnZSIsIlByb21pc2UiLCJhbGwiLCJyb3V0aW5nIiwibG9nIiwiI2NvbnRhaW5lciIsImNvbnRhaW5lciIsInBhcmVudCIsInJvb3QiLCJnZXRSb290Tm9kZSIsImRvY3VtZW50IiwiaG9zdCIsIndpZGdldHMiLCJpbnN0YW5jZXMiLCJoYXMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwibG9jYWxOYW1lIiwiaW5kZXgiLCJoaWVyYXJjaHkiLCJlbGVtZW50IiwiaW5kZXhPZiIsImxlbmd0aCIsInNoYWRvd1Jvb3QiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZUVsZW1lbnQiLCIjcmVuZGVyIiwiYWN0aXZlRWxlbWVudCIsImNoaWxkcmVuIiwiZm9yRWFjaCIsImNoaWxkIiwiZmluZCIsImdldEF0dHJpYnV0ZSIsImlkIiwic2V0QXR0cmlidXRlIiwiYXBwZW5kIiwiYWN0aXZlIiwiY29udHJvbGxlciIsInNob3ciLCJFcnJvciIsImhpZGRlbiIsImhpZGUiLCIjaHlkcmF0ZSIsImxheW91dCIsImtleXMiLCJkb25lIiwib24iLCJtYWluIiwibGF5b3V0cyIsImdldCIsImV4cG9ydHMiLCJFdmVudFRhcmdldCIsIiNtYWluIiwiI3BhZ2UiLCIjbGF5b3V0cyIsIiNoaWVyYXJjaHkiLCJkYXRhIiwicGFyZW50cyIsImNvbmNhdCIsImV2ZW50IiwiRXZlbnQiLCJkaXNwYXRjaEV2ZW50Il0sIm1hcHBpbmdzIjoiNm9CQUNBLElBQUFBLEVBQUFDLEVBQUEsMkJBQUEsRUFDQUMsRUFBQUQsRUFBQSxPQUFBLEVBSUFFLElBQUlDLEVBRUpDLGVBQWVDLE9BQ2QsdUNBQ2NDLFlBQ2JDLFFBQ0FDLFFBRUFDLG9CQUNDQyxLQUFLQyxhQUFhLENBQUVDLEtBQU0sTUFBTSxDQUFFLEVBRWxDLE1BQU1DLEVBQVVBLEtBQ2YsSUFBTUMsRUFBUUEsSUFBTUosS0FBS0ssT0FBTSxFQUFHQyxNQUFNQyxHQUFPQyxRQUFRQyxNQUFNRixFQUFJRyxLQUFLLENBQUMsRUFDdkVqQixFQUFRa0IsWUFBY1AsRUFBSyxFQUFLWCxFQUFRbUIsTUFBTUMsS0FBS1QsQ0FBSyxDQUN6RCxFQUdBLEdBQUlYLEVBQVMsT0FBT1UsRUFBTyxFQUczQlosRUFBQXVCLElBQUlDLEtBQU9mLEtBQUtnQixPQUFNLEVBQUt6QixFQUFBdUIsSUFBSUcsaUJBQWlCLFdBQVlqQixLQUFLZ0IsTUFBTSxFQUV2RSxJQUFNRSxFQUEyQixHQUl6QkMsR0FIUkQsRUFBU0UsS0FBS0MsRUFBUSw0QkFBNEIsQ0FBQyxFQUNuREgsRUFBU0UsS0FBS0MsRUFBUSx3QkFBd0IsQ0FBQyxFQUVuQkMsV0FBWUMsZUFBaENKLGFBQ1JELEVBQVNFLEtBQUtDLEVBQVdGLEVBQUgsUUFBb0IsQ0FBQyxFQUUzQ0ssUUFBUUMsSUFBSVAsQ0FBUSxFQUNsQkwsS0FBSyxDQUFBLENBQUVhLE9BQ04sQ0FBRWpDLFFBQUFBLENBQU8sRUFBS2lDLEdBQ2Z2QixFQUFPLENBQ1IsQ0FBQyxFQUNBRyxNQUFNQyxHQUFPQyxRQUFRbUIsSUFBSXBCLEVBQUlHLEtBQUssQ0FBQyxDQUN0QyxDQVNBa0IsV0FDQUMsZ0JBQ0MsSUFFTUEsRUFGTixPQUF3QixLQUFBLElB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