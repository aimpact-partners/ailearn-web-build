System.register(["@beyond-js/kernel@0.1.9/bundle","react@18.2.0","pragmate-ui@0.1.1/icons","@beyond-js/kernel@0.1.9/styles"],function(a,e){"use strict";var t,r,o,n,s,i;return a({useLoader:void 0,Image:void 0}),{setters:[function(e){t=e},function(e){r=e},function(e){o=e},function(e){n=e}],execute:function(){i=t.Bundle,(s=new i({module:{vspecifier:"pragmate-ui@0.1.1/image"},type:"code",name:"image"},e.meta.url).package()).dependencies.update([["react",r],["pragmate-ui/icons",o],["@beyond-js/kernel/styles",n]]),brequire("@beyond-js/kernel/styles").styles.register("pragmate-ui@0.1.1/image"),(i=new Map).set("./context",{hash:818759056,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.useImageContext=t.ImageContext=void 0;var r=e("react");const a=t.ImageContext=r.createContext({});t.useImageContext=()=>r.useContext(a)}}),i.set("./error/index",{hash:1634346444,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Error=function(){const{src:e,onError:t}=(0,a.useImageContext)();return r.default.createElement("div",{"data-src":e,className:"content-error"},t&&r.default.createElement(o.IconButton,{onClick:e=>{e.stopPropagation(),t&&"function"==typeof t&&t(e)},icon:"refresh"}))};var r=e("react"),a=e("../context"),o=e("pragmate-ui/icons")}}),i.set("./hooks/use-loader",{hash:3641908203,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.useLoader=function(t){const[e,o]=r.default.useState("loading");return r.default.useEffect(()=>{if(t){const a=new globalThis.Image,e=e=>{const t={load:"ready",error:"error"},r={add:"addEventListener",remove:"removeEventListener"}[e];["load","error"].forEach(e=>a[r](e,()=>o(t[e])))};return e("add"),a.src=t,()=>{e("remove")}}o("error")},[t]),{status:e}};var r=e("react")}}),i.set("./hooks/use-loading",{hash:1800321396,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.useLoading=function(o){const[,n]=(0,r.useState)(),[s,i]=(0,r.useState)({size:"200x200",loaded:!1});return(0,r.useEffect)(()=>{var e,t,r,a=o.src;return s.url!==a&&(e=o.size??s.size,t=a,(r=new globalThis.Image).onload=()=>i({...s,loaded:!0,error:!1}),r.onerror=()=>{i({...s,error:!0,loaded:!1})},r.src=t,n(r),i({...s,url:a,size:e,src:t,loaded:!0})),()=>n({...s,onload:void 0,onerror:void 0})},[o.src]),[s,i]};var r=e("react")}}),i.set("./img",{hash:189586207,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Img=function(){var{src:e,loading:t,alt:r,status:a}=(0,n.useImageContext)();return"loading"===a?o.default.createElement("div",{className:"pui-image-loading"},t):"error"===a?o.default.createElement("div",{className:"pui-image-error"},r):o.default.createElement("img",{src:e})};var o=e("react"),n=e("./context")}}),i.set("./index",{hash:1445573776,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Image=function(e={}){var{className:t,onClick:r,children:a,sizeLoading:o}=e,[n,s]=(0,x.useLoading)(e),{error:i,loaded:u,htmlLoaded:c}=n,d=(0,y.useLoader)(e.src).status;let l="pui-image "+(t?" "+t:"");const m={...e,className:l,onClick:r};return u||c||(l+=" pui-image-preload"),i&&(l+=" pui-image-error"),["src","alt","onError","children","size","loading","error","sources","sizeLoading"].forEach(e=>delete m[e]),t={...e,state:n,src:e.src,status:d,setState:s},r={},(!u||!c||i)&&o&&"object"==typeof o&&o.height&&o.width&&(r.height=o.height,r.width=o.width),n=i?h.Error:p.Img,f.default.createElement(g.ImageContext.Provider,{value:t},f.default.createElement("picture",{...m,style:r,"data-src":e.src},f.default.createElement(v.Sources,null),f.default.createElement(n,null),a))};var f=e("react"),g=e("./context"),h=e("./error"),p=e("./img"),v=e("./sources"),x=e("./hooks/use-loading"),y=e("./hooks/use-loader")}}),i.set("./interfaces/index",{hash:3751520118,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})}}),i.set("./sources/index",{hash:1995365142,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Sources=function(){var e=(0,a.useImageContext)().sources;return e&&Array.isArray(e)&&e.length?(e=e.map(e=>r.default.createElement(o.Item,{key:e.srcSet,...e})),r.default.createElement(r.default.Fragment,null,e)):null};var r=e("react"),a=e("../context"),o=e("./item")}}),i.set("./sources/item",{hash:377065182,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Item=function(e){if(!e.srcSet)return null;let t="";var{maxWidth:r,minWidth:a}=e;!r&&a&&(t=`(min-width: ${a}px)`),r&&!a&&(t=`(max-width: ${r}px)`),r&&a&&(t=`(min-width: ${a}px) and (max-width: ${r}px)`);const o={...e};return["maxWidth","minWidth"].forEach(e=>delete o[e]),n.default.createElement("source",{media:t,...o})};var n=e("react")}}),s.exports.descriptor=[{im:"./hooks/use-loader",from:"useLoader",name:"useLoader"},{im:"./index",from:"Image",name:"Image"}],s.exports.process=function({require:e,prop:t,value:r}){!e&&"useLoader"!==t||a("useLoader",e?e("./hooks/use-loader").useLoader:r),!e&&"Image"!==t||a("Image",e?e("./index").Image:r)},a("__beyond_pkg",s),a("hmr",new function(){this.on=(e,t)=>s.hmr.on(e,t),this.off=(e,t)=>s.hmr.off(e,t)}),s.initialise(i)}}});