System.register(["@beyond-js/kernel@0.1.9/bundle","react@18.2.0","pragmate-ui@1.0.0-beta.6/components","@beyond-js/kernel@0.1.9/styles"],function(a,e){var t,n,o,r,i,d;return a({AddButton:void 0,RemoveButton:void 0,useDynamicFieldContext:void 0,DynamicField:void 0}),{setters:[function(e){t=e},function(e){n=e},function(e){o=e},function(e){r=e}],execute:function(){d=t.Bundle,(i=new d({module:{vspecifier:"@aimpact/ailearn-app@0.1.13/components/dynamic-field"},type:"code"},e.meta.url).package()).dependencies.update([["react",n],["pragmate-ui/components",o],["@beyond-js/kernel/styles",r]]),brequire("@beyond-js/kernel/styles").styles.register("@aimpact/ailearn-app@0.1.13/components/dynamic-field"),(d=new Map).set("./actions/add",{hash:4126504715,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AddButton=void 0;var n=e("react"),a=e("../context"),o=e("./wrapper");t.AddButton=({children:e})=>{var t=(0,a.useDynamicFieldContext)().onAdd;return n.default.createElement(o.ActionWrapper,{onClick:t},e)}}}),d.set("./actions/remove",{hash:1978015170,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.RemoveButton=void 0;var a=e("react"),o=e("../context"),r=e("./wrapper");t.RemoveButton=({index:e,children:t})=>{let n=(0,o.useDynamicFieldContext)().onRemove;return a.default.createElement(r.ActionWrapper,{onClick:()=>n(e)},t)}}}),d.set("./actions/wrapper",{hash:3526438104,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ActionWrapper=void 0;var n=e("react");t.ActionWrapper=({children:e,onClick:t})=>n.default.isValidElement(e)?n.default.cloneElement(e,{onClick:t}):(console.error("ActionWrapper: The child must be a valid React element."),null)}}),d.set("./context",{hash:1559545418,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.useDynamicFieldContext=t.ModuleContext=void 0;var n=e("react");let a=t.ModuleContext=n.createContext({});t.useDynamicFieldContext=()=>n.useContext(a)}}),d.set("./field-row",{hash:1841621951,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FieldRow=void 0;var d=e("react"),l=e("./context"),c=e("pragmate-ui/components");t.FieldRow=({field:e,index:n,children:t,onRemove:a,onUpdate:o})=>{var{fields:r,texts:i}=(0,l.useDynamicFieldContext)();return d.default.createElement("div",{className:"dynamic-form__field","data-index":n},d.default.Children.map(t,t=>d.default.isValidElement(t)?d.default.cloneElement(t,{value:e[t.props.name]||"",onChange:e=>o(n,t.props.name,e.target.value)}):t),1<r.length&&d.default.createElement("div",{className:"flex-container flex-end"},d.default.createElement(c.Button,{type:"button",onClick:()=>a(n)},i.remove)))}}}),d.set("./field",{hash:2077509141,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicField=function({texts:e={add:"Add",remove:"Remove"},children:n,value:t,name:a,onChange:o}){let{fields:r,add:i,remove:d,update:l}=(0,p.useFieldManager)(t),c=(0,f.useMemo)(()=>h(n),[n]),u=()=>{var e=i(c);o&&o({target:e={name:a,value:e},currentTarget:e})},m=e=>{e=d(e);o&&o({target:e={name:a,value:e},currentTarget:e})},s=(e,t,n)=>{e={name:t,value:l(e,t,n)},o&&o({target:e,currentTarget:e})};return f.default.createElement(y.ModuleContext.Provider,{value:{texts:e,fields:r,onAdd:u,onRemove:m,onUpdate:s}},f.default.createElement("div",{className:"dynamic-form__container"},r.map((e,t)=>f.default.createElement(v.FieldRow,{key:t,field:e,index:t,children:n,onRemove:m,onUpdate:s})),f.default.createElement("div",{className:"flex-container flex-end"},f.default.createElement(x.Button,{type:"button",onClick:u,variant:"primary",bordered:!0},e.add))))};var f=e("react"),p=e("./use-field-manager"),v=e("./field-row"),y=e("./context"),x=e("pragmate-ui/components");let h=e=>f.default.Children.toArray(e).reduce((e,t)=>(f.default.isValidElement(t)&&t.props.name&&(e[t.props.name]=""),e),{})}}),d.set("./types",{hash:794643406,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})}}),d.set("./use-field-manager",{hash:71051280,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.useFieldManager=function(e=[]){let[t,r]=(0,n.useState)(e.length?e:[{}]);return(0,n.useEffect)(()=>{r(e)},[e]),{fields:t,add:e=>(e=[...t,{...e}],r(e),e),remove:n=>{var e;return 1<t.length?(e=t.filter((e,t)=>t!==n),r(e),e):t},update:(n,a,o)=>{var e=t.map((e,t)=>t===n?{...e,[a]:o}:e);return r(e),e}}};var n=e("react")}}),i.exports.descriptor=[{im:"./actions/add",from:"AddButton",name:"AddButton"},{im:"./actions/remove",from:"RemoveButton",name:"RemoveButton"},{im:"./context",from:"useDynamicFieldContext",name:"useDynamicFieldContext"},{im:"./field",from:"DynamicField",name:"DynamicField"}],i.exports.process=function({require:e,prop:t,value:n}){!e&&"AddButton"!==t||a("AddButton",e?e("./actions/add").AddButton:n),!e&&"RemoveButton"!==t||a("RemoveButton",e?e("./actions/remove").RemoveButton:n),!e&&"useDynamicFieldContext"!==t||a("useDynamicFieldContext",e?e("./context").useDynamicFieldContext:n),!e&&"DynamicField"!==t||a("DynamicField",e?e("./field").DynamicField:n)},a("__beyond_pkg",i),a("hmr",new function(){this.on=(e,t)=>i.hmr.on(e,t),this.off=(e,t)=>i.hmr.off(e,t)}),i.initialise(d)}}});