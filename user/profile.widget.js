System.register(["@beyond-js/widgets@1.1.0/render","@beyond-js/kernel@0.1.9/bundle","@beyond-js/kernel@0.1.9/styles","react@18.2.0","@aimpact/ailearn-sdk@1.0.0/core","@beyond-js/react-18-widgets@1.1.2/base","@aimpact/ailearn-app@0.1.9/main-layout.widget","@beyond-js/kernel@0.1.9/routing","@aimpact/chat-sdk@1.2.0/session","@beyond-js/reactive@1.2.0/model","@beyond-js/kernel@0.1.9/core","@aimpact/chat-sdk@1.2.0/wrapper","@beyond-js/kernel@0.1.9/texts","@beyond-js/react-18-widgets@1.1.2/hooks","pragmate-ui@1.0.0-beta.6/alert","@aimpact/ailearn-app@0.1.9/components/ui","@aimpact/ailearn-app@0.1.9/config","pragmate-ui@1.0.0-beta.6/components","pragmate-ui@1.0.0-beta.6/form","@aimpact/ailearn-app@0.1.9/model/gclassroom","pragmate-ui@1.0.0-beta.6/image","pragmate-ui@1.0.0-beta.6/modal","pragmate-ui@1.0.0-beta.6/icons"],function(n,e){"use strict";var t,a,i,l,s,r,o,c,u,d,m,p,f,g,h,y,b,v,E,x,_,w,k,j,S;return n({Controller:void 0,View:void 0}),{setters:[function(e){t=e},function(e){a=e},function(e){i=e},function(e){l=e},function(e){s=e},function(e){r=e},function(e){o=e},function(e){c=e},function(e){u=e},function(e){d=e},function(e){m=e},function(e){p=e},function(e){f=e},function(e){g=e},function(e){h=e},function(e){y=e},function(e){b=e},function(e){v=e},function(e){E=e},function(e){x=e},function(e){_=e},function(e){w=e},function(e){k=e}],execute:function(){S=a.Bundle,(j=new S({module:{vspecifier:"@aimpact/ailearn-app@0.1.9/user/profile",multibundle:!0},type:"widget"},e.meta.url).package()).dependencies.update([["@beyond-js/widgets/render",t],["@beyond-js/kernel/styles",i],["react",l],["@aimpact/ailearn-sdk/core",s],["@beyond-js/react-18-widgets/base",r],["@aimpact/ailearn-app/main-layout.widget",o],["@beyond-js/kernel/routing",c],["@aimpact/chat-sdk/session",u],["@beyond-js/reactive/model",d],["@beyond-js/kernel/core",m],["@aimpact/chat-sdk/wrapper",p],["@beyond-js/kernel/texts",f],["@beyond-js/react-18-widgets/hooks",g],["pragmate-ui/alert",h],["@aimpact/ailearn-app/components/ui",y],["@aimpact/ailearn-app/config",b],["pragmate-ui/components",v],["pragmate-ui/form",E],["@aimpact/ailearn-app/model/gclassroom",x],["pragmate-ui/image",_],["pragmate-ui/modal",w],["pragmate-ui/icons",k]]),brequire("@beyond-js/widgets/render").widgets.register([{name:"ailearn-user-profile",vspecifier:"@aimpact/ailearn-app@0.1.9/user/profile.widget",is:"page",route:"/users/me",layout:"main-layout"}]),brequire("@beyond-js/kernel/styles").styles.register("@aimpact/ailearn-app@0.1.9/user/profile.widget"),(S=new Map).set("./context",{hash:2877862235,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.useProfileContext=t.ProfileContext=void 0;var a=e("react");const n=t.ProfileContext=a.default.createContext({});t.useProfileContext=()=>a.default.useContext(n)}}),S.set("./controller",{hash:3172360902,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Controller=void 0;var a=e("@beyond-js/react-18-widgets/base"),n=e("./store"),i=e("./views"),l=e("@aimpact/ailearn-app/main-layout.widget"),s=e("@beyond-js/kernel/routing");class r extends a.ReactWidgetController{#store;createStore(){return this.#store=new n.StoreManager,this.#store}get Widget(){return i.View}show(){globalThis.setTimeout(()=>{l.LayoutBroker.overlay=!0,l.LayoutBroker.clearModel(),l.LayoutBroker.backLink=()=>s.routing.back()},100),this.#store.load()}}t.Controller=r}}),S.set("./store",{hash:2391793024,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StoreManager=void 0;var a=e("@beyond-js/reactive/model"),n=e("@beyond-js/kernel/core"),i=e("@beyond-js/widgets/render"),l=e("@aimpact/chat-sdk/wrapper"),s=e("@aimpact/ailearn-app/main-layout.widget"),r=e("@beyond-js/kernel/texts"),o=e("beyond_context");class c extends a.ReactiveModel{properties=["language","accessibility","audioSpeed"];#texts=new r.CurrentTexts(o.module.specifier);get texts(){return this.#texts?.value}get ready(){return super.ready&&this.#texts.ready}constructor(){super(),this.#texts.on("change",this.triggerEvent);var e=[null,void 0,"undefined"].includes(localStorage.getItem("aimpact.audio.speed"))?1:localStorage.getItem("aimpact.audio.speed"),t=["dyslexia","normal"].includes(localStorage.getItem("aimpact.chat.accessibility"))?localStorage.getItem("aimpact.chat.accessibility"):"normal";this.reactiveProps(["language","accessibility","audioSpeed"]),super.ready=!0,this.language=n.languages.current,this.audioSpeed=e,this.accessibility=t,this.initialValues({accessibility:t,language:n.languages.current,audioSpeed:this.audioSpeed}),globalThis.store=this}save=()=>{this.fetching=!0,n.languages.current=this.language;var e=document.querySelector("html");return l.AppWrapper.setSettings({accessibility:this.accessibility,audioSpeed:this.audioSpeed,language:this.language}),l.AppWrapper.accessibility=this.accessibility,l.AppWrapper.audioSpeed=this.audioSpeed,l.AppWrapper.language=this.language,e.setAttribute("data-accessibility-mode",this.accessibility),localStorage.setItem("aimpact.accessibility.mode",this.accessibility),localStorage.setItem("aimpact.audio.speed",this.audioSpeed),i.widgets.attributes.add("data-accessibility-mode",this.accessibility),window.setTimeout(()=>{n.languages.current=this.language,s.LayoutBroker.overlay=!0,this.initialValues({language:n.languages.current}),this.fetching=!1},1e3),!0};load(){}}t.StoreManager=c}}),S.set("./views/audio",{hash:329133774,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AudioSettings=function(){const{texts:e,store:t}=(0,i.useProfileContext)(),[,a]=n.default.useState(1);return(0,l.useBinder)([t],()=>{a(t.audioSpeed)}),n.default.createElement(n.default.Fragment,null,n.default.createElement("label",null,e.audio.title),n.default.createElement("section",{className:"audio__container field__container"},n.default.createElement("h5",{htmlFor:"audioRange"},e.audio.speed,n.default.createElement("input",{value:t.audioSpeed,name:"audioRange",onInput:e=>{t.audioSpeed=e.currentTarget.value},type:"range",max:"2",min:"0.25",step:"0.25"})),n.default.createElement("div",{className:"speed__quantity"},n.default.createElement("span",null,"0.25"),n.default.createElement("span",null,"0.50"),n.default.createElement("span",null,"0.75"),n.default.createElement("span",null,"1"),n.default.createElement("span",null,"1.25"),n.default.createElement("span",null,"1.50"),n.default.createElement("span",null,"1.75"),n.default.createElement("span",null,"2"))))};var n=e("react"),i=e("../context"),l=e("@beyond-js/react-18-widgets/hooks")}}),S.set("./views/coins",{hash:1886924880,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.UserCoins=function(){var{store:e,user:t}=(0,n.useProfileContext)(),e=e.texts;return t.coins?a.default.createElement(i.Alert,{type:"info",className:"profile-coins__section"},a.default.createElement("h3",null,e.coins.label),a.default.createElement("div",{className:"coins-detail__container"},a.default.createElement("div",{className:"coins-section__item"},a.default.createElement("span",null,e.coins.assignments),a.default.createElement("span",null,t.coins.assignments.count)),a.default.createElement("div",{className:"coins-section__item"},a.default.createElement("span",null,e.coins.modules),a.default.createElement("span",null,t.coins.modules.count)))):null};var a=e("react"),n=e("../context"),i=e("pragmate-ui/alert")}}),S.set("./views/index",{hash:3592966938,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.View=function({store:e}){const[t,a]=g.default.useState(e.ready),[{fetching:n},i]=g.default.useState({isUnpublished:e.isUnpublished,fetching:e.fetching}),[,l]=g.default.useState(e.accessibility),s=e.texts;var r,o,c;return(0,p.useBinder)([e],()=>{a(e.ready),i({isUnpublished:e.isUnpublished,fetching:e.fetching}),l(e.dyslexia)}),t?({displayName:o,email:c}=r=m.sessionWrapper.user.getProperties(),g.default.createElement(g.default.Fragment,null,g.default.createElement(h.ProfileContext.Provider,{value:{user:r,store:e,texts:s,fetching:n}},g.default.createElement(u.PageContainer,{className:"profile-container"},g.default.createElement("main",null,g.default.createElement("header",{className:"profile-header"},g.default.createElement(x.default,{userProps:r}),g.default.createElement("h4",{className:"h3"},o)),g.default.createElement("div",{className:"divider-section"}),g.default.createElement(b.UserCoins,null),g.default.createElement("div",{className:"profile__item"},g.default.createElement("h5",null,s.email),g.default.createElement("span",null,c)),g.default.createElement(v.LanguageSelector,null),g.default.createElement(E.ModeSelection,null),g.default.createElement(y.AudioSettings,null),e.isUnpublished&&g.default.createElement(f.Button,{variant:"primary",fetching:n,onClick:e.save},s.save)),g.default.createElement("footer",{className:"app-version"},s.version,": ",d.default.version))))):null};var u=e("@aimpact/ailearn-app/components/ui"),d=e("@aimpact/ailearn-app/config"),m=e("@aimpact/chat-sdk/session"),p=e("@beyond-js/react-18-widgets/hooks"),f=e("pragmate-ui/components"),g=e("react"),h=e("../context"),y=e("./audio"),b=e("./coins"),v=e("./language-selector"),E=e("./mode-selection"),x=e("./profile-image/ImagePicker")}}),S.set("./views/language-selector/index",{hash:3901126527,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageSelector=function(){const{texts:e,store:t}=(0,s.useProfileContext)(),[,a]=i.default.useState(t.language),n=((0,r.useBinder)([t],()=>a(t.language)),e=>{t.language=e.target.value});return i.default.createElement(i.default.Fragment,null,i.default.createElement("h5",null,e.language),i.default.createElement("section",{className:"language-selector  field__container"},i.default.createElement(l.Radio,{onChange:n,checked:"en"===t.language,name:"language",value:"en",label:"English"}),i.default.createElement(l.Radio,{onChange:n,checked:"es"===t.language,name:"language",value:"es",label:"EspaÃ±ol"})))};var i=e("react"),l=e("pragmate-ui/form"),s=e("../../context"),r=e("@beyond-js/react-18-widgets/hooks")}}),S.set("./views/mode-selection",{hash:3652541598,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ModeSelection=function(){const{texts:e,store:a}=(0,l.useProfileContext)(),[t,n]=i.default.useState("dyslexia"===a.accessibility);return(0,s.useBinder)([a],()=>n("dyslexia"===a.accessibility)),i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:" field__container"},i.default.createElement("h5",null,e.textMode),i.default.createElement("section",{className:"language-selector"},i.default.createElement(r.Checkbox,{onChange:e=>{var t="dyslexia"===a.accessibility?"normal":"dyslexia";a.accessibility=t,n("dyslexia"==t),e.preventDefault()},checked:t,name:"check",label:e.dyslexia}))))};var i=e("react"),l=e("../context"),s=e("@beyond-js/react-18-widgets/hooks"),r=e("pragmate-ui/form")}}),S.set("./views/permissions/index",{hash:805220452,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Permissions=function(){const a=(0,i.useProfileContext)().texts,e=[{src:"/assets/gclassroom.png",alt:"Google classroom",title:a.permissions.gclassroom.title,check:s.gclassroom.authorized,modal:!0}];return n.default.createElement("div",{className:"permissions__container"},n.default.createElement("label",null,a.permissions.title),n.default.createElement("div",{className:"permissions-items__container"},e.map((e,t)=>n.default.createElement(l.PermissionItem,{key:t,connectionValue:e,texts:a}))))};var n=e("react"),i=e("../../context"),l=e("./item"),s=e("@aimpact/ailearn-app/model/gclassroom")}}),S.set("./views/permissions/interfaces",{hash:1464281530,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})}}),S.set("./views/permissions/item",{hash:4207650292,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PermissionItem=void 0;var l=e("react"),s=e("pragmate-ui/image"),r=e("pragmate-ui/modal"),o=e("pragmate-ui/components");t.PermissionItem=({connectionValue:a})=>{var[e,,]=l.default.useState(a.check);const[t,n]=l.default.useState(!1),i=()=>{n(!t)};return l.default.createElement("div",{className:"permission-item"},l.default.createElement(e?()=>{var e=a.src||a.icon,t=a.src?a.alt:a.title;return l.default.createElement("div",{className:"permission-menu__item admit"},l.default.createElement(s.Image,{src:e,alt:t}),l.default.createElement("span",null,a.title))}:()=>l.default.createElement("div",{className:"permission-menu__item"},l.default.createElement(o.Button,{icon:"add",variant:"primary",onClick:i,label:a.title})),null),t&&a?.modal&&l.default.createElement(r.Modal,{closeBackdrop:!1,show:!0,className:"beauty-modal",onClose:()=>{n(!t)}},l.default.createElement("ailearn-gclassroom-permissions",null)))}}}),S.set("./views/profile-image/ImagePicker",{hash:1499835956,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({userProps:e}){var[t,,]=a.default.useState(e.photoURL);return a.default.createElement("section",{className:"user-image-wrapper"},t&&a.default.createElement(n.UserImage,{src:t??"",alt:e.displayName}))};var a=e("react"),n=e("./")}}),S.set("./views/profile-image/index",{hash:2599470037,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.UserImage=function({src:e,alt:t}){return a.default.createElement(n.Image,{className:"user-image",src:e,alt:t})};var a=e("react"),n=e("pragmate-ui/image")}}),j.exports.descriptor=[{im:"./controller",from:"Controller",name:"Controller"},{im:"./views/index",from:"View",name:"View"}],j.exports.process=function({require:e,prop:t,value:a}){!e&&"Controller"!==t||n("Controller",e?e("./controller").Controller:a),!e&&"View"!==t||n("View",e?e("./views/index").View:a)},n("__beyond_pkg",j),n("hmr",new function(){this.on=(e,t)=>j.hmr.on(e,t),this.off=(e,t)=>j.hmr.off(e,t)}),j.initialise(S)}}});