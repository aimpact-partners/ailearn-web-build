System.register(["@beyond-js/widgets@1.1.0/render","@beyond-js/kernel@0.1.9/bundle","@beyond-js/kernel@0.1.9/styles","@beyond-js/react-18-widgets@1.1.2/page","@beyond-js/reactive@1.1.12/model","@aimpact/ailearn-sdk@1.0.0/core","react@18.2.0","@aimpact/ailearn-app@0.0.42/components/navbar-header.code","@aimpact/ailearn-app@0.0.42/config","pragmate-ui@0.1.1/image","@aimpact/ailearn-app@0.0.42/components/ui","@aimpact/chat@1.0.1/shared/components","@aimpact/chat@1.0.1/shared/hooks","pragmate-ui@0.1.1/form","pragmate-ui@0.1.1/toast","pragmate-ui@0.1.1/code-verification","pragmate-ui@0.1.1/components","@beyond-js/kernel@0.1.9/routing","@beyond-js/react-18-widgets@1.1.2/hooks"],function(r,e){"use strict";var t,a,o,n,s,i,c,l,d,m,u,p,g,h,f,v,b,y,w,j,x;return r({Controller:void 0,Header:void 0,View:void 0}),{setters:[function(e){t=e},function(e){a=e},function(e){o=e},function(e){n=e},function(e){s=e},function(e){i=e},function(e){c=e},function(e){l=e},function(e){d=e},function(e){m=e},function(e){u=e},function(e){p=e},function(e){g=e},function(e){h=e},function(e){f=e},function(e){v=e},function(e){b=e},function(e){y=e},function(e){w=e}],execute:function(){x=a.Bundle,(j=new x({module:{vspecifier:"@aimpact/ailearn-app@0.0.42/classrooms/join",multibundle:!0},type:"widget"},e.meta.url).package()).dependencies.update([["@beyond-js/widgets/render",t],["@beyond-js/kernel/styles",o],["@beyond-js/react-18-widgets/page",n],["@beyond-js/reactive/model",s],["@aimpact/ailearn-sdk/core",i],["react",c],["@aimpact/ailearn-app/components/navbar-header.code",l],["@aimpact/ailearn-app/config",d],["pragmate-ui/image",m],["@aimpact/ailearn-app/components/ui",u],["@aimpact/chat/shared/components",p],["@aimpact/chat/shared/hooks",g],["pragmate-ui/form",h],["pragmate-ui/toast",f],["pragmate-ui/code-verification",v],["pragmate-ui/components",b],["@beyond-js/kernel/routing",y],["@beyond-js/react-18-widgets/hooks",w]]),brequire("@beyond-js/widgets/render").widgets.register([{name:"ailearn-classroom-join",vspecifier:"@aimpact/ailearn-app@0.0.42/classrooms/join.widget",is:"page",route:"/classrooms/join",layout:"general-layout"}]),brequire("@beyond-js/kernel/styles").styles.register("@aimpact/ailearn-app@0.0.42/classrooms/join.widget"),(x=new Map).set("./controller",{hash:198384358,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Controller=void 0;var a=e("@beyond-js/react-18-widgets/page"),r=e("./views"),o=e("./store");class n extends a.PageReactWidgetController{#store;createStore(){return this.#store=new o.StoreManager,this.#store}get Widget(){return r.View}show(){this.#store.load(this.uri.qs.get("code"))}hide(){this.#store.clear()}}t.Controller=n}}),x.set("./store",{hash:1876651355,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StoreManager=void 0;var a=e("@beyond-js/reactive/model"),r=e("@aimpact/ailearn-sdk/core");class o extends a.ReactiveModel{#model;get model(){return this.#model}get TOTAL_CODES(){return 7}#code;get code(){return this.#code}get validCode(){return this.#code&&this.#code.length===this.TOTAL_CODES}constructor(){super(),this.#model=new r.Classroom({})}load(e){e&&(this.#code=e),this.ready=!0}clear(){this.ready=!1}}t.StoreManager=o}}),x.set("./views/context",{hash:4056540268,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.useJoinContext=t.JoinContext=void 0;var a=e("react");const r=t.JoinContext=a.default.createContext({});t.useJoinContext=()=>a.default.useContext(r)}}),x.set("./views/header",{hash:1987354350,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Header=function(){var e=(0,o.useJoinContext)().texts;return a.createElement("section",null,a.createElement(r.NavbarHeader,{breadcrumb:[[e.breadcrumb.classrooms,"/classrooms/list"],[e.breadcrumb.join,""]]}))};var a=e("react"),r=e("@aimpact/ailearn-app/components/navbar-header.code"),o=e("./context")}}),x.set("./views/index",{hash:3885549626,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.View=function({store:t}){const[a,r]=d.useState(t.code??""),[e,o]=d.useState(""),[n,s]=d.useState(t.ready),[i,c]=((0,C.useBinder)([t],()=>s(t.ready)),(0,v.useTexts)(f.module.specifier));var l;return i&&n?(l=7!==a.length,d.createElement(g.JoinContext.Provider,{value:{texts:c,store:t}},d.createElement(p.Header,{token:a}),d.createElement(u.PageContainer,{className:"token-page__container"},d.createElement(b.Form,{onSubmit:async()=>{try{var e=await t.model.join({code:a});e.status?"PENDING"===e.data.status?(x.routing.pushState("/classrooms/list"),y.toast.success(c.messages.pending)):["ALREADY","AUTHORIZED"].includes(e.data.status)&&(x.routing.pushState("/classrooms/view/"+e.data.classroom.id),y.toast.success(c.messages.authorized)):o(c.errors.INVALID_CODE)}catch(e){o(c.errors[e?.message]??c.errors.INVALID_CODE)}},className:"token-form__container"},d.createElement("header",null,d.createElement(m.Image,{className:"animate glow delay-1",src:"/assets/RVD.AI.Branding.png",alt:"RVD.AI"}),d.createElement("h1",{className:"animate glow delay-2"},c.title),d.createElement("span",{className:"p1"},c.form.subtitle)),d.createElement(u.ErrorRenderer,{error:e}),d.createElement(w.InputCode,{upper:!0,length:t.TOTAL_CODES,value:a,name:"name",type:"text",onCodeFull:e=>{r(e),o("")},required:!0}),d.createElement(j.Button,{block:!0,disabled:l,variant:"primary",type:"submit"},c.action.join)),d.createElement("div",{className:"token-info__container flex-container flex-column"},d.createElement("p",{className:"text-center"},c.info.help))))):d.createElement(h.PreloadScreen,null)};var d=e("react"),m=e("pragmate-ui/image"),u=e("@aimpact/ailearn-app/components/ui"),p=e("./header"),g=e("./context"),h=e("@aimpact/chat/shared/components"),f=e("beyond_context"),v=e("@aimpact/chat/shared/hooks"),b=e("pragmate-ui/form"),y=e("pragmate-ui/toast"),w=e("pragmate-ui/code-verification"),j=e("pragmate-ui/components"),x=e("@beyond-js/kernel/routing"),C=e("@beyond-js/react-18-widgets/hooks")}}),j.exports.descriptor=[{im:"./controller",from:"Controller",name:"Controller"},{im:"./views/header",from:"Header",name:"Header"},{im:"./views/index",from:"View",name:"View"}],j.exports.process=function({require:e,prop:t,value:a}){!e&&"Controller"!==t||r("Controller",e?e("./controller").Controller:a),!e&&"Header"!==t||r("Header",e?e("./views/header").Header:a),!e&&"View"!==t||r("View",e?e("./views/index").View:a)},r("__beyond_pkg",j),r("hmr",new function(){this.on=(e,t)=>j.hmr.on(e,t),this.off=(e,t)=>j.hmr.off(e,t)}),j.initialise(x)}}});