System.register(["@beyond-js/widgets@1.1.0/render","@beyond-js/kernel@0.1.9/bundle","@beyond-js/kernel@0.1.9/styles","@beyond-js/react-18-widgets@1.1.2/page","@aimpact/ailearn-app@0.1.13/main-layout.widget","@beyond-js/widgets@1.1.0/controller","@beyond-js/reactive@1.2.0/model","@aimpact/ailearn-sdk@1.0.0/entities/classrooms","@beyond-js/kernel@0.1.9/texts","react@18.2.0","pragmate-ui@1.0.0-beta.6/modal","pragmate-ui@1.0.0-beta.6/components","@aimpact/ailearn-app@0.1.13/components/ui","@aimpact/ailearn-app@0.1.13/components/hooks","pragmate-ui@1.0.0-beta.6/icons","@aimpact/ailearn-app@0.1.13/components/icons","pragmate-ui@1.0.0-beta.6/dropdown","@beyond-js/react-18-widgets@1.1.2/hooks","pragmate-ui@1.0.0-beta.6/list"],function(n,e){var t,a,o,r,i,s,l,c,d,m,u,p,f,g,h,y,v,w,E,b,x;return n({Controller:void 0,View:void 0}),{setters:[function(e){t=e},function(e){a=e},function(e){o=e},function(e){r=e},function(e){i=e},function(e){s=e},function(e){l=e},function(e){c=e},function(e){d=e},function(e){m=e},function(e){u=e},function(e){p=e},function(e){f=e},function(e){g=e},function(e){h=e},function(e){y=e},function(e){v=e},function(e){w=e},function(e){E=e}],execute:function(){x=a.Bundle,(b=new x({module:{vspecifier:"@aimpact/ailearn-app@0.1.13/classrooms/list",multibundle:!0},type:"widget"},e.meta.url).package()).dependencies.update([["@beyond-js/widgets/render",t],["@beyond-js/kernel/styles",o],["@beyond-js/react-18-widgets/page",r],["@aimpact/ailearn-app/main-layout.widget",i],["@beyond-js/widgets/controller",s],["@beyond-js/reactive/model",l],["@aimpact/ailearn-sdk/entities/classrooms",c],["@beyond-js/kernel/texts",d],["react",m],["pragmate-ui/modal",u],["pragmate-ui/components",p],["@aimpact/ailearn-app/components/ui",f],["@aimpact/ailearn-app/components/hooks",g],["pragmate-ui/icons",h],["@aimpact/ailearn-app/components/icons",y],["pragmate-ui/dropdown",v],["@beyond-js/react-18-widgets/hooks",w],["pragmate-ui/list",E]]),brequire("@beyond-js/widgets/render").widgets.register([{name:"ailearn-classrooms-list",vspecifier:"@aimpact/ailearn-app@0.1.13/classrooms/list.widget",is:"page",route:"/classrooms/list",layout:"main-layout"}]),brequire("@beyond-js/kernel/styles").styles.register("@aimpact/ailearn-app@0.1.13/classrooms/list.widget"),(x=new Map).set("./controller",{hash:1968607220,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Controller=void 0;var a=e("@beyond-js/react-18-widgets/page"),n=e("./views"),o=e("./store");class r extends a.PageReactWidgetController{#store;createStore(){return this.#store=new o.StoreManager,this.#store}show(){this.#store.load()}get Widget(){return n.View}hide(){}}t.Controller=r}}),x.set("./store",{hash:3551502678,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StoreManager=void 0;var a=e("@beyond-js/reactive/model"),n=e("@aimpact/ailearn-sdk/entities/classrooms"),o=e("beyond_context"),r=e("@beyond-js/kernel/texts");class i extends a.ReactiveModel{isStore;#items;get items(){return this.model.items}#model;get model(){return this.#model}#texts=new r.CurrentTexts(o.module.specifier);get texts(){return this.#texts.value}get ready(){return super.ready&&this.#texts.ready}get state(){return{ready:this.ready,fetching:this.fetching,items:this.items,totalItems:this.items.length}}constructor(){super(),this.#model=new n.Classrooms,this.model.on("change",this.triggerEvent),this.#texts.on("change",this.triggerEvent)}async load(){try{this.fetching=!0,await this.model.load(),globalThis.store=this,super.ready=!0}catch(e){console.error(e)}finally{this.fetching=!1}}async delete(e){await e.delete()}async deleteItem(e){await e.delete(),await this.model.load()}}t.StoreManager=i}}),x.set("./views/context",{hash:3362648760,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.useModuleContext=t.ModuleContext=void 0;var a=e("react");let n=t.ModuleContext=a.default.createContext({});t.useModuleContext=()=>a.default.useContext(n)}}),x.set("./views/delete",{hash:3556718863,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteItemModal=function({onClose:e,item:t,texts:a,store:n}){let[,,]=l.default.useState(!1),[o,r]=l.default.useState(!1),[i,s]=l.default.useState(null);return l.default.createElement(c.Modal,{show:!0,onClose:e},l.default.createElement("header",{className:"modal__header"},l.default.createElement("h2",null,a.delete.title)),l.default.createElement(m.ErrorRenderer,{error:i}),l.default.createElement("div",{className:"modal__content"},l.default.createElement("p",null,a.delete.description)),l.default.createElement("footer",{className:"modal__actions"},l.default.createElement(d.Button,{onClick:e,variant:"primary",bordered:!0},a.actions.cancel),l.default.createElement(d.Button,{onClick:async()=>{try{r(!0),await n.deleteItem(t),console.log(30),e()}catch(e){console.log(e),s(a.delete.errors[e.code.toString()]??a.delete.errors.default)}finally{r(!1)}},variant:"primary"},a.actions.confirm)),l.default.createElement(m.ProcessContainer,{fetching:o}))};var l=e("react"),c=e("pragmate-ui/modal"),d=e("pragmate-ui/components"),m=e("@aimpact/ailearn-app/components/ui")}}),x.set("./views/empty",{hash:1218374095,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyList=function(){var e=(0,o.useModuleContext)().texts;return a.default.createElement(r.EmptyCard,{text:e.empty.title,description:e.empty.description,icon:"edit"},a.default.createElement("div",{className:"actions flex-container flex-center"},a.default.createElement(n.Link,{href:"/classrooms/management",className:"grow btn btn-primary"},e.actions.register)))};var a=e("react"),n=e("pragmate-ui/components"),o=e("./context"),r=e("@aimpact/ailearn-app/components/ui")}}),x.set("./views/header-menu/index",{hash:3829175575,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderMenu=function({store:{texts:e}}){var t=(0,n.useMediaQuery)();return"md"!==t&&"sm"!==t&&"lg"!==t?a.default.createElement(s.Dropdown,{className:"mobile-header-menu"},a.default.createElement(s.DropdownToggle,{className:"mobile-header-menu__toggle"},a.default.createElement(r.IconButton,{icon:"moreVert"})),a.default.createElement(s.DropdownMenu,null,a.default.createElement(s.DropdownItem,{href:"/classrooms/join"},a.default.createElement(i.AppIcon,{icon:"community"}),e.actions.join),a.default.createElement(s.DropdownItem,{href:"/classrooms/management"},a.default.createElement(r.Icon,{icon:"add-circle"}),e.actions.register))):a.default.createElement("div",{className:"page-title__actions"},a.default.createElement(o.Link,{href:"/classrooms/join"},e.actions.join),a.default.createElement(o.Link,{href:"/classrooms/management"},a.default.createElement(r.Icon,{icon:"add-circle"}),e.actions.register))};var a=e("react"),n=e("@aimpact/ailearn-app/components/hooks"),o=e("pragmate-ui/components"),r=e("pragmate-ui/icons"),i=e("@aimpact/ailearn-app/components/icons"),s=e("pragmate-ui/dropdown")}}),x.set("./views/index",{hash:2255715334,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.View=function({store:e}){let[t,,]=(0,d.useState)(e.fetching||e.state?.fetching),[a,n]=(0,d.useState)(e.state),[o,r]=(0,d.useState)(null),[i,s]=d.default.useState(!1),l=e.texts,c=((0,p.useBinder)([e],()=>n(e.state)),d.default.useMemo(()=>({texts:l,store:e,fetching:t,selectedItem:o,setSelectedItem:r,...a}),[l,e,t,o,a]));return a.ready?d.default.createElement(d.default.Fragment,null,d.default.createElement(u.ModuleContext.Provider,{value:c},d.default.createElement(m.PageContainer,null,d.default.createElement(m.PageTitle,{title:l.title},d.default.createElement(g.HeaderMenu,{store:e})),d.default.createElement(f.OrganizationsList,{store:e}))),o&&d.default.createElement(h.DeleteItemModal,{item:o,store:e,texts:l,onClose:()=>{i&&r(null),s(!i),r(null)}})):d.default.createElement(m.PageLoader,{fetching:!0})};var d=e("react"),m=e("@aimpact/ailearn-app/components/ui"),u=e("./context"),p=e("@beyond-js/react-18-widgets/hooks"),f=e("./list"),g=e("./header-menu"),h=e("./delete")}}),x.set("./views/item/index",{hash:3710485703,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Organization=function({data:t}){let a=(0,s.useModuleContext)().setSelectedItem;return n.default.createElement(r.Link,{href:"/classrooms/view/"+t.id},n.default.createElement("div",{className:"list__item"},n.default.createElement("div",{className:"item__content"},n.default.createElement(o.AppIcon,{icon:"classroom"}),n.default.createElement("h3",null,t.name)),n.default.createElement("div",{className:"item__actions"},n.default.createElement(i.IconButton,{icon:"delete",onClick:e=>{e.stopPropagation(),e.preventDefault(),a(t)},className:"circle"}))))};var n=e("react"),o=e("@aimpact/ailearn-app/components/icons"),r=e("pragmate-ui/components"),i=e("pragmate-ui/icons"),s=e("../context")}}),x.set("./views/list",{hash:3902479519,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.OrganizationsList=function({store:e}){return e.items.length<1?a.default.createElement(r.EmptyList,null):a.default.createElement("article",{className:"organization-list__container"},a.default.createElement(o.List,{className:"list__items",items:e.items,control:n.Organization}))};var a=e("react"),n=e("./item"),o=e("pragmate-ui/list"),r=e("./empty")}}),b.exports.descriptor=[{im:"./controller",from:"Controller",name:"Controller"},{im:"./views/index",from:"View",name:"View"}],b.exports.process=function({require:e,prop:t,value:a}){!e&&"Controller"!==t||n("Controller",e?e("./controller").Controller:a),!e&&"View"!==t||n("View",e?e("./views/index").View:a)},n("__beyond_pkg",b),n("hmr",new function(){this.on=(e,t)=>b.hmr.on(e,t),this.off=(e,t)=>b.hmr.off(e,t)}),b.initialise(x)}}});