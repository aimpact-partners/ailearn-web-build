System.register(["@beyond-js/widgets@1.1.0/render","@beyond-js/kernel@0.1.9/bundle","@beyond-js/kernel@0.1.9/styles","@beyond-js/react-18-widgets@1.1.2/page","@aimpact/ailearn-sdk@1.0.0/core","@beyond-js/reactive@1.1.12/model","@aimpact/chat-sdk@1.0.0/session","react@18.2.0","pragmate-ui@0.1.1/toast","@beyond-js/kernel@0.1.9/routing","@beyond-js/react-18-widgets@1.1.2/hooks","@aimpact/ailearn-app@0.0.32/components/navbar-header.code","@aimpact/ailearn-app@0.0.32/config","pragmate-ui@0.1.1/form","pragmate-ui@0.1.1/components","@aimpact/ailearn-app@0.0.32/components/ui","pragmate-ui@0.1.1/form/react-select"],function(r,e){"use strict";var t,a,o,n,s,i,c,l,u,d,m,p,h,f,g,v,b,y,w;return r({Controller:void 0,Header:void 0}),{setters:[function(e){t=e},function(e){a=e},function(e){o=e},function(e){n=e},function(e){s=e},function(e){i=e},function(e){c=e},function(e){l=e},function(e){u=e},function(e){d=e},function(e){m=e},function(e){p=e},function(e){h=e},function(e){f=e},function(e){g=e},function(e){v=e},function(e){b=e}],execute:function(){w=a.Bundle,(y=new w({module:{vspecifier:"@aimpact/ailearn-app@0.0.32/classrooms/create",multibundle:!0},type:"widget"},e.meta.url).package()).dependencies.update([["@beyond-js/widgets/render",t],["@beyond-js/kernel/styles",o],["@beyond-js/react-18-widgets/page",n],["@aimpact/ailearn-sdk/core",s],["@beyond-js/reactive/model",i],["@aimpact/chat-sdk/session",c],["react",l],["pragmate-ui/toast",u],["@beyond-js/kernel/routing",d],["@beyond-js/react-18-widgets/hooks",m],["@aimpact/ailearn-app/components/navbar-header.code",p],["@aimpact/ailearn-app/config",h],["pragmate-ui/form",f],["pragmate-ui/components",g],["@aimpact/ailearn-app/components/ui",v],["pragmate-ui/form/react-select",b]]),brequire("@beyond-js/widgets/render").widgets.register([{name:"app-classrooms-create",vspecifier:"@aimpact/ailearn-app@0.0.32/classrooms/create.widget",is:"page",route:"/classrooms/create",layout:"general-layout"}]),brequire("@beyond-js/kernel/styles").styles.register("@aimpact/ailearn-app@0.0.32/classrooms/create.widget"),(w=new Map).set("./controller",{hash:940274451,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Controller=void 0;var a=e("@beyond-js/react-18-widgets/page"),r=e("./store"),o=e("./views");class n extends a.PageReactWidgetController{#store;createStore(){return this.#store=new r.StoreManager,this.#store}get Widget(){return o.View}show(){this.#store.load(this.uri.qs.get("id"))}hide(){this.#store.clear()}}t.Controller=n}}),w.set("./store",{hash:1870079049,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StoreManager=void 0;var a=e("@aimpact/ailearn-sdk/core"),r=e("@beyond-js/reactive/model"),o=e("@aimpact/chat-sdk/session");class n extends r.ReactiveModel{#model;get model(){return this.#model}get user(){return o.sessionWrapper.user}clear(){this.#model=void 0,this.ready=!1}async load(){try{this.ready=!1,this.#model=new a.Classroom({})}catch(e){console.error(e)}finally{this.ready=!0}}async delete(e){this.#model.classrooms.remove(e),this.trigger("change")}async save(e){try{this.fetching=!0;var{status:t,data:a}=await this.model.save({...e});if(t)return a;throw new Error("error publishing classroom")}catch(e){console.error(1,e)}finally{this.fetching=!1}}}t.StoreManager=n}}),w.set("./views/context",{hash:952274567,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.useModuleContext=t.ModuleContext=void 0;var a=e("react");const r=t.ModuleContext=a.createContext({});t.useModuleContext=()=>a.useContext(r)}}),w.set("./views/events",{hash:2933641159,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.useForm=function(e,t,a){const r={name:t?.model?.name||"",description:t?.model?.description||""},[o,n]=u.useState(r),[s,i]=u.useState(!1),[,c]=u.useState("");if((0,p.useBinder)([t],()=>{t.ready||n(r)}),!e)return{};const l=t.model;return{values:o,fetching:s,setFetching:i,onChange:({currentTarget:e})=>{var t={...o};t[e.name]=e.value,n(t),c("")},onSubmit:async e=>{e.preventDefault(),e.stopPropagation(),i(!0);try{await l.publish(o),d.toast.success(a.create.success),m.routing.replaceState({},null,"/classrooms/view/"+l.id)}catch(e){c(e.message),d.toast.error(a.create.error)}finally{i(!1)}},setValues:n}};var u=e("react"),d=e("pragmate-ui/toast"),m=e("@beyond-js/kernel/routing"),p=e("@beyond-js/react-18-widgets/hooks")}}),w.set("./views/header",{hash:3746281293,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Header=function(){var e=(0,o.useModuleContext)().texts;return r.createElement("section",null,r.createElement(a.NavbarHeader,{breadcrumb:[[e.breadcrumb.organizations,"/organizations/list"],[e.breadcrumb.management,""]]}))};var a=e("@aimpact/ailearn-app/components/navbar-header.code"),r=e("react"),o=e("./context")}}),w.set("./views/index",{hash:2993569487,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.View=function({store:e}){var{ready:t,texts:a}=(0,h.useModel)(e),{fetching:r,values:o,onChange:n,onSubmit:s,setValues:i}=(0,f.useForm)(t,e,a);return t?(t={disabled:r||""===o.name},c.createElement(m.ModuleContext.Provider,{value:e={texts:a,store:e}},c.createElement(p.Header,null),c.createElement(d.PageContainer,{className:"form-page-container",fetching:r},c.createElement("header",{className:"page__header"},c.createElement("h3",null,a.create.title)),c.createElement(l.Form,{onSubmit:s,className:"form__container"},c.createElement(g.OwnershipField,{setValues:i,values:o}),c.createElement(l.Input,{label:a.create.name.label,placeholder:a.create.name.placeholder,value:o.name,name:"name",type:"text",onChange:n,required:!0}),c.createElement(l.Textarea,{label:a.create.description.label,name:"description",value:o.description,placeholder:a.create.description.placeholder,onChange:n}),c.createElement("div",{className:"form__footer"},c.createElement(u.Button,{fetching:r,...t,variant:"primary",type:"submit"},a.create.actions.save)))))):null};var c=e("react"),l=e("pragmate-ui/form"),u=e("pragmate-ui/components"),d=e("@aimpact/ailearn-app/components/ui"),m=e("./context"),p=e("./header"),h=e("./use-model"),f=e("./events"),g=e("./ownership")}}),w.set("./views/ownership",{hash:2337657386,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.OwnershipField=function({setValues:e,values:t}){const{store:a,texts:r}=(0,c.useModuleContext)();var o,n;return a.user.teacher?.orgs?(o={value:"",label:r.schools.select},n=[...a.user.teacher.orgs.map(e=>({value:e.id,label:e.name})),{value:a.user.id,label:r.schools.own}],s.default.createElement("div",null,s.default.createElement("label",{htmlFor:""},r.schools.label),s.default.createElement(i.ReactSelect,{value:t.owner,defaultOption:o,name:"owner",options:n,onChange:({currentTarget:t})=>{t.value===a.user.id?e(e=>({...e,owner:a.user.id})):e(e=>({...e,owner:t.value,organizationId:t.value}))}}))):null};var s=e("react"),i=e("pragmate-ui/form/react-select"),c=e("./context")}}),w.set("./views/use-model",{hash:1182693627,creator:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.useModel=function(t){var[e,,]=n.useState(t.ready),[a,r]=(0,o.useTexts)(s.module.specifier);return n.useEffect(()=>{const e=()=>{};return t.on("change",e),()=>t.off("change",e)}),{ready:e&&a,store:t,texts:r}};var o=e("@beyond-js/react-18-widgets/hooks"),n=e("react"),s=e("beyond_context")}}),y.exports.descriptor=[{im:"./controller",from:"Controller",name:"Controller"},{im:"./views/header",from:"Header",name:"Header"}],y.exports.process=function({require:e,prop:t,value:a}){!e&&"Controller"!==t||r("Controller",e?e("./controller").Controller:a),!e&&"Header"!==t||r("Header",e?e("./views/header").Header:a)},r("__beyond_pkg",y),r("hmr",new function(){this.on=(e,t)=>y.hmr.on(e,t),this.off=(e,t)=>y.hmr.off(e,t)}),y.initialise(w)}}});